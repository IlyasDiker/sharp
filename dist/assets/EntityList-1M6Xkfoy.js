import{aW as fe,d as A,aX as at,aY as W,n as lt,aZ as ie,o as i,c as h,w as r,p as I,q as X,u as e,v as ne,ai as B,a_ as Te,a$ as st,al as re,x as Be,b0 as nt,A as w,i as L,a as d,b as T,F as z,b1 as rt,b2 as _e,b3 as oe,y as V,b4 as Re,b5 as je,b6 as it,aw as Ae,an as le,h as C,b7 as ot,b8 as ut,b9 as dt,j as U,ba as ct,t as k,_ as D,D as pt,G as ft,H as ae,B as vt,bb as ht,U as q,I as yt,z as N,bc as mt,bd as bt,l as gt,be as wt,bf as _t,m as Ne,bg as kt,bh as Lt,bi as Ct,bj as $t,bk as St,bl as Et,bm as zt,aD as Tt,aq as ve,as as Bt,ar as he,at as ye,W as Se,r as x,ay as pe,ap as Rt,P as It,bn as De,aO as me,aU as be,bo as At,bp as Dt,bq as Ut,br as Pt,bs as qt,bt as Ue,X as Pe,Q as Ht,bu as Ft,bv as Kt,R as Vt,aQ as Ot,aA as Ee,bw as Xt,aL as qe,aB as Yt,K as Mt,aN as He,bx as jt,by as Nt,aF as Wt,aG as xt,aH as Gt,aI as Jt,aJ as Qt,aK as Fe,aV as Zt,aM as ea}from"./sharp-BDJdrkET.js";import{a as Ke,C as ta,b as aa,c as Ve,_ as la}from"./CommandDropdownItems.vue_vue_type_script_setup_true_lang-D_uJmeGk.js";import{_ as sa}from"./CardDescription.vue_vue_type_script_setup_true_lang-5qhlXF-y.js";/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=fe("ArrowDownIcon",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=fe("ArrowUpIcon",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=fe("ChevronsLeftIcon",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=fe("ChevronsRightIcon",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=fe("FilterIcon",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),da=A({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(f){const t=f,a=at(),{forwardRef:s,currentElement:o}=W();return a.contentId||(a.contentId=lt(void 0,"reka-dialog-content")),ie(()=>{a.triggerElement.value=o.value}),(c,n)=>(i(),h(e(ne),X(t,{ref:e(s),type:c.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":e(a).open.value||!1,"aria-controls":e(a).open.value?e(a).contentId:void 0,"data-state":e(a).open.value?"open":"closed",onClick:e(a).onOpenToggle}),{default:r(()=>[I(c.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","onClick"]))}}),[G,ca]=Be("ScrollAreaRoot"),pa=A({__name:"ScrollAreaRoot",props:{type:{default:"hover"},dir:{},scrollHideDelay:{default:600},asChild:{type:Boolean},as:{}},setup(f,{expose:t}){const a=f,s=B(0),o=B(0),c=B(),n=B(),u=B(),p=B(),g=B(!1),S=B(!1),{type:K,dir:E,scrollHideDelay:$}=Te(a),H=st(E);function Y(){var _;(_=c.value)==null||_.scrollTo({top:0})}function J(){var _;(_=c.value)==null||_.scrollTo({top:0,left:0})}t({viewport:c,scrollTop:Y,scrollTopLeft:J});const{forwardRef:v,currentElement:y}=W();return ca({type:K,dir:H,scrollHideDelay:$,scrollArea:y,viewport:c,onViewportChange:_=>{c.value=_||void 0},content:n,onContentChange:_=>{n.value=_},scrollbarX:u,scrollbarXEnabled:g,scrollbarY:p,scrollbarYEnabled:S,onScrollbarXChange:_=>{u.value=_||void 0},onScrollbarYChange:_=>{p.value=_||void 0},onScrollbarXEnabledChange:_=>{g.value=_},onScrollbarYEnabledChange:_=>{S.value=_},onCornerWidthChange:_=>{s.value=_},onCornerHeightChange:_=>{o.value=_}}),(_,Q)=>(i(),h(e(ne),{ref:e(v),"as-child":a.asChild,as:_.as,dir:e(H),style:re({position:"relative","--reka-scroll-area-corner-width":`${s.value}px`,"--reka-scroll-area-corner-height":`${o.value}px`})},{default:r(()=>[I(_.$slots,"default")]),_:3},8,["as-child","as","dir","style"]))}}),fa=A({inheritAttrs:!1,__name:"ScrollAreaViewport",props:{nonce:{},asChild:{type:Boolean},as:{}},setup(f,{expose:t}){const a=f,{nonce:s}=Te(a),o=nt(s),c=G(),n=B();ie(()=>{c.onViewportChange(n.value),c.onContentChange(p.value)}),t({viewportElement:n});const{forwardRef:u,currentElement:p}=W();return(g,S)=>(i(),w(z,null,[L("div",X({ref_key:"viewportElement",ref:n,"data-reka-scroll-area-viewport":"",style:{overflowX:e(c).scrollbarXEnabled.value?"scroll":"hidden",overflowY:e(c).scrollbarYEnabled.value?"scroll":"hidden"}},g.$attrs,{tabindex:0}),[d(e(ne),{ref:e(u),style:re({minWidth:e(c).scrollbarXEnabled.value?"fit-content":void 0}),"as-child":a.asChild,as:g.as},{default:r(()=>[I(g.$slots,"default")]),_:3},8,["style","as-child","as"])],16),d(e(ne),{as:"style",nonce:e(o)},{default:r(()=>S[0]||(S[0]=[T(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-reka-scroll-area-viewport] { scrollbar-width:none; -ms-overflow-style:none; -webkit-overflow-scrolling:touch; } [data-reka-scroll-area-viewport]::-webkit-scrollbar { display:none; } ")])),_:1},8,["nonce"])],64))}});function We(f,t){return a=>{if(f[0]===f[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(f[1]-f[0]);return t[0]+s*(a-f[0])}}function ke(f){const t=xe(f.viewport,f.content),a=f.scrollbar.paddingStart+f.scrollbar.paddingEnd,s=(f.scrollbar.size-a)*t;return Math.max(s,18)}function xe(f,t){const a=f/t;return Number.isNaN(a)?0:a}function va(f,t=()=>{}){let a={left:f.scrollLeft,top:f.scrollTop},s=0;return function o(){const c={left:f.scrollLeft,top:f.scrollTop},n=a.left!==c.left,u=a.top!==c.top;(n||u)&&t(),a=c,s=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(s)}function Oe(f,t,a="ltr"){const s=ke(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,c=t.scrollbar.size-o,n=t.content-t.viewport,u=c-s,p=a==="ltr"?[0,n]:[n*-1,0],g=rt(f,p[0],p[1]);return We([0,n],[0,u])(g)}function ge(f){return f?Number.parseInt(f,10):0}function ha(f,t,a,s="ltr"){const o=ke(a),c=o/2,n=t||c,u=o-n,p=a.scrollbar.paddingStart+n,g=a.scrollbar.size-a.scrollbar.paddingEnd-u,S=a.content-a.viewport,K=s==="ltr"?[0,S]:[S*-1,0];return We([p,g],K)(f)}function Xe(f,t){return f>0&&f<t}const Ge=A({__name:"ScrollAreaScrollbarImpl",props:{isHorizontal:{type:Boolean}},emits:["onDragScroll","onWheelScroll","onThumbPointerDown"],setup(f,{emit:t}){const a=f,s=t,o=G(),c=Le(),n=Ce(),{forwardRef:u,currentElement:p}=W(),g=B(""),S=B();function K(v){var y,_;if(S.value){const Q=v.clientX-((y=S.value)==null?void 0:y.left),te=v.clientY-((_=S.value)==null?void 0:_.top);s("onDragScroll",{x:Q,y:te})}}function E(v){v.button===0&&(v.target.setPointerCapture(v.pointerId),S.value=p.value.getBoundingClientRect(),g.value=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",o.viewport&&(o.viewport.value.style.scrollBehavior="auto"),K(v))}function $(v){K(v)}function H(v){const y=v.target;y.hasPointerCapture(v.pointerId)&&y.releasePointerCapture(v.pointerId),document.body.style.webkitUserSelect=g.value,o.viewport&&(o.viewport.value.style.scrollBehavior=""),S.value=void 0}function Y(v){var te;const y=v.target,_=(te=p.value)==null?void 0:te.contains(y),Q=c.sizes.value.content-c.sizes.value.viewport;_&&c.handleWheelScroll(v,Q)}ie(()=>{document.addEventListener("wheel",Y,{passive:!1})}),_e(()=>{document.removeEventListener("wheel",Y)});function J(){var v,y,_,Q,te;p.value&&(a.isHorizontal?c.handleSizeChange({content:((v=o.viewport.value)==null?void 0:v.scrollWidth)??0,viewport:((y=o.viewport.value)==null?void 0:y.offsetWidth)??0,scrollbar:{size:p.value.clientWidth??0,paddingStart:ge(getComputedStyle(p.value).paddingLeft),paddingEnd:ge(getComputedStyle(p.value).paddingRight)}}):c.handleSizeChange({content:((_=o.viewport.value)==null?void 0:_.scrollHeight)??0,viewport:((Q=o.viewport.value)==null?void 0:Q.offsetHeight)??0,scrollbar:{size:((te=p.value)==null?void 0:te.clientHeight)??0,paddingStart:ge(getComputedStyle(p.value).paddingLeft),paddingEnd:ge(getComputedStyle(p.value).paddingRight)}}))}return oe(p,J),oe(o.content,J),(v,y)=>(i(),h(e(ne),{ref:e(u),style:{position:"absolute"},"data-scrollbarimpl":"",as:e(n).as.value,"as-child":e(n).asChild.value,onPointerdown:E,onPointermove:$,onPointerup:H},{default:r(()=>[I(v.$slots,"default")]),_:3},8,["as","as-child"]))}}),ya=A({__name:"ScrollAreaScrollbarX",setup(f){const t=G(),a=Le(),{forwardRef:s,currentElement:o}=W();ie(()=>{o.value&&t.onScrollbarXChange(o.value)});const c=V(()=>a.sizes.value);return(n,u)=>(i(),h(Ge,{ref:e(s),"is-horizontal":!0,"data-orientation":"horizontal",style:re({bottom:0,left:e(t).dir.value==="rtl"?"var(--reka-scroll-area-corner-width)":0,right:e(t).dir.value==="ltr"?"var(--reka-scroll-area-corner-width)":0,"--reka-scroll-area-thumb-width":c.value?`${e(ke)(c.value)}px`:void 0}),onOnDragScroll:u[0]||(u[0]=p=>e(a).onDragScroll(p.x))},{default:r(()=>[I(n.$slots,"default")]),_:3},8,["style"]))}}),ma=A({__name:"ScrollAreaScrollbarY",setup(f){const t=G(),a=Le(),{forwardRef:s,currentElement:o}=W();ie(()=>{o.value&&t.onScrollbarYChange(o.value)});const c=V(()=>a.sizes.value);return(n,u)=>(i(),h(Ge,{ref:e(s),"is-horizontal":!1,"data-orientation":"vertical",style:re({top:0,right:e(t).dir.value==="ltr"?0:void 0,left:e(t).dir.value==="rtl"?0:void 0,bottom:"var(--reka-scroll-area-corner-height)","--reka-scroll-area-thumb-height":c.value?`${e(ke)(c.value)}px`:void 0}),onOnDragScroll:u[0]||(u[0]=p=>e(a).onDragScroll(p.y))},{default:r(()=>[I(n.$slots,"default")]),_:3},8,["style"]))}}),[Le,ba]=Be("ScrollAreaScrollbarVisible"),Ie=A({__name:"ScrollAreaScrollbarVisible",setup(f){const t=G(),a=Ce(),{forwardRef:s}=W(),o=B({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=V(()=>{const v=xe(o.value.viewport,o.value.content);return v>0&&v<1}),n=B(),u=B(0);function p(v,y){if($.value){const _=t.viewport.value.scrollLeft+v.deltaY;t.viewport.value.scrollLeft=_,Xe(_,y)&&v.preventDefault()}else{const _=t.viewport.value.scrollTop+v.deltaY;t.viewport.value.scrollTop=_,Xe(_,y)&&v.preventDefault()}}function g(v,y){$.value?u.value=y.x:u.value=y.y}function S(v){u.value=0}function K(v){o.value=v}function E(v,y){return ha(v,u.value,o.value,y)}const $=V(()=>a.isHorizontal.value);function H(v){$.value?t.viewport.value.scrollLeft=E(v,t.dir.value):t.viewport.value.scrollTop=E(v)}function Y(){if($.value){if(t.viewport.value&&n.value){const v=t.viewport.value.scrollLeft,y=Oe(v,o.value,t.dir.value);n.value.style.transform=`translate3d(${y}px, 0, 0)`}}else if(t.viewport.value&&n.value){const v=t.viewport.value.scrollTop,y=Oe(v,o.value);n.value.style.transform=`translate3d(0, ${y}px, 0)`}}function J(v){n.value=v}return ba({sizes:o,hasThumb:c,handleWheelScroll:p,handleThumbDown:g,handleThumbUp:S,handleSizeChange:K,onThumbPositionChange:Y,onThumbChange:J,onDragScroll:H}),(v,y)=>$.value?(i(),h(ya,X({key:0},v.$attrs,{ref:e(s)}),{default:r(()=>[I(v.$slots,"default")]),_:3},16)):(i(),h(ma,X({key:1},v.$attrs,{ref:e(s)}),{default:r(()=>[I(v.$slots,"default")]),_:3},16))}}),Je=A({__name:"ScrollAreaScrollbarAuto",props:{forceMount:{type:Boolean}},setup(f){const t=G(),a=Ce(),{forwardRef:s}=W(),o=B(!1),c=je(()=>{if(t.viewport.value){const n=t.viewport.value.offsetWidth<t.viewport.value.scrollWidth,u=t.viewport.value.offsetHeight<t.viewport.value.scrollHeight;o.value=a.isHorizontal.value?n:u}},10);return ie(()=>c()),oe(t.viewport,c),oe(t.content,c),(n,u)=>(i(),h(e(Re),{present:n.forceMount||o.value},{default:r(()=>[d(Ie,X(n.$attrs,{ref:e(s),"data-state":o.value?"visible":"hidden"}),{default:r(()=>[I(n.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),ga=A({inheritAttrs:!1,__name:"ScrollAreaScrollbarHover",props:{forceMount:{type:Boolean}},setup(f){const t=G(),{forwardRef:a}=W();let s;const o=B(!1);function c(){window.clearTimeout(s),o.value=!0}function n(){s=window.setTimeout(()=>{o.value=!1},t.scrollHideDelay.value)}return ie(()=>{const u=t.scrollArea.value;u&&(u.addEventListener("pointerenter",c),u.addEventListener("pointerleave",n))}),_e(()=>{const u=t.scrollArea.value;u&&(window.clearTimeout(s),u.removeEventListener("pointerenter",c),u.removeEventListener("pointerleave",n))}),(u,p)=>(i(),h(e(Re),{present:u.forceMount||o.value},{default:r(()=>[d(Je,X(u.$attrs,{ref:e(a),"data-state":o.value?"visible":"hidden"}),{default:r(()=>[I(u.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),wa=A({__name:"ScrollAreaScrollbarScroll",props:{forceMount:{type:Boolean}},setup(f){const t=G(),a=Ce(),{forwardRef:s}=W(),{state:o,dispatch:c}=it("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});Ae(u=>{if(o.value==="idle"){const p=window.setTimeout(()=>c("HIDE"),t.scrollHideDelay.value);u(()=>{window.clearTimeout(p)})}});const n=je(()=>c("SCROLL_END"),100);return Ae(u=>{const p=t.viewport.value,g=a.isHorizontal.value?"scrollLeft":"scrollTop";if(p){let S=p[g];const K=()=>{const E=p[g];S!==E&&(c("SCROLL"),n()),S=E};p.addEventListener("scroll",K),u(()=>{p.removeEventListener("scroll",K)})}}),(u,p)=>(i(),h(e(Re),{present:u.forceMount||e(o)!=="hidden"},{default:r(()=>[d(Ie,X(u.$attrs,{ref:e(s)}),{default:r(()=>[I(u.$slots,"default")]),_:3},16)]),_:3},8,["present"]))}}),[Ce,_a]=Be("ScrollAreaScrollbar"),ka=A({inheritAttrs:!1,__name:"ScrollAreaScrollbar",props:{orientation:{default:"vertical"},forceMount:{type:Boolean},asChild:{type:Boolean},as:{default:"div"}},setup(f){const t=f,{forwardRef:a}=W(),s=G(),o=V(()=>t.orientation==="horizontal");le(o,()=>{o.value?s.onScrollbarXEnabledChange(!0):s.onScrollbarYEnabledChange(!0)},{immediate:!0}),_e(()=>{s.onScrollbarXEnabledChange(!1),s.onScrollbarYEnabledChange(!1)});const{orientation:c,forceMount:n,asChild:u,as:p}=Te(t);return _a({orientation:c,forceMount:n,isHorizontal:o,as:p,asChild:u}),(g,S)=>e(s).type.value==="hover"?(i(),h(ga,X({key:0},g.$attrs,{ref:e(a),"force-mount":e(n)}),{default:r(()=>[I(g.$slots,"default")]),_:3},16,["force-mount"])):e(s).type.value==="scroll"?(i(),h(wa,X({key:1},g.$attrs,{ref:e(a),"force-mount":e(n)}),{default:r(()=>[I(g.$slots,"default")]),_:3},16,["force-mount"])):e(s).type.value==="auto"?(i(),h(Je,X({key:2},g.$attrs,{ref:e(a),"force-mount":e(n)}),{default:r(()=>[I(g.$slots,"default")]),_:3},16,["force-mount"])):e(s).type.value==="always"?(i(),h(Ie,X({key:3},g.$attrs,{ref:e(a),"data-state":"visible"}),{default:r(()=>[I(g.$slots,"default")]),_:3},16)):C("",!0)}}),La=A({__name:"ScrollAreaThumb",props:{asChild:{type:Boolean},as:{}},setup(f){const t=f,a=G(),s=Le();function o(E){const $=E.target.getBoundingClientRect(),H=E.clientX-$.left,Y=E.clientY-$.top;s.handleThumbDown(E,{x:H,y:Y})}function c(E){s.handleThumbUp(E)}const{forwardRef:n,currentElement:u}=W(),p=B(),g=V(()=>a.viewport.value);function S(){if(!p.value){const E=va(g.value,s.onThumbPositionChange);p.value=E,s.onThumbPositionChange()}}const K=V(()=>s.sizes.value);return ot(K,()=>{s.onThumbChange(u.value),g.value&&(s.onThumbPositionChange(),g.value.addEventListener("scroll",S))}),_e(()=>{var E;g.value.removeEventListener("scroll",S),(E=a.viewport.value)==null||E.removeEventListener("scroll",S)}),(E,$)=>(i(),h(e(ne),{ref:e(n),"data-state":e(s).hasThumb?"visible":"hidden",style:{width:"var(--reka-scroll-area-thumb-width)",height:"var(--reka-scroll-area-thumb-height)"},"as-child":t.asChild,as:E.as,onPointerdown:o,onPointerup:c},{default:r(()=>[I(E.$slots,"default")]),_:3},8,["data-state","as-child","as"]))}}),Ca=A({__name:"ScrollAreaCornerImpl",setup(f){const t=G(),a=B(0),s=B(0),o=V(()=>!!a.value&&!!s.value);function c(){var p;const u=((p=t.scrollbarX.value)==null?void 0:p.offsetHeight)||0;t.onCornerHeightChange(u),s.value=u}function n(){var p;const u=((p=t.scrollbarY.value)==null?void 0:p.offsetWidth)||0;t.onCornerWidthChange(u),a.value=u}return oe(t.scrollbarX.value,c),oe(t.scrollbarY.value,n),le(()=>t.scrollbarX.value,c),le(()=>t.scrollbarY.value,n),(u,p)=>{var g;return o.value?(i(),h(e(ne),X({key:0,style:{width:`${a.value}px`,height:`${s.value}px`,position:"absolute",right:e(t).dir.value==="ltr"?0:void 0,left:e(t).dir.value==="rtl"?0:void 0,bottom:0}},(g=u.$parent)==null?void 0:g.$props),{default:r(()=>[I(u.$slots,"default")]),_:3},16,["style"])):C("",!0)}}}),$a=A({__name:"ScrollAreaCorner",props:{asChild:{type:Boolean},as:{}},setup(f){const t=f,{forwardRef:a}=W(),s=G(),o=V(()=>!!s.scrollbarX.value&&!!s.scrollbarY.value),c=V(()=>s.type.value!=="scroll"&&o.value);return(n,u)=>c.value?(i(),h(Ca,X({key:0},t,{ref:e(a)}),{default:r(()=>[I(n.$slots,"default")]),_:3},16)):C("",!0)}}),Sa=A({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(f){const t=f;return(a,s)=>(i(),h(e(da),ut(dt(t)),{default:r(()=>[I(a.$slots,"default")]),_:3},16))}}),Ea={class:"flex justify-center w-full gap-x-6 lg:gap-x-8","aria-label":"Pagination"},za={class:"flex gap-2"},Ta={class:"sr-only"},Ba={class:"flex min-w-[100px] gap-2 items-center justify-center text-sm font-medium"},Ra=["href"],Ia={class:"flex gap-2"},Aa={class:"sr-only"},Da=A({__name:"EntityListPagination",props:{entityList:{},linksOpenable:{type:Boolean}},emits:["change"],setup(f,{emit:t}){const a=f,s=t;function o(n,u=!1){if(a.linksOpenable&&(n.metaKey||n.ctrlKey||n.shiftKey||n.altKey)){n.stopPropagation();return}const p=n.target.closest("a").href;p&&!u&&(s("change",new URL(p).searchParams.get("page")),n.preventDefault())}function c(n){const u=new URL(a.entityList.meta.first_page_url);return u.searchParams.set("page",String(n)),u.toString()}return(n,u)=>(i(),w("nav",Ea,[L("div",za,[d(e(U),{as:n.entityList.meta.prev_page_url?"a":"button",class:"hidden sm:flex",size:"icon",variant:"outline",href:n.entityList.meta.first_page_url,disabled:!n.entityList.meta.prev_page_url,onClick:o},{default:r(()=>[d(e(ia),{class:"h-4 w-4"})]),_:1},8,["as","href","disabled"]),d(e(U),{as:n.entityList.meta.prev_page_url?"a":"button",size:"icon",variant:"outline",href:n.entityList.meta.prev_page_url,disabled:!n.entityList.meta.prev_page_url,onClick:o},{default:r(()=>[d(e(ct),{class:"h-4 w-4"}),L("span",Ta,k(e(D)("sharp::entity_list.pagination.previous")),1)]),_:1},8,["as","href","disabled"])]),L("div",Ba,[n.entityList.meta.last_page?(i(),w(z,{key:0},[L("span",null,k(e(D)("sharp::entity_list.pagination.current").split(":current_page")[0]),1),d(e(vt),{"model-value":String(n.entityList.meta.current_page),"onUpdate:modelValue":u[1]||(u[1]=p=>n.$emit("change",p))},{default:r(()=>[d(e(pt),{class:"w-10 justify-center [&_svg]:hidden"},{default:r(()=>[T(k(n.entityList.meta.current_page),1)]),_:1}),d(e(ft),{"align-offset":-22},{default:r(()=>[(i(!0),w(z,null,ae(n.entityList.meta.last_page,p=>(i(),h(e(yt),{value:String(p)},{default:r(()=>[n.linksOpenable?(i(),w("a",{key:0,class:"absolute inset-0",href:c(p),onPointerup:u[0]||(u[0]=g=>o(g,!0))},null,40,Ra)):C("",!0),T(" "+k(p),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1},8,["model-value"]),L("span",null,k(e(D)("sharp::entity_list.pagination.current",{last_page:n.entityList.meta.last_page}).split(":current_page")[1]),1)],64)):(i(),w(z,{key:1},[T(k(e(D)("sharp::entity_list.pagination.current_simple").replace(":current_page",n.entityList.meta.current_page+"")),1)],64))]),L("div",Ia,[d(e(U),{as:n.entityList.meta.next_page_url?"a":"button",size:"icon",variant:"outline",href:n.entityList.meta.next_page_url,disabled:!n.entityList.meta.next_page_url,onClick:o},{default:r(()=>[L("span",Aa,k(e(D)("sharp::entity_list.pagination.next")),1),d(e(ht),{class:"h-4 w-4"})]),_:1},8,["as","href","disabled"]),d(e(U),{as:n.entityList.meta.next_page_url?"a":"button",class:q(["hidden sm:flex",n.entityList.meta.last_page_url?"":"invisible"]),size:"icon",variant:"outline",href:n.entityList.meta.last_page_url,disabled:!n.entityList.meta.next_page_url,onClick:o},{default:r(()=>[d(e(oa),{class:"h-4 w-4"})]),_:1},8,["as","class","href","disabled"])])]))}}),ze=A({__name:"StateIcon",props:{stateValue:{}},setup(f){return(t,a)=>{var s;return i(),w("div",{class:"relative rounded-full",style:re({"--color":((s=t.stateValue)==null?void 0:s.color)??"black"})},a[0]||(a[0]=[L("div",{class:"h-1.5 w-1.5 rounded-full bg-[var(--color)]"},null,-1)]),4)}}}),Ua=A({__name:"Table",props:{class:{},noScroll:{type:Boolean}},setup(f){const t=f;return(a,s)=>(i(),w("div",{class:q(["relative",{"w-full overflow-auto":!a.noScroll}])},[L("table",{class:q(e(N)("w-full caption-bottom text-sm",t.class))},[I(a.$slots,"default")],2)],2))}}),Pa=A({__name:"TableBody",props:{class:{}},setup(f){const t=f;return(a,s)=>(i(),w("tbody",{class:q(e(N)("[&_tr:last-child]:border-0",t.class))},[I(a.$slots,"default")],2))}}),ce=A({__name:"TableCell",props:{class:{}},setup(f){const t=f;return(a,s)=>(i(),w("td",{class:q(e(N)("px-3 py-4 align-middle [&:has([role=checkbox])]:pr-0 first:pl-4 last:pr-4",t.class))},[I(a.$slots,"default")],2))}}),we=A({__name:"TableHead",props:{class:{}},setup(f){const t=f;return(a,s)=>(i(),w("th",{class:q(e(N)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t.class))},[I(a.$slots,"default")],2))}}),qa=A({__name:"TableHeader",props:{class:{}},setup(f){const t=f;return(a,s)=>(i(),w("thead",{class:q(e(N)("[&_tr]:border-b",t.class))},[I(a.$slots,"default")],2))}}),Ye=A({__name:"TableRow",props:{class:{}},setup(f){const t=f;return(a,s)=>(i(),w("tr",{class:q(e(N)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t.class))},[I(a.$slots,"default")],2))}}),Me=A({__name:"EntityListSearch",props:{entityList:{},expanded:{type:Boolean},inline:{type:Boolean}},emits:["submit","update:expanded"],setup(f,{emit:t}){var E;const a=f,s=t,o=B(),c=B(),{focused:n}=mt(o),{pressed:u}=bt({target:o}),p=B(((E=a.entityList.query)==null?void 0:E.search)??"");let g="";le(n,()=>{var $,H;n.value?(g&&(p.value=g,g=""),u.value?le(u,()=>{u.value||s("update:expanded",!0)},{once:!0}):s("update:expanded",!0)):u.value||(g=($=a.entityList.query)!=null&&$.search?"":p.value,p.value=(H=a.entityList.query)==null?void 0:H.search,s("update:expanded",!1))}),le(()=>a.entityList,()=>{var $;p.value=(($=a.entityList.query)==null?void 0:$.search)??"",s("update:expanded",!1)});function S(){s("update:expanded",!1),s("submit",p.value)}function K(){a.expanded||s("update:expanded",!0)}return($,H)=>{var Y,J;return i(),w("form",{onSubmit:Ne(S,["prevent"]),ref_key:"el",ref:o},[L("div",{class:q(["relative z-[1]",[$.inline?"h-8 w-[150px] 2xl:w-[200px]":""]])},[L("div",{class:q(["top-0 left-0 group flex gap-3",e(N)($.inline?"absolute h-8":"flex-col",$.inline&&$.expanded?"-mr-[100px]":"")])},[L("div",{class:q(["relative",[$.inline?"":"w-full"]])},[d(e(gt),{placeholder:e(D)("sharp::action_bar.list.search.placeholder"),modelValue:p.value,"onUpdate:modelValue":H[0]||(H[0]=v=>p.value=v),class:q(e(N)("w-full pl-8 h-9",{"h-8 w-[150px] 2xl:w-[200px]":$.inline,"sm:!w-[300px]":$.inline&&$.expanded,"pr-8":(Y=a.entityList.query)==null?void 0:Y.search})),type:"search",ref_key:"input",ref:c,onInput:K},null,8,["placeholder","modelValue","class"]),d(e(wt),{class:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"}),(J=a.entityList.query)!=null&&J.search?(i(),h(e(U),{key:0,type:"button",class:"absolute right-0 top-0 h-full",size:"sm",variant:"ghost",onClick:H[1]||(H[1]=v=>$.$emit("submit",null))},{default:r(()=>[d(e(_t),{class:"h-4 w-4 text-muted-foreground"})]),_:1})):C("",!0)],2),d(e(U),{type:"submit",class:q(e(N)("h-8 hidden",$.expanded?"inline-flex":"")),size:"sm"},{default:r(()=>[T(k(e(D)("sharp::action_bar.list.search.button")),1)]),_:1},8,["class"])],2)],2)],544)}}}),Qe=A({__name:"ScrollBar",props:{orientation:{default:"vertical"},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(f){const t=f,a=V(()=>{const{class:s,...o}=t;return o});return(s,o)=>(i(),h(e(ka),X(a.value,{class:e(N)("flex touch-none select-none transition-colors",s.orientation==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-px",s.orientation==="horizontal"&&"h-4 flex-col border-t border-t-transparent p-1",t.class)}),{default:r(()=>[d(e(La),{class:"relative flex-1 rounded-full bg-muted-foreground/50 hover:bg-muted-foreground"},{default:r(()=>o[0]||(o[0]=[L("div",{class:"absolute -inset-1.5 -top-4"},null,-1)])),_:1})]),_:1},16,["class"]))}}),Ha=A({__name:"ScrollArea",props:{type:{},dir:{},scrollHideDelay:{},asChild:{type:Boolean},as:{},class:{},touchType:{}},setup(f){const t=f,a=V(()=>{const{class:u,...p}=t;return p}),s=kt("(hover: none)"),o=B(),{arrivedState:c,measure:n}=Lt(()=>{var u;return(u=o.value)==null?void 0:u.viewportElement});return le($t(()=>{var u;return(u=o.value)==null?void 0:u.viewportElement}).width,Ct(n)),(u,p)=>(i(),h(e(pa),X(a.value,{type:e(s)?u.touchType:u.type,class:e(N)("relative overflow-hidden",t.class)}),{default:r(()=>[d(e(fa),{class:"group/viewport h-full w-full rounded-[inherit]","data-scroll-arrived-right":e(c).right,ref_key:"viewport",ref:o},{default:r(()=>[I(u.$slots,"default")]),_:3},8,["data-scroll-arrived-right"]),d(Qe),d(e($a))]),_:3},16,["type","class"]))}}),Fa={key:0,class:"fixed inset-0 z-10 bg-black/5"},Ka={class:"ml-auto self-start pointer-events-auto flex flex-wrap gap-2 lg:flex-nowrap"},Va={key:1,class:"col-auto"},Oa={key:1,class:"h-8 mb-4"},Xa={class:"flex sm:flex-wrap gap-y-6 gap-x-2"},Ya={class:"flex items-baseline"},Ma={key:0,class:"self-center -my-1 pointer-events-auto hidden sm:block"},ja={key:1,class:"relative -my-1 flex pointer-events-auto"},Na={class:"flex items-center lg:hidden"},Wa={class:"flex flex-col flex-wrap gap-4"},xa=["for"],Ga={class:"truncate"},Ja={class:"flex justify-center w-10"},Qa={class:"truncate"},ll=A({__name:"EntityList",props:{entityKey:{},entityList:{},filters:{},commands:{},title:{},inline:{type:Boolean},showCreateButton:{type:Boolean,default:!0},showReorderButton:{type:Boolean,default:!0},showSearchField:{type:Boolean,default:!0},showEntityState:{type:Boolean,default:!0},collapsed:{type:Boolean}},emits:["update:query","filter-change","reset","reordering","needs-topbar"],setup(f,{emit:t}){const a=f,s=B(),o=t,c=B(null),n=V(()=>!!c.value);function u(l,m){o("filter-change",l,m)}const p=B(!1);function g(l){o("update:query",{...a.entityList.query,search:l})}function S(){o("reset")}function K(l){o("update:query",{...a.entityList.query,page:l})}function E(l){const m=a.entityList.currentSort===l?a.entityList.currentSortDir==="desc"?a.entityList.config.defaultSort===a.entityList.currentSort?"asc":null:"desc":"asc";o("update:query",{...a.entityList.query,page:1,sort:m?l:null,dir:m||null})}function $(l,m){const{commands:M,entityKey:j}=a;Ee.post(x("code16.sharp.api.list.state",{entityKey:j,instanceId:m}),{value:l}).then(P=>{M.handleCommandResponse(P.data)}).catch(P=>{var F,b;const se=(F=P.response)==null?void 0:F.data;((b=P.response)==null?void 0:b.status)===422&&Zt(se.message,{title:D("modals.state.422.title"),isError:!0})})}async function H(l,m){const{commands:M,entityKey:j}=a;l.confirmation&&s.value.querySelector("[data-reka-scroll-area-viewport]").scrollTo({left:0,behavior:"smooth"}),await M.send(l,{postCommand:x("code16.sharp.api.list.command.instance",{entityKey:j,instanceId:m,commandKey:l.key}),getForm:x("code16.sharp.api.list.command.instance.form",{entityKey:j,instanceId:m,commandKey:l.key}),query:a.entityList.query,entityKey:j,instanceId:m},{highlightElement:()=>{var P;return(P=s.value)==null?void 0:P.querySelector(`[data-instance-row="${m}"]`)}})}async function Y(l){const{commands:m,entityKey:M}=a;await m.send(l,{postCommand:x("code16.sharp.api.list.command.entity",{entityKey:M,commandKey:l.key}),getForm:x("code16.sharp.api.list.command.entity.form",{entityKey:M,commandKey:l.key}),query:{...a.entityList.query,ids:Object.entries(c.value??{}).filter(([j,P])=>P).map(([j,P])=>j)},entityKey:M}),c.value=null}async function J(l){const{entityKey:m,entityList:M,commands:j}=a;s.value.querySelector("[data-reka-scroll-area-viewport]").scrollTo({left:0,behavior:"smooth"}),await ea(M.config.deleteConfirmationText,{highlightElement:()=>{var P;return(P=s.value)==null?void 0:P.querySelector(`[data-instance-row="${l}"]`)}})&&(await Ee.delete(x("code16.sharp.api.list.delete",{entityKey:m,instanceId:l})),j.handleCommandResponse({action:"reload"}))}const v=B(null),y=V(()=>!!v.value),_=B(),Q=St(()=>y.value?_.value.$el:null,V({get:()=>v.value??[],set:l=>{v.value=l}}),{animation:150});le(y,()=>{y.value?Q.start():Q.stop(),o("reordering",y.value)});async function te(){const{entityKey:l,commands:m}=a;await Ee.post(x("code16.sharp.api.list.reorder",{entityKey:l}),{instances:v.value.map(M=>a.entityList.instanceId(M))}),await m.handleCommandResponse({action:"reload"}),v.value=null}const ue=B(!1),de=V(()=>y.value||n.value);le([ue,de],()=>{ue.value?o("needs-topbar",de.value):o("needs-topbar",!1),a.inline&&document.dispatchEvent(new CustomEvent("breadcrumb:updateAppendItem",{detail:ue.value&&de.value?{label:a.title}:null}))});const et=Et(Xt).smaller("md"),$e=V(()=>a.entityList.fields.filter(l=>et.value?!l.hideOnXS:!0));return(l,m)=>(i(),h(aa,{commands:l.commands},{default:r(()=>{var M,j;return[L("div",{ref_key:"el",ref:s},[d(zt,{"enter-active-class":"transition","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:r(()=>[y.value?(i(),w("div",Fa)):C("",!0)]),_:1}),l.entityList?(i(),w(z,{key:0},[l.showReorderButton&&l.entityList.canReorder||l.entityList.canSelect||(M=l.entityList.dropdownEntityCommands(n.value))!=null&&M.flat().length||l.entityList.primaryCommand||l.showCreateButton&&l.entityList.authorizations.create?(i(),h(Tt,{key:0,class:q(e(N)("group container sticky top-14 border-b -mb-px -mt-4 pt-4 bg-white pb-4 px-4 lg:px-6 flex gap-3 pointer-events-none","lg:sticky lg:border-0 lg:pt-0 lg:mt-0 lg:top-3.5 lg:bg-transparent lg:last:*:-translate-x-[--sticky-safe-right-offset]",{"-top-8 z-0 px-0":l.inline&&!de.value,"z-[15]":y.value,"data-[stuck=true]:z-30":!l.inline||de.value})),stuck:ue.value,"onUpdate:stuck":m[5]||(m[5]=P=>ue.value=P)},{default:r(()=>{var P,se;return[L("div",Ka,[l.showReorderButton&&l.entityList.canReorder&&!n.value?(i(),w(z,{key:0},[y.value?(i(),w(z,{key:0},[d(e(U),{class:"h-8",size:"sm",variant:"outline",onClick:m[0]||(m[0]=F=>v.value=null)},{default:r(()=>[T(k(e(D)("sharp::action_bar.list.reorder_button.cancel")),1)]),_:1}),d(e(U),{class:"h-8",size:"sm",onClick:te},{default:r(()=>[T(k(e(D)("sharp::action_bar.list.reorder_button.finish")),1)]),_:1})],64)):(i(),w("div",Va,[d(e(U),{class:"h-8",size:"sm",variant:"outline",onClick:m[1]||(m[1]=F=>v.value=[...l.entityList.data])},{default:r(()=>[T(k(e(D)("sharp::action_bar.list.reorder_button")),1)]),_:1})]))],64)):C("",!0),l.entityList.canSelect&&!y.value?(i(),w(z,{key:1},[n.value?(i(),h(e(U),{key:0,class:"h-8",size:"sm",variant:"outline",onClick:m[2]||(m[2]=F=>c.value=null)},{default:r(()=>[T(k(e(D)("sharp::action_bar.list.reorder_button.cancel")),1)]),_:1})):(i(),h(e(U),{key:1,class:"h-8",size:"sm",variant:"outline",onClick:m[3]||(m[3]=F=>c.value=Object.fromEntries(l.entityList.data.map(b=>[b.id,!1])))},{default:r(()=>[T(k(e(D)("sharp::action_bar.list.select_button")),1)]),_:1}))],64)):C("",!0),(P=l.entityList.dropdownEntityCommands(n.value))!=null&&P.flat().length&&!y.value?(i(),h(e(ve),{key:2},{default:r(()=>[d(e(he),{"as-child":""},{default:r(()=>[d(e(U),{class:"h-8",variant:n.value?"default":"outline",size:"sm",disabled:y.value},{default:r(()=>[T(k(e(D)("sharp::entity_list.commands.entity.label"))+" ",1),n.value?(i(),w(z,{key:0},[T(" ("+k(Object.values(c.value).filter(Boolean).length)+" selected) ",1)],64)):C("",!0),d(Bt)]),_:1},8,["variant","disabled"])]),_:1}),d(e(ye),{"collision-padding":20},{default:r(()=>[d(Ke,{commands:l.entityList.dropdownEntityCommands(n.value),selecting:n.value,onSelect:Y},null,8,["commands","selecting"])]),_:1})]),_:1})):C("",!0),l.entityList.primaryCommand&&!y.value&&!n.value?(i(),h(e(U),{key:3,class:"h-8",size:"sm",onClick:m[4]||(m[4]=F=>Y(l.entityList.primaryCommand))},{default:r(()=>[T(k(l.entityList.primaryCommand.label),1)]),_:1})):C("",!0),l.showCreateButton&&l.entityList.authorizations.create&&!y.value&&!n.value?(i(),w(z,{key:4},[(se=l.entityList.forms)!=null&&se.length?(i(),h(e(ve),{key:0},{default:r(()=>[d(e(he),{"as-child":""},{default:r(()=>[d(e(U),{class:"h-8 gap-1",size:"sm"},{default:r(()=>[d(e(ta),{class:"h-3.5 w-3.5"}),T(" "+k(e(D)("sharp::action_bar.list.forms_dropdown")),1)]),_:1})]),_:1}),d(e(ye),null,{default:r(()=>[(i(!0),w(z,null,ae(Object.values(l.entityList.forms).filter(F=>!!F.label),F=>(i(),h(e(qe),{"as-child":""},{default:r(()=>[d(e(Se),{href:e(x)("code16.sharp.form.create",{parentUri:e(pe)(),entityKey:`${l.entityKey}:${F.key}`})},{default:r(()=>[T(k(F.label),1)]),_:2},1032,["href"])]),_:2},1024))),256))]),_:1})]),_:1})):(i(),h(e(U),{key:1,as:e(Se),class:"h-8 gap-1",size:"sm",disabled:y.value||n.value,href:e(x)("code16.sharp.form.create",{parentUri:e(pe)(),entityKey:l.entityKey})},{default:r(()=>[T(k(a.entityList.config.createButtonLabel||e(D)("sharp::action_bar.list.create_button")),1)]),_:1},8,["as","disabled","href"]))],64)):C("",!0)])]}),_:1},8,["class","stuck"])):C("",!0)],64)):(i(),w("div",Oa)),L("div",{class:q(["container",[l.inline?"px-0":"px-4 lg:px-6"]])},[(j=l.entityList)!=null&&j.pageAlert?(i(),h(Rt,{key:0,class:"mb-3","page-alert":l.entityList.pageAlert},null,8,["page-alert"])):C("",!0)],2),d(Ot,{class:q(y.value?"relative z-[11]":"")},{default:r(()=>{var P,se;return[d(e(It),null,{default:r(()=>{var F,b;return[L("div",Xa,[L("div",Ya,[I(l.$slots,"card-header"),l.entityList?(i(),h(e(sa),{key:0,class:q(["text-xs ml-4 mr-2 lg:ml-6 whitespace-nowrap",[l.inline?"lg:mr-9":"lg:mr-5"]])},{default:r(()=>{var R;return[(R=l.entityList.query)!=null&&R.search?(i(),w(z,{key:0},[T(k(e(De)("sharp::action_bar.list.search.title",l.entityList.count,{count:l.entityList.count,search:l.entityList.query.search})),1)],64)):(i(),w(z,{key:1},[T(k(e(De)("sharp::action_bar.list.items_count",l.entityList.count,{count:l.entityList.count})),1)],64))]}),_:1},8,["class"])):C("",!0)]),l.entityList?(i(),w(z,{key:0},[l.showSearchField&&l.entityList.config.searchable?me((i(),w("div",Ma,[d(Me,{inline:"",expanded:p.value,"onUpdate:expanded":m[6]||(m[6]=R=>p.value=R),"entity-list":l.entityList,onSubmit:g},null,8,["expanded","entity-list"])],512)),[[be,!y.value&&!n.value&&!l.collapsed]]):C("",!0),(F=l.entityList.visibleFilters)!=null&&F.length?me((i(),w("div",ja,[L("div",Na,[d(e(At),null,{default:r(()=>[d(e(Sa),{"as-child":""},{default:r(()=>[d(e(U),{class:"h-8 gap-1",variant:"outline",size:"sm"},{default:r(()=>[d(e(ua),{class:"h-3.5 w-3.5"}),L("span",null,k(e(D)("sharp::filters.popover_button")),1)]),_:1})]),_:1}),d(e(Dt),{onOpenAutoFocus:m[8]||(m[8]=Ne(()=>{},["prevent"]))},{default:r(()=>[d(e(Ut),null,{default:r(()=>[d(e(Pt),null,{default:r(()=>[T(k(e(D)("sharp::filters.popover_button"))+" : "+k(l.title),1)]),_:1})]),_:1}),L("div",Wa,[l.showSearchField&&l.entityList.config.searchable?(i(),h(Me,{key:0,expanded:p.value,"onUpdate:expanded":m[7]||(m[7]=R=>p.value=R),"entity-list":l.entityList,onSubmit:g},null,8,["expanded","entity-list"])):C("",!0),(i(!0),w(z,null,ae(l.entityList.visibleFilters,R=>(i(),h(Ve,{key:R.key,filter:R,value:l.filters.currentValues[R.key],disabled:y.value,valuated:l.filters.isValuated([R]),onInput:O=>u(R,O)},null,8,["filter","value","disabled","valuated","onInput"]))),128))]),d(e(qt),{class:"flex-row gap-2 mt-2"},{default:r(()=>[d(e(Ue),{"as-child":""},{default:r(()=>{var R;return[d(e(U),{class:"flex-1",variant:"secondary",disabled:!l.filters.isValuated(l.entityList.visibleFilters)&&!((R=l.entityList.query)!=null&&R.search),onClick:S},{default:r(()=>[T(k(e(D)("sharp::filters.reset_all")),1)]),_:1},8,["disabled"])]}),_:1}),d(e(Ue),{"as-child":""},{default:r(()=>[d(e(U),{class:"flex-1"},{default:r(()=>[T(k(e(D)("sharp::action_bar.form.submit_button.update")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l.filters.isValuated(l.filters.rootFilters)?(i(),h(e(Pe),{key:0,class:"ml-2"},{default:r(()=>{var R;return[T(k(Object.values(((R=l.filters.filterValues)==null?void 0:R.valuated)??{}).filter(Boolean).length),1)]}),_:1})):C("",!0)]),L("div",{class:q(["hidden lg:flex flex-wrap gap-2",{"opacity-0 pointer-events-none":p.value}])},[(i(!0),w(z,null,ae(l.entityList.visibleFilters,R=>(i(),h(Ve,{key:R.key,filter:R,value:l.filters.currentValues[R.key],disabled:y.value,valuated:l.filters.isValuated([R]),inline:"",onInput:O=>u(R,O)},null,8,["filter","value","disabled","valuated","onInput"]))),128)),l.filters.isValuated(l.entityList.visibleFilters)||(b=l.entityList.query)!=null&&b.search?(i(),h(e(U),{key:0,class:"h-8 underline underline-offset-4 -ml-2",variant:"ghost",size:"sm",onClick:S},{default:r(()=>[T(k(e(D)("sharp::filters.reset_all")),1)]),_:1})):C("",!0)],2)],512)),[[be,!y.value&&!n.value&&!l.collapsed]]):C("",!0)],64)):C("",!0)])]}),_:3}),l.entityList?(i(),w(z,{key:0},[me(d(e(Ht),{class:q(l.entityList.count>0?"pb-2 !px-0":"")},{default:r(()=>{var F;return[((F=l.entityList.data)==null?void 0:F.length)>0?(i(),h(e(Ha),{key:0,class:"w-full",type:"auto","touch-type":"scroll"},{default:r(()=>[d(e(Ua),{"no-scroll":"",class:"w-max min-w-full max-w-[768px] md:max-w-[1024px] @5xl:w-full @5xl:max-w-none"},{default:r(()=>[d(e(qa),null,{default:r(()=>[d(e(Ye),{class:"hover:bg-transparent lg:first:*:pl-6 lg:last:*:pr-6"},{default:r(()=>[n.value?(i(),h(e(we),{key:0},{default:r(()=>m[9]||(m[9]=[L("span",{class:"sr-only"},"Select...",-1)])),_:1})):C("",!0),(i(!0),w(z,null,ae($e.value,(b,R)=>(i(),h(e(we),{key:b.key,class:"max-w-[70cqw] md:w-[var(--width,auto)]",style:re({"--width":b.width==="fill"?100/$e.value.length+"%":b.width})},{default:r(()=>[b.sortable?(i(),h(e(U),{key:0,variant:"ghost",size:"sm",class:"-ml-3 h-8 data-[state=open]:bg-accent",onClick:O=>E(b.key)},{default:r(()=>[L("span",null,k(b.label),1),l.entityList.currentSort===b.key?(i(),w(z,{key:0},[l.entityList.currentSortDir==="desc"?(i(),h(e(na),{key:0,class:"ml-2 h-3.5 w-3.5"})):l.entityList.currentSortDir==="asc"?(i(),h(e(ra),{key:1,class:"ml-2 h-3.5 w-3.5"})):C("",!0)],64)):(i(),h(e(Yt),{key:1,class:"ml-2 h-3.5 w-3.5"}))]),_:2},1032,["onClick"])):(i(),w(z,{key:1},[T(k(b.label),1)],64))]),_:2},1032,["style"]))),128)),!y.value&&!n.value&&l.entityList.data.some(b=>l.entityList.instanceHasActions(b,l.showEntityState))?(i(),h(e(we),{key:1,class:"w-2"},{default:r(()=>m[10]||(m[10]=[L("span",{class:"sr-only"},"Edit",-1)])),_:1})):C("",!0),y.value?(i(),h(e(we),{key:2},{default:r(()=>m[11]||(m[11]=[L("span",{class:"sr-only"},"Select...",-1)])),_:1})):C("",!0)]),_:1})]),_:1}),d(e(Pa),{class:"group",ref_key:"sortableTableBody",ref:_},{default:r(()=>[(i(!0),w(z,null,ae(v.value??l.entityList.data,(b,R)=>(i(),h(e(Ye),{key:l.entityList.instanceId(b),class:q(e(N)("relative bg-background hover:bg-background has-[[data-row-action]:hover]:bg-muted/50 has-[[aria-expanded=true]]:bg-muted/50 lg:first:*:pl-6 lg:last:*:pr-6",y.value?"cursor-move hover:bg-muted/50 group-[:has(.sortable-chosen)]:bg-background [&.sortable-chosen]:transition-none":"")),"data-instance-row":l.entityList.instanceId(b)},{default:r(()=>[n.value&&c.value?(i(),h(e(ce),{key:0},{default:r(()=>[d(e(Mt),{class:"block",id:`check-${l.entityKey}-${l.entityList.instanceId(b)}`,"model-value":c.value[l.entityList.instanceId(b)],"onUpdate:modelValue":O=>c.value[l.entityList.instanceId(b)]=O},null,8,["id","model-value","onUpdate:modelValue"]),L("label",{class:"absolute inset-0 z-20","data-row-action":"",for:`check-${l.entityKey}-${l.entityList.instanceId(b)}`},m[12]||(m[12]=[L("span",{class:"sr-only"},"Select",-1)]),8,xa)]),_:2},1024)):C("",!0),(i(!0),w(z,null,ae($e.value,(O,Z)=>(i(),w(z,{key:O.key},[O.key==="@state"&&l.entityList.config.state&&l.showEntityState?(i(),h(e(ce),{key:0,class:"max-w-[70cqw]"},{default:r(()=>[d(e(ve),null,{default:r(()=>[d(e(he),{"as-child":""},{default:r(()=>[d(e(U),{class:"relative disabled:opacity-100 -mx-3",variant:"ghost",size:"sm",disabled:!l.entityList.instanceCanUpdateState(b)},{default:r(()=>[d(e(Pe),{variant:"outline"},{default:r(()=>{var ee;return[d(ze,{class:"-ml-0.5 mr-1.5","state-value":l.entityList.instanceStateValue(b)},null,8,["state-value"]),T(" "+k((ee=l.entityList.instanceStateValue(b))==null?void 0:ee.label),1)]}),_:2},1024)]),_:2},1032,["disabled"])]),_:2},1024),d(e(ye),{align:"start","align-offset":-16},{default:r(()=>[(i(!0),w(z,null,ae(l.entityList.config.state.values,ee=>(i(),h(e(He),{key:ee.value,"model-value":ee.value==l.entityList.instanceState(b),"onUpdate:modelValue":tt=>tt&&$(ee.value,l.entityList.instanceId(b))},{default:r(()=>[d(ze,{class:"mr-1.5","state-value":ee},null,8,["state-value"]),L("span",Ga,k(ee.label),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)):(i(),h(e(ce),{key:1,class:"max-w-[70cqw]"},{default:r(()=>[Z===0&&l.entityList.instanceUrl(b)&&!n.value&&!y.value?(i(),h(e(Se),{key:0,class:"absolute inset-0","data-row-action":"",href:l.entityList.instanceUrl(b)},null,8,["href"])):C("",!0),O.html&&typeof b[O.key]=="string"?(i(),h(la,{key:1,class:q(["break-words [&_a]:relative [&_a]:z-10",{"[&_a]:pointer-events-none":n.value||y.value}]),html:b[O.key]},null,8,["class","html"])):(i(),w(z,{key:2},[T(k(b[O.key]),1)],64))]),_:2},1024))],64))),128)),y.value?(i(),h(e(ce),{key:1,class:"w-0 hidden lg:table-cell @5xl:pl-4"},{default:r(()=>[L("div",Ja,[d(e(jt),{class:"w-4 h-4 opacity-50"})])]),_:1})):C("",!0),!y.value&&!n.value&&l.entityList.instanceHasActions(b,l.showEntityState)?(i(),h(e(ce),{key:2,class:"sticky bg-background pl-1 -right-3 z-10 group-data-[scroll-arrived-right=true]/viewport:bg-transparent @5xl:pl-4 @5xl:bg-transparent"},{default:r(()=>[m[13]||(m[13]=L("div",{class:"absolute inset-0 -left-2 overflow-hidden","aria-hidden":"true"},null,-1)),m[14]||(m[14]=L("div",{class:"absolute inset-0 -left-4 overflow-hidden pointer-events-none","aria-hidden":"true"},[L("div",{class:"absolute inset-0 left-4 shadow-l-xl dark:border-l shadow-border transition-opacity group-data-[scroll-arrived-right=true]/viewport:opacity-0 @5xl:opacity-0","aria-hidden":"true"})],-1)),d(e(ve),null,{default:r(()=>[d(e(he),{"as-child":""},{default:r(()=>[d(e(U),{class:"[@media(hover:hover)]:pointer-events-auto relative",variant:"ghost",size:"icon"},{default:r(()=>[d(e(Nt),{class:"w-4 h-4"})]),_:1})]),_:1}),d(e(ye),{side:"bottom",align:"center"},{default:r(()=>{var O;return[l.entityList.config.state&&l.showEntityState&&l.entityList.instanceCanUpdateState(b)?(i(),w(z,{key:0},[d(e(Wt),null,{default:r(()=>[d(e(xt),null,{default:r(()=>[d(e(Gt),null,{default:r(()=>[T(k(e(D)("sharp::modals.entity_state.edit.title")),1)]),_:1}),d(e(Jt),null,{default:r(()=>[d(e(Qt),null,{default:r(()=>[(i(!0),w(z,null,ae(l.entityList.config.state.values,Z=>(i(),h(e(He),{key:Z.value,"model-value":Z.value==l.entityList.instanceState(b),"onUpdate:modelValue":ee=>ee&&$(Z.value,l.entityList.instanceId(b))},{default:r(()=>[d(ze,{class:"mr-1.5","state-value":Z},null,8,["state-value"]),L("span",Qa,k(Z.label),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),d(e(Fe))],64)):C("",!0),d(Ke,{commands:l.entityList.instanceCommands(b),onSelect:Z=>H(Z,l.entityList.instanceId(b))},null,8,["commands","onSelect"]),!l.entityList.config.deleteHidden&&l.entityList.instanceCanDelete(b)?(i(),w(z,{key:1},[(O=l.entityList.instanceCommands(b))!=null&&O.flat().length?(i(),h(e(Fe),{key:0})):C("",!0),d(e(qe),{class:"text-destructive",onClick:Z=>J(l.entityList.instanceId(b))},{default:r(()=>[T(k(e(D)("sharp::action_bar.form.delete_button")),1)]),_:2},1032,["onClick"])],64)):C("",!0)]}),_:2},1024)]),_:2},1024)]),_:2},1024)):C("",!0)]),_:2},1032,["class","data-instance-row"]))),128))]),_:1},512)]),_:1}),d(e(Ft),null,{default:r(({height:b})=>[d(e(Kt),{class:"absolute inset-0 pointer-events-none"},{default:r(({bottom:R})=>[d(e(Qe),{class:"z-20 [@media(hover:hover)]:bg-background pointer-events-auto will-change-transform",orientation:"horizontal",style:re({transform:`translate3d(0, ${Math.max(0,R-b)*-1}px, 0)`})},null,8,["style"])]),_:2},1024)]),_:1})]),_:1})):(i(),w(z,{key:1},[T(k(e(D)("sharp::entity_list.empty_text")),1)],64))]}),_:1},8,["class"]),[[be,!l.collapsed]]),(P=l.entityList.meta)!=null&&P.prev_page_url||(se=l.entityList.meta)!=null&&se.next_page_url?me((i(),h(e(Vt),{key:0,class:"px-4 pt-4 lg:px-6"},{default:r(()=>[d(Da,{"entity-list":l.entityList,"links-openable":!l.inline,onChange:K},null,8,["entity-list","links-openable"])]),_:1},512)),[[be,!l.collapsed]]):C("",!0)],64)):C("",!0)]}),_:3},8,["class"])],512)]}),_:3},8,["commands"]))}});class Ze{constructor(t,a,s,o){Object.assign(this,t),this.entityKey=a,this.hiddenFilters=s,this.hiddenCommands=o}get count(){var t;return((t=this.meta)==null?void 0:t.total)??this.data.length}get currentSort(){var t;return((t=this.query)==null?void 0:t.sort)??this.config.defaultSort}get currentSortDir(){var t;return((t=this.query)==null?void 0:t.dir)??this.config.defaultSortDir}get visibleFilters(){var t;return(t=this.config.filters)==null?void 0:t._root.filter(a=>{var s;return!((s=this.hiddenFilters)!=null&&s[a.key])})}get visibleCommands(){var t,a,s,o;return{instance:(a=(t=this.config.commands)==null?void 0:t.instance)==null?void 0:a.map(c=>c.filter(n=>{var u,p;return!((p=(u=this.hiddenCommands)==null?void 0:u.instance)!=null&&p.includes(n.key))})),entity:(o=(s=this.config.commands)==null?void 0:s.entity)==null?void 0:o.map(c=>c.filter(n=>{var u,p;return!((p=(u=this.hiddenCommands)==null?void 0:u.entity)!=null&&p.includes(n.key))}))}}get allowedEntityCommands(){var t;return((t=this.visibleCommands.entity)==null?void 0:t.map(a=>a.filter(s=>s.authorization)))??[]}get primaryCommand(){return this.allowedEntityCommands.flat().find(t=>t.primary)}get canSelect(){return this.allowedEntityCommands.flat().some(t=>t.instance_selection)}get canReorder(){return this.config.reorderable&&this.authorizations.reorder&&this.data.length>0}withRefreshedItems(t){return this.data=this.data.map(a=>t.find(s=>this.instanceId(s)===this.instanceId(a))??a),new Ze(this,this.entityKey)}dropdownEntityCommands(t){return this.allowedEntityCommands.map(a=>a.filter(s=>t?!!s.instance_selection:!s.primary))}instanceId(t){return t[this.config.instanceIdAttribute]}instanceUrl(t){const a=this.entityKey,s=this.instanceId(t);if(!this.authorizations.view.includes(s))return null;if(this.config.hasShowPage)return x("code16.sharp.show.show",{parentUri:pe(),entityKey:a,instanceId:s});if(this.forms){const o=Object.values(this.forms).find(c=>c.instances.includes(s));return x("code16.sharp.form.edit",{parentUri:pe(),entityKey:`${a}:${o.key}`,instanceId:s})}return x("code16.sharp.form.edit",{parentUri:pe(),entityKey:a,instanceId:s})}instanceState(t){return this.config.state?t[this.config.state.attribute]:null}instanceStateValue(t){var a;return(a=this.config.state)==null?void 0:a.values.find(s=>s.value===this.instanceState(t))}instanceCanUpdateState(t){return Array.isArray(this.config.state.authorization)?this.config.state.authorization.includes(this.instanceId(t)):!!this.config.state.authorization}instanceCanDelete(t){var a;return Array.isArray(this.authorizations.delete)?(a=this.authorizations.delete)==null?void 0:a.includes(this.instanceId(t)):!!this.authorizations.delete}instanceCommands(t){var a,s;return(s=(a=this.visibleCommands)==null?void 0:a.instance)==null?void 0:s.map(o=>o.filter(c=>Array.isArray(c.authorization)?c.authorization.includes(this.instanceId(t)):c.authorization))}instanceHasActions(t,a){var s;return((s=this.instanceCommands(t))==null?void 0:s.flat().length)>0||this.config.state&&a&&this.instanceCanUpdateState(t)||!this.config.deleteHidden&&this.instanceCanDelete(t)}}export{Ze as E,ll as _,ze as a};
