import{d as v,r as l,ak as g,az as L,aA as V,at as S,c as w,w as u,aB as k,o as q,a as o,u as n,Q as C,b as E,t as $,aM as c}from"./sharp-CbT4i-Zp.js";import{E as m,u as I,_ as B}from"./useEntityListHighlightedItem-CKvYbaBV.js";import{_ as F}from"./Title.vue_vue_type_script_setup_true_lang-CqxDBN8S.js";import{s as f}from"./DropdownChevronDown.vue_vue_type_script_setup_true_lang-BYFYYKyN.js";import{_ as K}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-CbSdCkXN.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-B5Q02Vyn.js";const H=v({__name:"EntityList",props:{entityList:{},breadcrumb:{}},setup(d){const r=d,s=l().params.entityKey,e=g(new m(r.entityList,s)),a=L(e.value.config.filters,e.value.filterValues),y=V("entityList",{refresh:(t,{formModal:i})=>{e.value=e.value.withRefreshedItems(t.items),i.shouldReopen&&i.reopen()}}),{highlightedEntityKey:Q,highlightedInstanceId:p}=I();S(()=>r.entityList,()=>{e.value=new m(r.entityList,s),a.update(r.entityList.config.filters,r.entityList.filterValues)});function h(t){f(e.value.query)!==f(t)&&c.visit(l("code16.sharp.list",{entityKey:s})+f(t),{preserveState:!0,preserveScroll:!1})}function b(t,i){c.post(l("code16.sharp.list.filters.store",{entityKey:s}),{filterValues:a.nextValues(t,i),query:e.value.query},{preserveState:!0,preserveScroll:!1})}function _(){c.post(l("code16.sharp.list.filters.store",{entityKey:s}),{filterValues:a.defaultValues(a.rootFilters),query:{...e.value.query,search:null}},{preserveState:!0,preserveScroll:!1})}return(t,i)=>(q(),w(k,null,{breadcrumb:u(()=>[o(K,{breadcrumb:t.breadcrumb},null,8,["breadcrumb"])]),default:u(()=>[o(F,{breadcrumb:t.breadcrumb},null,8,["breadcrumb"]),o(B,{"entity-key":n(s),"entity-list":e.value,filters:n(a),commands:n(y),title:t.breadcrumb.items[0].label,"highlighted-instance-id":n(p),onReset:_,onFilterChange:b,"onUpdate:query":h},{"card-header":u(()=>[o(n(C),null,{default:u(()=>[E($(e.value.title),1)]),_:1})]),_:1},8,["entity-key","entity-list","filters","commands","title","highlighted-instance-id"])]),_:1}))}});export{H as default};
