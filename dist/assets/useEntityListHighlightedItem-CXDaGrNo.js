import{bd as Ce,d as T,ak as I,as as Be,be as pt,bf as Z,o as c,c as y,w as r,q as D,u as e,aN as le,P as re,x as De,bg as ht,ap as ie,A as w,j as E,a as f,v as Y,b as R,F as P,bh as vt,bi as $e,bj as oe,y as K,bk as et,bl as qe,bm as mt,bn as Oe,at as G,i as L,bo as yt,k as O,bp as bt,t as _,_ as B,D as gt,G as wt,H as ae,B as _t,bq as kt,V as U,I as St,z as J,br as Lt,bs as Ct,m as $t,bt as Et,bu as zt,n as tt,bv as It,bw as Rt,bx as At,by as Pt,aQ as at,bz as Tt,au as Bt,bA as Dt,bB as pe,bC as qt,bD as Ve,bE as nt,bF as Ut,bG as Ft,bH as Ht,bI as Ot,bJ as Vt,aX as Kt,aJ as me,aK as ye,b3 as be,b2 as ge,aL as we,r as X,aR as he,aC as Wt,R as Mt,bK as Ke,b7 as _e,bb as ke,aD as Xt,aE as Yt,aF as jt,aG as Nt,aH as xt,aI as We,Y as Me,S as Gt,T as Jt,b4 as Qt,aM as Zt,aU as Re,aV as ea,K as ta,b6 as Xe,Z as aa,X as na,bL as sa,bM as la,aZ as ra,a_ as oa,a$ as ia,b0 as ua,b1 as ca,bc as da,b5 as fa,bN as pa,bO as Ye}from"./sharp-CVs8CQK9.js";import{u as ha,a as je,b as Ne,_ as va,F as ma,c as ya,d as xe}from"./DropdownChevronDown.vue_vue_type_script_setup_true_lang-B66lu-av.js";import{_ as ba}from"./CardDescription.vue_vue_type_script_setup_true_lang-DDWzFIgG.js";/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=Ce("ArrowDownIcon",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=Ce("ArrowUpIcon",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=Ce("ChevronsLeftIcon",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=Ce("ChevronsRightIcon",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),[ee,Sa]=De("ScrollAreaRoot"),La=T({__name:"ScrollAreaRoot",props:{type:{default:"hover"},dir:{},scrollHideDelay:{default:600},asChild:{type:Boolean},as:{}},setup(u,{expose:t}){const a=u,s=I(0),i=I(0),d=I(),l=I(),o=I(),p=I(),h=I(!1),k=I(!1),{type:q,dir:C,scrollHideDelay:S}=Be(a),F=pt(C);function M(){var g;(g=d.value)==null||g.scrollTo({top:0})}function j(){var g;(g=d.value)==null||g.scrollTo({top:0,left:0})}t({viewport:d,scrollTop:M,scrollTopLeft:j});const{forwardRef:m,currentElement:A}=Z();return Sa({type:q,dir:F,scrollHideDelay:S,scrollArea:A,viewport:d,onViewportChange:g=>{d.value=g||void 0},content:l,onContentChange:g=>{l.value=g},scrollbarX:o,scrollbarXEnabled:h,scrollbarY:p,scrollbarYEnabled:k,onScrollbarXChange:g=>{o.value=g||void 0},onScrollbarYChange:g=>{p.value=g||void 0},onScrollbarXEnabledChange:g=>{h.value=g},onScrollbarYEnabledChange:g=>{k.value=g},onCornerWidthChange:g=>{s.value=g},onCornerHeightChange:g=>{i.value=g}}),(g,$)=>(c(),y(e(re),{ref:e(m),"as-child":a.asChild,as:g.as,dir:e(F),style:le({position:"relative","--reka-scroll-area-corner-width":`${s.value}px`,"--reka-scroll-area-corner-height":`${i.value}px`})},{default:r(()=>[D(g.$slots,"default")]),_:3},8,["as-child","as","dir","style"]))}}),Ca=T({inheritAttrs:!1,__name:"ScrollAreaViewport",props:{nonce:{},asChild:{type:Boolean},as:{}},setup(u,{expose:t}){const a=u,{nonce:s}=Be(a),i=ht(s),d=ee(),l=I();ie(()=>{d.onViewportChange(l.value),d.onContentChange(p.value)}),t({viewportElement:l});const{forwardRef:o,currentElement:p}=Z();return(h,k)=>(c(),w(P,null,[E("div",Y({ref_key:"viewportElement",ref:l,"data-reka-scroll-area-viewport":"",style:{overflowX:e(d).scrollbarXEnabled.value?"scroll":"hidden",overflowY:e(d).scrollbarYEnabled.value?"scroll":"hidden"}},h.$attrs,{tabindex:0}),[f(e(re),{ref:e(o),style:le({minWidth:e(d).scrollbarXEnabled.value?"fit-content":void 0}),"as-child":a.asChild,as:h.as},{default:r(()=>[D(h.$slots,"default")]),_:3},8,["style","as-child","as"])],16),f(e(re),{as:"style",nonce:e(i)},{default:r(()=>k[0]||(k[0]=[R(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-reka-scroll-area-viewport] { scrollbar-width:none; -ms-overflow-style:none; -webkit-overflow-scrolling:touch; } [data-reka-scroll-area-viewport]::-webkit-scrollbar { display:none; } ")])),_:1},8,["nonce"])],64))}});function st(u,t){return a=>{if(u[0]===u[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(u[1]-u[0]);return t[0]+s*(a-u[0])}}function Ee(u){const t=lt(u.viewport,u.content),a=u.scrollbar.paddingStart+u.scrollbar.paddingEnd,s=(u.scrollbar.size-a)*t;return Math.max(s,18)}function lt(u,t){const a=u/t;return Number.isNaN(a)?0:a}function $a(u,t=()=>{}){let a={left:u.scrollLeft,top:u.scrollTop},s=0;return function i(){const d={left:u.scrollLeft,top:u.scrollTop},l=a.left!==d.left,o=a.top!==d.top;(l||o)&&t(),a=d,s=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(s)}function Ge(u,t,a="ltr"){const s=Ee(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,d=t.scrollbar.size-i,l=t.content-t.viewport,o=d-s,p=a==="ltr"?[0,l]:[l*-1,0],h=vt(u,p[0],p[1]);return st([0,l],[0,o])(h)}function Se(u){return u?Number.parseInt(u,10):0}function Ea(u,t,a,s="ltr"){const i=Ee(a),d=i/2,l=t||d,o=i-l,p=a.scrollbar.paddingStart+l,h=a.scrollbar.size-a.scrollbar.paddingEnd-o,k=a.content-a.viewport,q=s==="ltr"?[0,k]:[k*-1,0];return st([p,h],q)(u)}function Je(u,t){return u>0&&u<t}const rt=T({__name:"ScrollAreaScrollbarImpl",props:{isHorizontal:{type:Boolean}},emits:["onDragScroll","onWheelScroll","onThumbPointerDown"],setup(u,{emit:t}){const a=u,s=t,i=ee(),d=ze(),l=Ie(),{forwardRef:o,currentElement:p}=Z(),h=I(""),k=I();function q(m){var A,g;if(k.value){const $=m.clientX-((A=k.value)==null?void 0:A.left),Q=m.clientY-((g=k.value)==null?void 0:g.top);s("onDragScroll",{x:$,y:Q})}}function C(m){m.button===0&&(m.target.setPointerCapture(m.pointerId),k.value=p.value.getBoundingClientRect(),h.value=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",i.viewport&&(i.viewport.value.style.scrollBehavior="auto"),q(m))}function S(m){q(m)}function F(m){const A=m.target;A.hasPointerCapture(m.pointerId)&&A.releasePointerCapture(m.pointerId),document.body.style.webkitUserSelect=h.value,i.viewport&&(i.viewport.value.style.scrollBehavior=""),k.value=void 0}function M(m){var Q;const A=m.target,g=(Q=p.value)==null?void 0:Q.contains(A),$=d.sizes.value.content-d.sizes.value.viewport;g&&d.handleWheelScroll(m,$)}ie(()=>{document.addEventListener("wheel",M,{passive:!1})}),$e(()=>{document.removeEventListener("wheel",M)});function j(){var m,A,g,$,Q;p.value&&(a.isHorizontal?d.handleSizeChange({content:((m=i.viewport.value)==null?void 0:m.scrollWidth)??0,viewport:((A=i.viewport.value)==null?void 0:A.offsetWidth)??0,scrollbar:{size:p.value.clientWidth??0,paddingStart:Se(getComputedStyle(p.value).paddingLeft),paddingEnd:Se(getComputedStyle(p.value).paddingRight)}}):d.handleSizeChange({content:((g=i.viewport.value)==null?void 0:g.scrollHeight)??0,viewport:(($=i.viewport.value)==null?void 0:$.offsetHeight)??0,scrollbar:{size:((Q=p.value)==null?void 0:Q.clientHeight)??0,paddingStart:Se(getComputedStyle(p.value).paddingLeft),paddingEnd:Se(getComputedStyle(p.value).paddingRight)}}))}return oe(p,j),oe(i.content,j),(m,A)=>(c(),y(e(re),{ref:e(o),style:{position:"absolute"},"data-scrollbarimpl":"",as:e(l).as.value,"as-child":e(l).asChild.value,onPointerdown:C,onPointermove:S,onPointerup:F},{default:r(()=>[D(m.$slots,"default")]),_:3},8,["as","as-child"]))}}),za=T({__name:"ScrollAreaScrollbarX",setup(u){const t=ee(),a=ze(),{forwardRef:s,currentElement:i}=Z();ie(()=>{i.value&&t.onScrollbarXChange(i.value)});const d=K(()=>a.sizes.value);return(l,o)=>(c(),y(rt,{ref:e(s),"is-horizontal":!0,"data-orientation":"horizontal",style:le({bottom:0,left:e(t).dir.value==="rtl"?"var(--reka-scroll-area-corner-width)":0,right:e(t).dir.value==="ltr"?"var(--reka-scroll-area-corner-width)":0,"--reka-scroll-area-thumb-width":d.value?`${e(Ee)(d.value)}px`:void 0}),onOnDragScroll:o[0]||(o[0]=p=>e(a).onDragScroll(p.x))},{default:r(()=>[D(l.$slots,"default")]),_:3},8,["style"]))}}),Ia=T({__name:"ScrollAreaScrollbarY",setup(u){const t=ee(),a=ze(),{forwardRef:s,currentElement:i}=Z();ie(()=>{i.value&&t.onScrollbarYChange(i.value)});const d=K(()=>a.sizes.value);return(l,o)=>(c(),y(rt,{ref:e(s),"is-horizontal":!1,"data-orientation":"vertical",style:le({top:0,right:e(t).dir.value==="ltr"?0:void 0,left:e(t).dir.value==="rtl"?0:void 0,bottom:"var(--reka-scroll-area-corner-height)","--reka-scroll-area-thumb-height":d.value?`${e(Ee)(d.value)}px`:void 0}),onOnDragScroll:o[0]||(o[0]=p=>e(a).onDragScroll(p.y))},{default:r(()=>[D(l.$slots,"default")]),_:3},8,["style"]))}}),[ze,Ra]=De("ScrollAreaScrollbarVisible"),Ue=T({__name:"ScrollAreaScrollbarVisible",setup(u){const t=ee(),a=Ie(),{forwardRef:s}=Z(),i=I({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=K(()=>{const m=lt(i.value.viewport,i.value.content);return m>0&&m<1}),l=I(),o=I(0);function p(m,A){if(S.value){const g=t.viewport.value.scrollLeft+m.deltaY;t.viewport.value.scrollLeft=g,Je(g,A)&&m.preventDefault()}else{const g=t.viewport.value.scrollTop+m.deltaY;t.viewport.value.scrollTop=g,Je(g,A)&&m.preventDefault()}}function h(m,A){S.value?o.value=A.x:o.value=A.y}function k(m){o.value=0}function q(m){i.value=m}function C(m,A){return Ea(m,o.value,i.value,A)}const S=K(()=>a.isHorizontal.value);function F(m){S.value?t.viewport.value.scrollLeft=C(m,t.dir.value):t.viewport.value.scrollTop=C(m)}function M(){if(S.value){if(t.viewport.value&&l.value){const m=t.viewport.value.scrollLeft,A=Ge(m,i.value,t.dir.value);l.value.style.transform=`translate3d(${A}px, 0, 0)`}}else if(t.viewport.value&&l.value){const m=t.viewport.value.scrollTop,A=Ge(m,i.value);l.value.style.transform=`translate3d(0, ${A}px, 0)`}}function j(m){l.value=m}return Ra({sizes:i,hasThumb:d,handleWheelScroll:p,handleThumbDown:h,handleThumbUp:k,handleSizeChange:q,onThumbPositionChange:M,onThumbChange:j,onDragScroll:F}),(m,A)=>S.value?(c(),y(za,Y({key:0},m.$attrs,{ref:e(s)}),{default:r(()=>[D(m.$slots,"default")]),_:3},16)):(c(),y(Ia,Y({key:1},m.$attrs,{ref:e(s)}),{default:r(()=>[D(m.$slots,"default")]),_:3},16))}}),ot=T({__name:"ScrollAreaScrollbarAuto",props:{forceMount:{type:Boolean}},setup(u){const t=ee(),a=Ie(),{forwardRef:s}=Z(),i=I(!1),d=et(()=>{if(t.viewport.value){const l=t.viewport.value.offsetWidth<t.viewport.value.scrollWidth,o=t.viewport.value.offsetHeight<t.viewport.value.scrollHeight;i.value=a.isHorizontal.value?l:o}},10);return ie(()=>d()),oe(t.viewport,d),oe(t.content,d),(l,o)=>(c(),y(e(qe),{present:l.forceMount||i.value},{default:r(()=>[f(Ue,Y(l.$attrs,{ref:e(s),"data-state":i.value?"visible":"hidden"}),{default:r(()=>[D(l.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),Aa=T({inheritAttrs:!1,__name:"ScrollAreaScrollbarHover",props:{forceMount:{type:Boolean}},setup(u){const t=ee(),{forwardRef:a}=Z();let s;const i=I(!1);function d(){window.clearTimeout(s),i.value=!0}function l(){s=window.setTimeout(()=>{i.value=!1},t.scrollHideDelay.value)}return ie(()=>{const o=t.scrollArea.value;o&&(o.addEventListener("pointerenter",d),o.addEventListener("pointerleave",l))}),$e(()=>{const o=t.scrollArea.value;o&&(window.clearTimeout(s),o.removeEventListener("pointerenter",d),o.removeEventListener("pointerleave",l))}),(o,p)=>(c(),y(e(qe),{present:o.forceMount||i.value},{default:r(()=>[f(ot,Y(o.$attrs,{ref:e(a),"data-state":i.value?"visible":"hidden"}),{default:r(()=>[D(o.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),Pa=T({__name:"ScrollAreaScrollbarScroll",props:{forceMount:{type:Boolean}},setup(u){const t=ee(),a=Ie(),{forwardRef:s}=Z(),{state:i,dispatch:d}=mt("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});Oe(o=>{if(i.value==="idle"){const p=window.setTimeout(()=>d("HIDE"),t.scrollHideDelay.value);o(()=>{window.clearTimeout(p)})}});const l=et(()=>d("SCROLL_END"),100);return Oe(o=>{const p=t.viewport.value,h=a.isHorizontal.value?"scrollLeft":"scrollTop";if(p){let k=p[h];const q=()=>{const C=p[h];k!==C&&(d("SCROLL"),l()),k=C};p.addEventListener("scroll",q),o(()=>{p.removeEventListener("scroll",q)})}}),(o,p)=>(c(),y(e(qe),{present:o.forceMount||e(i)!=="hidden"},{default:r(()=>[f(Ue,Y(o.$attrs,{ref:e(s)}),{default:r(()=>[D(o.$slots,"default")]),_:3},16)]),_:3},8,["present"]))}}),[Ie,Ta]=De("ScrollAreaScrollbar"),Ba=T({inheritAttrs:!1,__name:"ScrollAreaScrollbar",props:{orientation:{default:"vertical"},forceMount:{type:Boolean},asChild:{type:Boolean},as:{default:"div"}},setup(u){const t=u,{forwardRef:a}=Z(),s=ee(),i=K(()=>t.orientation==="horizontal");G(i,()=>{i.value?s.onScrollbarXEnabledChange(!0):s.onScrollbarYEnabledChange(!0)},{immediate:!0}),$e(()=>{s.onScrollbarXEnabledChange(!1),s.onScrollbarYEnabledChange(!1)});const{orientation:d,forceMount:l,asChild:o,as:p}=Be(t);return Ta({orientation:d,forceMount:l,isHorizontal:i,as:p,asChild:o}),(h,k)=>e(s).type.value==="hover"?(c(),y(Aa,Y({key:0},h.$attrs,{ref:e(a),"force-mount":e(l)}),{default:r(()=>[D(h.$slots,"default")]),_:3},16,["force-mount"])):e(s).type.value==="scroll"?(c(),y(Pa,Y({key:1},h.$attrs,{ref:e(a),"force-mount":e(l)}),{default:r(()=>[D(h.$slots,"default")]),_:3},16,["force-mount"])):e(s).type.value==="auto"?(c(),y(ot,Y({key:2},h.$attrs,{ref:e(a),"force-mount":e(l)}),{default:r(()=>[D(h.$slots,"default")]),_:3},16,["force-mount"])):e(s).type.value==="always"?(c(),y(Ue,Y({key:3},h.$attrs,{ref:e(a),"data-state":"visible"}),{default:r(()=>[D(h.$slots,"default")]),_:3},16)):L("",!0)}}),Da=T({__name:"ScrollAreaThumb",props:{asChild:{type:Boolean},as:{}},setup(u){const t=u,a=ee(),s=ze();function i(C){const F=C.target.getBoundingClientRect(),M=C.clientX-F.left,j=C.clientY-F.top;s.handleThumbDown(C,{x:M,y:j})}function d(C){s.handleThumbUp(C)}const{forwardRef:l,currentElement:o}=Z(),p=I(),h=K(()=>a.viewport.value);function k(){if(!p.value){const C=$a(h.value,s.onThumbPositionChange);p.value=C,s.onThumbPositionChange()}}const q=K(()=>s.sizes.value);return yt(q,()=>{s.onThumbChange(o.value),h.value&&(s.onThumbPositionChange(),h.value.addEventListener("scroll",k))}),$e(()=>{var C;h.value.removeEventListener("scroll",k),(C=a.viewport.value)==null||C.removeEventListener("scroll",k)}),(C,S)=>(c(),y(e(re),{ref:e(l),"data-state":e(s).hasThumb?"visible":"hidden",style:{width:"var(--reka-scroll-area-thumb-width)",height:"var(--reka-scroll-area-thumb-height)"},"as-child":t.asChild,as:C.as,onPointerdown:i,onPointerup:d},{default:r(()=>[D(C.$slots,"default")]),_:3},8,["data-state","as-child","as"]))}}),qa=T({__name:"ScrollAreaCornerImpl",setup(u){const t=ee(),a=I(0),s=I(0),i=K(()=>!!a.value&&!!s.value);function d(){var p;const o=((p=t.scrollbarX.value)==null?void 0:p.offsetHeight)||0;t.onCornerHeightChange(o),s.value=o}function l(){var p;const o=((p=t.scrollbarY.value)==null?void 0:p.offsetWidth)||0;t.onCornerWidthChange(o),a.value=o}return oe(t.scrollbarX.value,d),oe(t.scrollbarY.value,l),G(()=>t.scrollbarX.value,d),G(()=>t.scrollbarY.value,l),(o,p)=>{var h;return i.value?(c(),y(e(re),Y({key:0,style:{width:`${a.value}px`,height:`${s.value}px`,position:"absolute",right:e(t).dir.value==="ltr"?0:void 0,left:e(t).dir.value==="rtl"?0:void 0,bottom:0}},(h=o.$parent)==null?void 0:h.$props),{default:r(()=>[D(o.$slots,"default")]),_:3},16,["style"])):L("",!0)}}}),Ua=T({__name:"ScrollAreaCorner",props:{asChild:{type:Boolean},as:{}},setup(u){const t=u,{forwardRef:a}=Z(),s=ee(),i=K(()=>!!s.scrollbarX.value&&!!s.scrollbarY.value),d=K(()=>s.type.value!=="scroll"&&i.value);return(l,o)=>d.value?(c(),y(qa,Y({key:0},t,{ref:e(a)}),{default:r(()=>[D(l.$slots,"default")]),_:3},16)):L("",!0)}}),Fa={class:"flex justify-center w-full gap-x-6 lg:gap-x-8","aria-label":"Pagination"},Ha={class:"flex gap-2"},Oa={class:"sr-only"},Va={class:"flex min-w-[100px] gap-2 items-center justify-center text-sm font-medium"},Ka=["href"],Wa={class:"flex gap-2"},Ma={class:"sr-only"},Xa=T({__name:"EntityListPagination",props:{entityList:{},linksOpenable:{type:Boolean}},emits:["change"],setup(u,{emit:t}){const a=u,s=t;function i(l,o=!1){if(a.linksOpenable&&(l.metaKey||l.ctrlKey||l.shiftKey||l.altKey)){l.stopPropagation();return}const p=l.target.closest("a").href;p&&!o&&(s("change",new URL(p).searchParams.get("page")),l.preventDefault())}function d(l){const o=new URL(a.entityList.meta.first_page_url);return o.searchParams.set("page",String(l)),o.toString()}return(l,o)=>(c(),w("nav",Fa,[E("div",Ha,[f(e(O),{as:l.entityList.meta.prev_page_url?"a":"button",class:"hidden sm:flex",size:"icon",variant:"outline",href:l.entityList.meta.first_page_url,disabled:!l.entityList.meta.prev_page_url,onClick:i},{default:r(()=>[f(e(_a),{class:"h-4 w-4"})]),_:1},8,["as","href","disabled"]),f(e(O),{as:l.entityList.meta.prev_page_url?"a":"button",size:"icon",variant:"outline",href:l.entityList.meta.prev_page_url,disabled:!l.entityList.meta.prev_page_url,onClick:i},{default:r(()=>[f(e(bt),{class:"h-4 w-4"}),E("span",Oa,_(e(B)("sharp::entity_list.pagination.previous")),1)]),_:1},8,["as","href","disabled"])]),E("div",Va,[l.entityList.meta.last_page?(c(),w(P,{key:0},[E("span",null,_(e(B)("sharp::entity_list.pagination.current").split(":current_page")[0]),1),f(e(_t),{"model-value":String(l.entityList.meta.current_page),"onUpdate:modelValue":o[1]||(o[1]=p=>l.$emit("change",p))},{default:r(()=>[f(e(gt),{class:"w-10 justify-center [&_svg]:hidden"},{default:r(()=>[R(_(l.entityList.meta.current_page),1)]),_:1}),f(e(wt),{"align-offset":-22},{default:r(()=>[(c(!0),w(P,null,ae(l.entityList.meta.last_page,p=>(c(),y(e(St),{value:String(p)},{default:r(()=>[l.linksOpenable?(c(),w("a",{key:0,class:"absolute inset-0",href:d(p),onPointerup:o[0]||(o[0]=h=>i(h,!0))},null,40,Ka)):L("",!0),R(" "+_(p),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1},8,["model-value"]),E("span",null,_(e(B)("sharp::entity_list.pagination.current",{last_page:l.entityList.meta.last_page}).split(":current_page")[1]),1)],64)):(c(),w(P,{key:1},[R(_(e(B)("sharp::entity_list.pagination.current_simple").replace(":current_page",l.entityList.meta.current_page+"")),1)],64))]),E("div",Wa,[f(e(O),{as:l.entityList.meta.next_page_url?"a":"button",size:"icon",variant:"outline",href:l.entityList.meta.next_page_url,disabled:!l.entityList.meta.next_page_url,onClick:i},{default:r(()=>[E("span",Ma,_(e(B)("sharp::entity_list.pagination.next")),1),f(e(kt),{class:"h-4 w-4"})]),_:1},8,["as","href","disabled"]),f(e(O),{as:l.entityList.meta.next_page_url?"a":"button",class:U(["hidden sm:flex",l.entityList.meta.last_page_url?"":"invisible"]),size:"icon",variant:"outline",href:l.entityList.meta.last_page_url,disabled:!l.entityList.meta.next_page_url,onClick:i},{default:r(()=>[f(e(ka),{class:"h-4 w-4"})]),_:1},8,["as","class","href","disabled"])])]))}}),Ae=T({__name:"StateIcon",props:{stateValue:{}},setup(u){return(t,a)=>{var s;return c(),w("div",{class:"relative rounded-full",style:le({"--color":((s=t.stateValue)==null?void 0:s.color)??"black"})},a[0]||(a[0]=[E("div",{class:"h-1.5 w-1.5 rounded-full bg-[var(--color)]"},null,-1)]),4)}}}),Ya=T({__name:"Table",props:{class:{},noScroll:{type:Boolean}},setup(u){const t=u;return(a,s)=>(c(),w("div",{class:U(["relative",{"w-full overflow-auto":!a.noScroll}])},[E("table",{class:U(e(J)("w-full caption-bottom text-sm",t.class))},[D(a.$slots,"default")],2)],2))}}),ja=T({__name:"TableBody",props:{class:{}},setup(u){const t=u;return(a,s)=>(c(),w("tbody",{class:U(e(J)("[&_tr:last-child]:border-0",t.class))},[D(a.$slots,"default")],2))}}),fe=T({__name:"TableCell",props:{class:{}},setup(u){const t=u;return(a,s)=>(c(),w("td",{class:U(e(J)("px-3 py-4 align-middle [&:has([role=checkbox])]:pr-0 first:pl-4 last:pr-4",t.class))},[D(a.$slots,"default")],2))}}),Le=T({__name:"TableHead",props:{class:{}},setup(u){const t=u;return(a,s)=>(c(),w("th",{class:U(e(J)("h-12 px-3 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t.class))},[D(a.$slots,"default")],2))}}),Na=T({__name:"TableHeader",props:{class:{}},setup(u){const t=u;return(a,s)=>(c(),w("thead",{class:U(e(J)("[&_tr]:border-b",t.class))},[D(a.$slots,"default")],2))}}),Qe=T({__name:"TableRow",props:{class:{}},setup(u){const t=u;return(a,s)=>(c(),w("tr",{class:U(e(J)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t.class))},[D(a.$slots,"default")],2))}}),Ze=T({__name:"EntityListSearch",props:{entityList:{},expanded:{type:Boolean},inline:{type:Boolean}},emits:["submit","update:expanded"],setup(u,{emit:t}){var C;const a=u,s=t,i=I(),d=I(),{focused:l}=Lt(i),{pressed:o}=Ct({target:i}),p=I(((C=a.entityList.query)==null?void 0:C.search)??"");let h="";G(l,()=>{var S,F;l.value?(h&&(p.value=h,h=""),o.value?G(o,()=>{o.value||s("update:expanded",!0)},{once:!0}):s("update:expanded",!0)):o.value||(h=(S=a.entityList.query)!=null&&S.search?"":p.value,p.value=(F=a.entityList.query)==null?void 0:F.search,s("update:expanded",!1))}),G(()=>a.entityList,()=>{var S;p.value=((S=a.entityList.query)==null?void 0:S.search)??"",s("update:expanded",!1)});function k(){s("update:expanded",!1),s("submit",p.value)}function q(){a.expanded||s("update:expanded",!0)}return(S,F)=>{var M,j;return c(),w("form",{onSubmit:tt(k,["prevent"]),ref_key:"el",ref:i},[E("div",{class:U(["relative z-[1]",[S.inline?"h-8 w-[150px] @5xl/root-card:w-[200px]":""]])},[E("div",{class:U(["top-0 left-0 group flex gap-3",e(J)(S.inline?"absolute h-8":"flex-col",S.inline&&S.expanded?"-mr-[100px]":"")])},[E("div",{class:U(["relative",[S.inline?"":"w-full"]])},[f(e($t),{placeholder:e(B)("sharp::action_bar.list.search.placeholder"),modelValue:p.value,"onUpdate:modelValue":F[0]||(F[0]=m=>p.value=m),class:U(e(J)("w-full pl-8 h-9",{"h-8 w-[150px] @5xl/root-card:w-[200px]":S.inline,"sm:!w-[300px]":S.inline&&S.expanded,"pr-8":(M=a.entityList.query)==null?void 0:M.search})),type:"search",ref_key:"input",ref:d,onInput:q},null,8,["placeholder","modelValue","class"]),f(e(Et),{class:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"}),(j=a.entityList.query)!=null&&j.search?(c(),y(e(O),{key:0,type:"button",class:"absolute right-0 top-0 h-full",size:"sm",variant:"ghost",onClick:F[1]||(F[1]=m=>S.$emit("submit",null))},{default:r(()=>[f(e(zt),{class:"h-4 w-4 text-muted-foreground"})]),_:1})):L("",!0)],2),f(e(O),{type:"submit",class:U(e(J)("h-8 hidden",S.expanded?"inline-flex":"")),size:"sm"},{default:r(()=>[R(_(e(B)("sharp::action_bar.list.search.button")),1)]),_:1},8,["class"])],2)],2)],544)}}}),it=T({__name:"ScrollBar",props:{orientation:{default:"vertical"},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(u){const t=u,a=K(()=>{const{class:s,...i}=t;return i});return(s,i)=>(c(),y(e(Ba),Y(a.value,{class:e(J)("flex touch-none select-none transition-colors",s.orientation==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-px",s.orientation==="horizontal"&&"h-4 flex-col border-t border-t-transparent p-1",t.class)}),{default:r(()=>[f(e(Da),{class:"relative flex-1 rounded-full bg-muted-foreground/50 hover:bg-muted-foreground"},{default:r(()=>i[0]||(i[0]=[E("div",{class:"absolute -inset-1.5 -top-4"},null,-1)])),_:1})]),_:1},16,["class"]))}}),xa=T({__name:"ScrollArea",props:{type:{},dir:{},scrollHideDelay:{},asChild:{type:Boolean},as:{},class:{},touchType:{}},setup(u){const t=u,a=K(()=>{const{class:o,...p}=t;return p}),s=It("(hover: none)"),i=I(),{arrivedState:d,measure:l}=Rt(()=>{var o;return(o=i.value)==null?void 0:o.viewportElement});return G(Pt(()=>{var o;return(o=i.value)==null?void 0:o.viewportElement}).width,At(()=>{l()},50,!0,!0)),(o,p)=>(c(),y(e(La),Y(a.value,{type:e(s)?t.touchType:t.type,class:e(J)("group/scroll-area relative overflow-hidden",t.class),"data-scroll-arrived-right":e(d).right?!0:null,"data-scrollbar-x-visible":!e(d).left||!e(d).right?!0:null}),{default:r(()=>[f(e(Ca),{class:"h-full w-full rounded-[inherit]",ref_key:"viewport",ref:i},{default:r(()=>[D(o.$slots,"default")]),_:3},512),D(o.$slots,"scrollbar",{},()=>[f(it),f(e(Ua))])]),_:3},16,["type","class","data-scroll-arrived-right","data-scrollbar-x-visible"]))}}),Ga=Ht?window:void 0;function Ja(u){var t;const a=pe(u);return(t=a==null?void 0:a.$el)!=null?t:a}function Qa(...u){let t,a,s,i;if(typeof u[0]=="string"||Array.isArray(u[0])?([a,s,i]=u,t=Ga):[t,a,s,i]=u,!t)return Ut;Array.isArray(a)||(a=[a]),Array.isArray(s)||(s=[s]);const d=[],l=()=>{d.forEach(k=>k()),d.length=0},o=(k,q,C,S)=>(k.addEventListener(q,C,S),()=>k.removeEventListener(q,C,S)),p=G(()=>[Ja(t),pe(i)],([k,q])=>{if(l(),!k)return;const C=Ft(q)?{...q}:q;d.push(...a.flatMap(S=>s.map(F=>o(k,S,F,C))))},{immediate:!0,flush:"post"}),h=()=>{p(),l()};return nt(h),h}const Za=T({name:"UseElementBounding",props:["box","as"],setup(u,{slots:t}){const a=I(),s=at(Tt(a));return()=>{if(t.default)return Bt(u.as||"div",{ref:a},t.default(s))}}});function Pe(u){return typeof Window<"u"&&u instanceof Window?u.document.documentElement:typeof Document<"u"&&u instanceof Document?u.documentElement:u}function ut(u){const t=window.getComputedStyle(u);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&u.clientWidth<u.scrollWidth||t.overflowY==="auto"&&u.clientHeight<u.scrollHeight)return!0;{const a=u.parentNode;return!a||a.tagName==="BODY"?!1:ut(a)}}function en(u){const t=u||window.event,a=t.target;return ut(a)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}const Te=new WeakMap;function tn(u,t=!1){const a=I(t);let s=null,i="";G(qt(u),o=>{const p=Pe(pe(o));if(p){const h=p;if(Te.get(h)||Te.set(h,h.style.overflow),h.style.overflow!=="hidden"&&(i=h.style.overflow),h.style.overflow==="hidden")return a.value=!0;if(a.value)return h.style.overflow="hidden"}},{immediate:!0});const d=()=>{const o=Pe(pe(u));!o||a.value||(Ve&&(s=Qa(o,"touchmove",p=>{en(p)},{passive:!1})),o.style.overflow="hidden",a.value=!0)},l=()=>{const o=Pe(pe(u));!o||!a.value||(Ve&&(s==null||s()),o.style.overflow=i,Te.delete(o),a.value=!1)};return nt(l),K({get(){return a.value},set(o){o?d():l()}})}function an(){let u=!1;const t=I(!1);return(a,s)=>{if(t.value=s.value,u)return;u=!0;const i=tn(a,s.value);G(t,d=>i.value=d)}}an();const nn=T({name:"UseWindowSize",props:["initialWidth","initialHeight"],setup(u,{slots:t}){const a=at(Dt(u));return()=>{if(t.default)return t.default(a)}}}),sn={key:0,class:"fixed inset-0 z-10 bg-black/5"},ln={class:"ml-auto self-start flex flex-wrap justify-end pointer-events-auto gap-2"},rn={key:1,class:"h-8 mb-4"},on={key:2,class:"container px-4 lg:px-6"},un={class:"flex @2xl/root-card:grid grid-cols-1 flex-wrap gap-y-4 gap-x-2"},cn={class:"flex items-baseline"},dn={key:1,class:"contents"},fn={class:"flex items-center @2xl/root-card:hidden"},pn={class:"flex flex-col flex-wrap gap-4"},hn=["for"],vn={class:"truncate"},mn={class:"flex justify-center w-10"},yn={class:"truncate"},bn={key:1,class:"text-muted-foreground"},kn=T({__name:"EntityList",props:{entityKey:{},entityList:{},filters:{},commands:{},title:{},inline:{type:Boolean},showCreateButton:{type:Boolean,default:!0},showReorderButton:{type:Boolean,default:!0},showSearchField:{type:Boolean,default:!0},showEntityState:{type:Boolean,default:!0},collapsed:{type:Boolean},highlightedInstanceId:{}},emits:["update:query","filter-change","reset","reordering","needs-topbar"],setup(u,{emit:t}){const a=u,s=I(),i=t,d=I(null),l=K(()=>!!d.value);function o(){d.value=Object.fromEntries(a.entityList.data.map(n=>[n.id,!1]))}function p(n,b){i("filter-change",n,b)}const h=I(!1);function k(n){i("update:query",{...a.entityList.query,search:n})}function q(){i("reset")}function C(n){i("update:query",{...a.entityList.query,page:n})}function S(n){const b=a.entityList.currentSort===n?a.entityList.currentSortDir==="desc"?a.entityList.config.defaultSort===a.entityList.currentSort?"asc":null:"desc":"asc";i("update:query",{...a.entityList.query,page:1,sort:b?n:null,dir:b||null})}function F(n,b){const{commands:H,entityKey:N}=a;Re.post(X("code16.sharp.api.list.state",{entityKey:N,instanceId:b}),{value:n}).then(V=>{H.handleCommandResponse(V.data)}).catch(V=>{var te,v;const se=(te=V.response)==null?void 0:te.data;((v=V.response)==null?void 0:v.status)===422&&da(se.message,{title:B("modals.state.422.title"),isError:!0})})}async function M(n,b){if(n.metaKey||n.ctrlKey||n.shiftKey)return;const{entityKey:H}=a;n.preventDefault(),a.entityList.config.quickCreationForm?await a.commands.send({hasForm:!0},{postCommand:X("code16.sharp.api.list.command.quick-creation-form.store",{entityKey:b?`${H}:${b.key}`:H}),getForm:X("code16.sharp.api.list.command.quick-creation-form.create",{entityKey:b?`${H}:${b.key}`:H}),query:a.entityList.query,entityKey:H}):Zt.visit(X("code16.sharp.form.create",{parentUri:he(),entityKey:b?`${H}:${b.key}`:H}))}async function j(n,b){const{commands:H,entityKey:N}=a;n.confirmation&&s.value.querySelector("[data-reka-scroll-area-viewport]").scrollTo({left:0,behavior:"smooth"}),await H.send(n,{postCommand:X("code16.sharp.api.list.command.instance",{entityKey:N,instanceId:b,commandKey:n.key}),getForm:X("code16.sharp.api.list.command.instance.form",{entityKey:N,instanceId:b,commandKey:n.key}),query:a.entityList.query,entityKey:N,instanceId:b},{highlightElement:()=>{var V;return(V=s.value)==null?void 0:V.querySelector(`[data-instance-row="${b}"]`)}})}async function m(n){const{commands:b,entityKey:H}=a;await b.send(n,{postCommand:X("code16.sharp.api.list.command.entity",{entityKey:H,commandKey:n.key}),getForm:X("code16.sharp.api.list.command.entity.form",{entityKey:H,commandKey:n.key}),query:{...a.entityList.query,ids:Object.entries(d.value??{}).filter(([N,V])=>V).map(([N,V])=>N)},entityKey:H}),d.value=null}async function A(n){const{entityKey:b,entityList:H,commands:N}=a;s.value.querySelector("[data-reka-scroll-area-viewport]").scrollTo({left:0,behavior:"smooth"}),await fa(H.config.deleteConfirmationText,{highlightElement:()=>{var V;return(V=s.value)==null?void 0:V.querySelector(`[data-instance-row="${n}"]`)}})&&(await Re.delete(X("code16.sharp.api.list.delete",{entityKey:b,instanceId:n})),N.handleCommandResponse({action:"reload"}))}const g=I(null),$=K(()=>!!g.value),Q=I(),Fe=Ot(()=>$.value?Q.value.$el:null,K({get:()=>g.value??[],set:n=>{g.value=n}}),{animation:150});G($,()=>{$.value?Fe.start():Fe.stop(),i("reordering",$.value)});function He(){g.value=[...a.entityList.data]}async function dt(){const{entityKey:n,commands:b}=a;await Re.post(X("code16.sharp.api.list.reorder",{entityKey:n}),{instances:g.value.map(H=>a.entityList.instanceId(H))}),await b.handleCommandResponse({action:"reload"}),g.value=null}const ue=I(!1),ce=K(()=>$.value||l.value);G([ue,ce],()=>{ue.value?i("needs-topbar",ce.value):i("needs-topbar",!1),a.inline&&document.dispatchEvent(new CustomEvent("breadcrumb:updateAppendItem",{detail:ue.value&&ce.value?{label:a.title}:null}))});const ft=ha(),ve=K(()=>a.entityList.fields.filter(n=>ft.md?!0:!n.hideOnXS));return G([Q,()=>a.highlightedInstanceId],()=>{var n;if(Q.value&&a.highlightedInstanceId){const b=(n=s.value)==null?void 0:n.querySelector(`[data-instance-row="${a.highlightedInstanceId}"] a`);b&&b.focus()}}),(n,b)=>(c(),y(ya,{commands:n.commands},{default:r(()=>{var H,N;return[E("div",{ref_key:"el",ref:s},[f(Vt,{"enter-active-class":"transition","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:r(()=>[$.value?(c(),w("div",sn)):L("",!0)]),_:1}),n.entityList?(c(),w(P,{key:0},[n.showReorderButton&&n.entityList.canReorder||n.entityList.canSelect||(H=n.entityList.dropdownEntityCommands(l.value))!=null&&H.flat().length||n.entityList.primaryCommand||n.showCreateButton&&n.entityList.authorizations.create?(c(),y(Kt,{key:0,class:U(e(J)("group container sticky top-14 border-b -mb-px -mt-4 pt-4 bg-white pb-4 px-4 lg:px-6 flex gap-3 pointer-events-none","lg:sticky lg:border-0 lg:pt-0 lg:mt-0 lg:top-3 lg:bg-transparent lg:last:*:-translate-x-[--sticky-safe-right-offset]",{"border-0":n.inline,"-top-8 z-0":n.inline&&!ce.value,"z-[15]":$.value,"data-[stuck=true]:z-30":!n.inline||ce.value})),stuck:ue.value,"onUpdate:stuck":b[3]||(b[3]=V=>ue.value=V)},{default:r(()=>{var V,se,te;return[E("div",ln,[n.showReorderButton&&n.entityList.canReorder&&!l.value?(c(),w(P,{key:0},[$.value?(c(),w(P,{key:0},[f(e(O),{class:"h-8",size:"sm",variant:"outline",onClick:b[0]||(b[0]=v=>g.value=null)},{default:r(()=>[R(_(e(B)("sharp::action_bar.list.reorder_button.cancel")),1)]),_:1}),f(e(O),{class:"h-8",size:"sm",onClick:dt},{default:r(()=>[R(_(e(B)("sharp::action_bar.list.reorder_button.finish")),1)]),_:1})],64)):(c(),y(e(O),{key:1,class:U(["h-8",(V=n.entityList.dropdownEntityCommands(l.value))!=null&&V.flat().length?"max-sm:hidden":""]),size:"sm",variant:"outline",onClick:He},{default:r(()=>[R(_(e(B)("sharp::action_bar.list.reorder_button")),1)]),_:1},8,["class"]))],64)):L("",!0),n.entityList.canSelect&&!$.value?(c(),w(P,{key:1},[l.value?(c(),y(e(O),{key:0,class:"h-8",size:"sm",variant:"outline",onClick:b[1]||(b[1]=v=>d.value=null)},{default:r(()=>[R(_(e(B)("sharp::action_bar.list.reorder_button.cancel")),1)]),_:1})):(c(),y(e(O),{key:1,class:U(["h-8",(se=n.entityList.dropdownEntityCommands(l.value))!=null&&se.flat().length?"max-sm:hidden":""]),size:"sm",variant:"outline",onClick:o},{default:r(()=>[R(_(e(B)("sharp::action_bar.list.select_button")),1)]),_:1},8,["class"]))],64)):L("",!0),(te=n.entityList.dropdownEntityCommands(l.value))!=null&&te.flat().length&&!$.value?(c(),y(e(me),{key:2},{default:r(()=>[f(e(ye),{"as-child":""},{default:r(()=>[f(e(O),{class:"h-8",variant:l.value?"default":"outline",size:"sm",disabled:$.value},{default:r(()=>[R(_(e(B)("sharp::entity_list.commands.entity.label"))+" ",1),l.value?(c(),w(P,{key:0},[R(" ("+_(Object.values(d.value).filter(Boolean).length)+" selected) ",1)],64)):L("",!0),f(je)]),_:1},8,["variant","disabled"])]),_:1}),f(e(we),null,{default:r(()=>[n.showReorderButton&&n.entityList.canReorder&&!l.value?(c(),w(P,{key:0},[f(e(be),{class:"sm:hidden",onClick:He},{default:r(()=>[R(_(e(B)("sharp::action_bar.list.reorder_button")),1)]),_:1}),f(e(ge),{class:"sm:hidden"})],64)):L("",!0),n.entityList.canSelect&&!l.value?(c(),w(P,{key:1},[f(e(be),{class:"sm:hidden",onClick:o},{default:r(()=>[R(_(e(B)("sharp::action_bar.list.select_button")),1)]),_:1}),f(e(ge),{class:"sm:hidden"})],64)):L("",!0),f(Ne,{commands:n.entityList.dropdownEntityCommands(l.value),selecting:l.value,onSelect:m},null,8,["commands","selecting"])]),_:1})]),_:1})):L("",!0),n.entityList.primaryCommand&&!$.value&&!l.value?(c(),y(e(O),{key:3,class:"h-8",size:"sm",onClick:b[2]||(b[2]=v=>m(n.entityList.primaryCommand))},{default:r(()=>[R(_(n.entityList.primaryCommand.label),1)]),_:1})):L("",!0),n.showCreateButton&&n.entityList.authorizations.create&&!$.value&&!l.value?(c(),w(P,{key:4},[n.entityList.forms&&Object.values(n.entityList.forms).length?(c(),y(e(me),{key:0},{default:r(()=>[f(e(ye),{"as-child":""},{default:r(()=>[f(e(O),{class:"h-8",size:"sm"},{default:r(()=>[R(_(a.entityList.config.createButtonLabel||e(B)("sharp::action_bar.list.forms_dropdown"))+" ",1),f(je,{class:"opacity-75"})]),_:1})]),_:1}),f(e(we),null,{default:r(()=>[(c(!0),w(P,null,ae(Object.values(n.entityList.forms).filter(v=>!!v.label),v=>(c(),y(e(be),{as:"a",href:e(X)("code16.sharp.form.create",{parentUri:e(he)(),entityKey:`${n.entityKey}:${v.key}`}),onClick:ne=>M(ne,v)},{default:r(()=>[R(_(v.label),1)]),_:2},1032,["href","onClick"]))),256))]),_:1})]),_:1})):(c(),y(e(O),{key:1,as:"a",class:"h-8 gap-1",size:"sm",disabled:$.value||l.value,href:e(X)("code16.sharp.form.create",{parentUri:e(he)(),entityKey:n.entityKey}),onClick:M},{default:r(()=>[R(_(a.entityList.config.createButtonLabel||e(B)("sharp::action_bar.list.create_button")),1)]),_:1},8,["disabled","href"]))],64)):L("",!0)])]}),_:1},8,["class","stuck"])):L("",!0)],64)):(c(),w("div",rn)),(N=n.entityList)!=null&&N.pageAlert?(c(),w("div",on,[f(Wt,{class:"mb-3","page-alert":n.entityList.pageAlert},null,8,["page-alert"])])):L("",!0),f(Qt,{class:U($.value?"relative z-[11]":"")},{default:r(()=>{var V,se;return[f(e(Mt),null,{default:r(()=>{var te,v,ne,W,x;return[E("div",un,[E("div",cn,[D(n.$slots,"card-header"),n.entityList?(c(),y(e(ba),{key:0,class:U(["text-xs ml-4 mr-2 lg:ml-6 whitespace-nowrap",[n.inline?"lg:mr-9":"lg:mr-5"]])},{default:r(()=>{var z;return[(z=n.entityList.query)!=null&&z.search?(c(),w(P,{key:0},[R(_(e(Ke)("sharp::action_bar.list.search.title",n.entityList.count,{count:n.entityList.count,search:n.entityList.query.search})),1)],64)):(c(),w(P,{key:1},[R(_(e(Ke)("sharp::action_bar.list.items_count",n.entityList.count,{count:n.entityList.count})),1)],64))]}),_:1},8,["class"])):L("",!0)]),n.entityList&&(n.showSearchField&&n.entityList.config.searchable||(te=n.entityList.visibleFilters)!=null&&te.length)?(c(),w("div",{key:0,class:U(["flex flex-wrap items-center gap-2 -my-1 @2xl/root-card:my-0",!n.collapsed&&((v=n.entityList.data)!=null&&v.length)?"@2xl/root-card:-mb-2":""])},[n.showSearchField&&n.entityList.config.searchable?_e((c(),w("div",{key:0,class:U(["self-center pointer-events-auto",{"hidden @2xl/root-card:block":(ne=n.entityList.visibleFilters)==null?void 0:ne.length}])},[f(Ze,{inline:"",expanded:h.value,"onUpdate:expanded":b[4]||(b[4]=z=>h.value=z),"entity-list":n.entityList,onSubmit:k},null,8,["expanded","entity-list"])],2)),[[ke,!$.value&&!l.value&&!n.collapsed]]):L("",!0),(W=n.entityList.visibleFilters)!=null&&W.length?_e((c(),w("div",dn,[E("div",fn,[f(e(Xt),null,{default:r(()=>[f(e(va),{"as-child":""},{default:r(()=>[f(e(O),{class:"h-8 gap-1",variant:"outline",size:"sm"},{default:r(()=>[f(e(ma),{class:"h-3.5 w-3.5"}),E("span",null,_(e(B)("sharp::filters.popover_button")),1)]),_:1})]),_:1}),f(e(Yt),{onOpenAutoFocus:b[6]||(b[6]=tt(()=>{},["prevent"]))},{default:r(()=>[f(e(jt),null,{default:r(()=>[f(e(Nt),null,{default:r(()=>[R(_(e(B)("sharp::filters.popover_button"))+" : "+_(n.title),1)]),_:1})]),_:1}),E("div",pn,[n.showSearchField&&n.entityList.config.searchable?(c(),y(Ze,{key:0,expanded:h.value,"onUpdate:expanded":b[5]||(b[5]=z=>h.value=z),"entity-list":n.entityList,onSubmit:k},null,8,["expanded","entity-list"])):L("",!0),(c(!0),w(P,null,ae(n.entityList.visibleFilters,z=>(c(),y(xe,{key:z.key,filter:z,value:n.filters.currentValues[z.key],disabled:$.value,valuated:n.filters.isValuated([z]),onInput:de=>p(z,de)},null,8,["filter","value","disabled","valuated","onInput"]))),128))]),f(e(xt),{class:"flex-row gap-2 mt-2"},{default:r(()=>[f(e(We),{"as-child":""},{default:r(()=>{var z;return[f(e(O),{class:"flex-1",variant:"secondary",disabled:!n.filters.isValuated(n.entityList.visibleFilters)&&!((z=n.entityList.query)!=null&&z.search),onClick:q},{default:r(()=>[R(_(e(B)("sharp::filters.reset_all")),1)]),_:1},8,["disabled"])]}),_:1}),f(e(We),{"as-child":""},{default:r(()=>[f(e(O),{class:"flex-1"},{default:r(()=>[R(_(e(B)("sharp::filters.dialog.submit")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n.filters.isValuated(n.filters.rootFilters)?(c(),y(e(Me),{key:0,class:"ml-2"},{default:r(()=>[R(_(n.filters.valuatedCount(n.filters.rootFilters)),1)]),_:1})):L("",!0)]),E("div",{class:U(["hidden @2xl/root-card:contents",{"*:opacity-0 *:pointer-events-none":h.value}])},[(c(!0),w(P,null,ae(n.entityList.visibleFilters,z=>(c(),y(xe,{key:z.key,filter:z,value:n.filters.currentValues[z.key],disabled:$.value,valuated:n.filters.isValuated([z]),inline:"",onInput:de=>p(z,de)},null,8,["filter","value","disabled","valuated","onInput"]))),128)),n.filters.isValuated(n.entityList.visibleFilters)||(x=n.entityList.query)!=null&&x.search?(c(),y(e(O),{key:0,class:"h-8 underline underline-offset-4 -ml-2",variant:"ghost",size:"sm",onClick:q},{default:r(()=>[R(_(e(B)("sharp::filters.reset_all")),1)]),_:1})):L("",!0)],2)],512)),[[ke,!$.value&&!l.value&&!n.collapsed]]):L("",!0)],2)):L("",!0)])]}),_:3}),n.entityList?(c(),w(P,{key:0},[_e(f(e(Gt),{class:U(n.entityList.count>0?"pb-2 !px-0":"")},{default:r(()=>{var te;return[((te=n.entityList.data)==null?void 0:te.length)>0?(c(),y(e(xa),{key:0,class:"w-full data-[scrollbar-x-visible]:pb-4",type:"auto","touch-type":"scroll"},{scrollbar:r(()=>[f(e(nn),null,{default:r(({height:v})=>[f(e(Za),{class:"absolute inset-0 pointer-events-none"},{default:r(({bottom:ne})=>[f(e(it),{class:"z-20 [@media(hover:hover)]:bg-background pointer-events-auto will-change-transform",orientation:"horizontal",style:le({transform:`translate3d(0, ${Math.max(0,ne-v)*-1}px, 0)`})},null,8,["style"])]),_:2},1024)]),_:1})]),default:r(()=>[f(e(Ya),{"no-scroll":"",class:"w-max min-w-full max-w-[768px] md:max-w-[1024px] @3xl:w-full @3xl:max-w-none"},{default:r(()=>[f(e(Na),{class:U(ve.value.some(v=>v.label)?"":"collapse [&_tr]:border-0")},{default:r(()=>[f(e(Qe),{class:"hover:bg-transparent lg:first:*:pl-6 lg:last:*:pr-6"},{default:r(()=>[l.value?(c(),y(e(Le),{key:0},{default:r(()=>b[7]||(b[7]=[E("span",{class:"sr-only"},"Select...",-1)])),_:1})):L("",!0),(c(!0),w(P,null,ae(ve.value,(v,ne)=>(c(),y(e(Le),{key:v.key,class:"max-w-[70cqw] md:w-[var(--width,auto)]",style:le({"--width":v.width==="fill"?100/ve.value.length+"%":v.width?v.width:v.type==="state"?0:null})},{default:r(()=>[v.sortable?(c(),y(e(O),{key:0,variant:"ghost",size:"sm",class:"-ml-3 h-8 data-[state=open]:bg-accent",onClick:W=>S(v.key)},{default:r(()=>[E("span",null,_(v.label),1),n.entityList.currentSort===v.key?(c(),w(P,{key:0},[n.entityList.currentSortDir==="desc"?(c(),y(e(ga),{key:0,class:"ml-2 h-3.5 w-3.5"})):n.entityList.currentSortDir==="asc"?(c(),y(e(wa),{key:1,class:"ml-2 h-3.5 w-3.5"})):L("",!0)],64)):(c(),y(e(ea),{key:1,class:"ml-2 h-3.5 w-3.5"}))]),_:2},1032,["onClick"])):(c(),w(P,{key:1},[R(_(v.label),1)],64))]),_:2},1032,["style"]))),128)),!$.value&&!l.value&&n.entityList.data.some(v=>n.entityList.instanceHasActions(v,n.showEntityState))?(c(),y(e(Le),{key:1,class:"w-2"},{default:r(()=>b[8]||(b[8]=[E("span",{class:"sr-only"},"Edit",-1)])),_:1})):L("",!0),$.value?(c(),y(e(Le),{key:2},{default:r(()=>b[9]||(b[9]=[E("span",{class:"sr-only"},"Select...",-1)])),_:1})):L("",!0)]),_:1})]),_:1},8,["class"]),f(e(ja),{class:"group",ref_key:"sortableTableBody",ref:Q},{default:r(()=>[(c(!0),w(P,null,ae(g.value??n.entityList.data,(v,ne)=>(c(),y(e(Qe),{key:n.entityList.instanceId(v),class:U(e(J)("group/row relative hover:bg-transparent has-[[data-row-action]:hover]:bg-muted/50 has-[[aria-expanded=true]]:bg-muted/50 lg:first:*:pl-6 lg:last:*:pr-6",$.value?"cursor-move hover:bg-muted/50 group-[:has(.sortable-chosen)]:bg-background [&.sortable-chosen]:transition-none":"")),"data-instance-row":n.entityList.instanceId(v),"data-highlighted":a.highlightedInstanceId&&a.highlightedInstanceId==n.entityList.instanceId(v)?!0:null},{default:r(()=>[l.value&&d.value?(c(),y(e(fe),{key:0},{default:r(()=>[f(e(ta),{class:"block",id:`check-${n.entityKey}-${n.entityList.instanceId(v)}`,"model-value":d.value[n.entityList.instanceId(v)],"onUpdate:modelValue":W=>d.value[n.entityList.instanceId(v)]=W},null,8,["id","model-value","onUpdate:modelValue"]),E("label",{class:"absolute inset-0 z-20","data-row-action":"",for:`check-${n.entityKey}-${n.entityList.instanceId(v)}`},b[10]||(b[10]=[E("span",{class:"sr-only"},"Select",-1)]),8,hn)]),_:2},1024)):L("",!0),(c(!0),w(P,null,ae(ve.value,(W,x)=>(c(),w(P,{key:W.key},[W.type==="state"&&n.entityList.config.state&&n.showEntityState?(c(),y(e(fe),{key:0,class:"max-w-[70cqw]"},{default:r(()=>[f(e(me),null,{default:r(()=>[f(e(ye),{"as-child":""},{default:r(()=>[f(e(O),{class:"relative disabled:opacity-100 -mx-3",variant:"ghost",size:"sm",disabled:!n.entityList.instanceCanUpdateState(v)},{default:r(()=>[f(e(Me),{variant:"outline"},{default:r(()=>{var z;return[f(Ae,{class:"-ml-0.5 mr-1.5","state-value":n.entityList.instanceStateValue(v)},null,8,["state-value"]),R(" "+_((z=n.entityList.instanceStateValue(v))==null?void 0:z.label),1)]}),_:2},1024)]),_:2},1032,["disabled"])]),_:2},1024),f(e(we),{align:"start","align-offset":-16},{default:r(()=>[(c(!0),w(P,null,ae(n.entityList.config.state.values,z=>(c(),y(e(Xe),{key:z.value,"model-value":z.value==n.entityList.instanceState(v),"onUpdate:modelValue":de=>de&&F(z.value,n.entityList.instanceId(v))},{default:r(()=>[f(Ae,{class:"mr-1.5","state-value":z},null,8,["state-value"]),E("span",vn,_(z.label),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)):(c(),y(e(fe),{key:1,class:"max-w-[70cqw]"},{default:r(()=>[W.html&&typeof v[W.key]=="string"?(c(),y(aa,{key:0,class:U(["break-words [&_a]:relative [&_a]:z-10",{"[&_a]:pointer-events-none":l.value||$.value}]),html:v[W.key]},null,8,["class","html"])):(c(),w(P,{key:1},[R(_(v[W.key]),1)],64)),x===0&&n.entityList.instanceUrl(v)&&!l.value&&!$.value?(c(),y(e(na),{key:2,class:"absolute inset-0 ring-ring ring-inset focus-visible:outline-none focus-visible:ring-2 focus:group-data-[highlighted]/row:ring-2","data-row-action":"",href:n.entityList.instanceUrl(v)},null,8,["href"])):L("",!0)]),_:2},1024))],64))),128)),$.value?(c(),y(e(fe),{key:1,class:"w-0 hidden lg:table-cell @5xl:pl-4"},{default:r(()=>[E("div",mn,[f(e(sa),{class:"w-4 h-4 opacity-50"})])]),_:1})):L("",!0),!$.value&&!l.value&&n.entityList.instanceHasActions(v,n.showEntityState)?(c(),y(e(fe),{key:2,class:"sticky bg-background pl-1 -right-3 z-10 group-data-[scroll-arrived-right=true]/scroll-area:bg-transparent @5xl:pl-4 @5xl:bg-transparent"},{default:r(()=>[b[11]||(b[11]=E("div",{class:"absolute inset-0 -left-2 overflow-hidden","aria-hidden":"true"},null,-1)),b[12]||(b[12]=E("div",{class:"absolute inset-0 -left-4 overflow-hidden pointer-events-none","aria-hidden":"true"},[E("div",{class:"absolute inset-0 left-4 shadow-l-xl dark:border-l shadow-border transition-opacity group-data-[scroll-arrived-right=true]/scroll-area:opacity-0 @5xl:opacity-0","aria-hidden":"true"})],-1)),f(e(me),null,{default:r(()=>[f(e(ye),{"as-child":""},{default:r(()=>[f(e(O),{class:"[@media(hover:hover)]:pointer-events-auto relative",variant:"ghost",size:"icon"},{default:r(()=>[f(e(la),{class:"w-4 h-4"})]),_:1})]),_:1}),f(e(we),{side:"bottom",align:"center"},{default:r(()=>{var W;return[n.entityList.config.state&&n.showEntityState&&n.entityList.instanceCanUpdateState(v)?(c(),w(P,{key:0},[f(e(ra),null,{default:r(()=>[f(e(oa),null,{default:r(()=>[f(e(ia),null,{default:r(()=>[R(_(e(B)("sharp::modals.entity_state.edit.title")),1)]),_:1}),f(e(ua),null,{default:r(()=>[f(e(ca),null,{default:r(()=>[(c(!0),w(P,null,ae(n.entityList.config.state.values,x=>(c(),y(e(Xe),{key:x.value,"model-value":x.value==n.entityList.instanceState(v),"onUpdate:modelValue":z=>z&&F(x.value,n.entityList.instanceId(v))},{default:r(()=>[f(Ae,{class:"mr-1.5","state-value":x},null,8,["state-value"]),E("span",yn,_(x.label),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),f(e(ge),{class:"last:hidden"})],64)):L("",!0),f(Ne,{commands:n.entityList.instanceCommands(v),onSelect:x=>j(x,n.entityList.instanceId(v))},null,8,["commands","onSelect"]),!n.entityList.config.deleteHidden&&n.entityList.instanceCanDelete(v)?(c(),w(P,{key:1},[(W=n.entityList.instanceCommands(v))!=null&&W.flat().length?(c(),y(e(ge),{key:0,class:"first:hidden"})):L("",!0),f(e(be),{class:"text-destructive",onClick:x=>A(n.entityList.instanceId(v))},{default:r(()=>[R(_(e(B)("sharp::action_bar.form.delete_button")),1)]),_:2},1032,["onClick"])],64)):L("",!0)]}),_:2},1024)]),_:2},1024)]),_:2},1024)):L("",!0)]),_:2},1032,["class","data-instance-row","data-highlighted"]))),128))]),_:1},512)]),_:1})]),_:1})):(c(),w("div",bn,_(e(B)("sharp::entity_list.empty_text")),1))]}),_:1},8,["class"]),[[ke,!n.collapsed]]),(V=n.entityList.meta)!=null&&V.prev_page_url||(se=n.entityList.meta)!=null&&se.next_page_url?_e((c(),y(e(Jt),{key:0,class:"px-4 pt-4 lg:px-6"},{default:r(()=>[f(Xa,{"entity-list":n.entityList,"links-openable":!n.inline,onChange:C},null,8,["entity-list","links-openable"])]),_:1},512)),[[ke,!n.collapsed]]):L("",!0)],64)):L("",!0)]}),_:3},8,["class"])],512)]}),_:3},8,["commands"]))}});class ct{constructor(t,a,s,i){Object.assign(this,t),this.entityKey=a,this.hiddenFilters=s,this.hiddenCommands=i}toData(){return Object.fromEntries(Object.entries({authorizations:this.authorizations,config:this.config,data:this.data,fields:this.fields,forms:this.forms,meta:this.meta,pageAlert:this.pageAlert,query:this.query,filterValues:this.filterValues,title:this.title}).map(([t,a])=>[t,pa(a)]))}get count(){var t;return((t=this.meta)==null?void 0:t.total)??this.data.length}get currentSort(){var t;return((t=this.query)==null?void 0:t.sort)??this.config.defaultSort}get currentSortDir(){var t;return((t=this.query)==null?void 0:t.dir)??this.config.defaultSortDir}get visibleFilters(){var t,a;return this.hiddenFilters?(t=this.config.filters)==null?void 0:t._root.filter(s=>!(s.key in this.hiddenFilters)):(a=this.config.filters)==null?void 0:a._root}get visibleCommands(){var t,a,s,i;return{instance:(a=(t=this.config.commands)==null?void 0:t.instance)==null?void 0:a.map(d=>d.filter(l=>{var o,p;return!((p=(o=this.hiddenCommands)==null?void 0:o.instance)!=null&&p.includes(l.key))})),entity:(i=(s=this.config.commands)==null?void 0:s.entity)==null?void 0:i.map(d=>d.filter(l=>{var o,p;return!((p=(o=this.hiddenCommands)==null?void 0:o.entity)!=null&&p.includes(l.key))}))}}get allowedEntityCommands(){var t;return((t=this.visibleCommands.entity)==null?void 0:t.map(a=>a.filter(s=>s.authorization)))??[]}get primaryCommand(){return this.allowedEntityCommands.flat().find(t=>t.primary)}get canSelect(){return this.allowedEntityCommands.flat().some(t=>t.instanceSelection)}get canReorder(){return this.config.reorderable&&this.authorizations.reorder&&this.data.length>1}withRefreshedItems(t){return this.data=this.data.map(a=>t.find(s=>this.instanceId(s)===this.instanceId(a))??a),new ct(this,this.entityKey)}dropdownEntityCommands(t){return this.allowedEntityCommands.map(a=>a.filter(s=>t?!!s.instanceSelection:!s.primary))}instanceId(t){return t[this.config.instanceIdAttribute]}instanceUrl(t){const a=this.entityKey,s=this.instanceId(t);if(!this.authorizations.view.includes(s))return null;const i=this.forms&&Object.values(this.forms).find(d=>d.instances.includes(s));return this.config.hasShowPage?X("code16.sharp.show.show",{parentUri:he(),entityKey:i?`${a}:${i.key}`:a,instanceId:s}):X("code16.sharp.form.edit",{parentUri:he(),entityKey:i?`${a}:${i.key}`:a,instanceId:s})}instanceState(t){return this.config.state?t[this.config.state.attribute]:null}instanceStateValue(t){var a;return(a=this.config.state)==null?void 0:a.values.find(s=>s.value===this.instanceState(t))}instanceCanUpdateState(t){return Array.isArray(this.config.state.authorization)?this.config.state.authorization.includes(this.instanceId(t)):!!this.config.state.authorization}instanceCanDelete(t){var a;return Array.isArray(this.authorizations.delete)?(a=this.authorizations.delete)==null?void 0:a.includes(this.instanceId(t)):!!this.authorizations.delete}instanceCommands(t){var a,s;return(s=(a=this.visibleCommands)==null?void 0:a.instance)==null?void 0:s.map(i=>i.filter(d=>Array.isArray(d.authorization)?d.authorization.includes(this.instanceId(t)):d.authorization))}instanceHasActions(t,a){var s;return((s=this.instanceCommands(t))==null?void 0:s.flat().length)>0||this.config.state&&a&&this.instanceCanUpdateState(t)||!this.config.deleteHidden&&this.instanceCanDelete(t)}}function Sn(){var a,s;const u=(a=Ye().props.query)==null?void 0:a.highlighted_entity_key,t=(s=Ye().props.query)==null?void 0:s.highlighted_instance_id;return{highlightedEntityKey:u,highlightedInstanceId:t}}export{ct as E,kn as _,Ae as a,Sn as u};
