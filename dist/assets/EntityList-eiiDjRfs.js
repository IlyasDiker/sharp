import{d as v,r as i,ai as h,an as L,ao as V,c as S,w as l,ap as g,o as w,a as n,u as o,N as q,b as C,t as $,av as u}from"./sharp-BzqWd9f1.js";import{E as f,_ as k}from"./EntityList-CnRuVmME.js";import{_ as F}from"./Title.vue_vue_type_script_setup_true_lang-DnOZsG9R.js";import{u as E,s as c}from"./CommandDropdownItems.vue_vue_type_script_setup_true_lang-xsMdNgi8.js";import{_ as N}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-B6R-jyYj.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-D9kp6scJ.js";import"./TemplateRenderer.vue_vue_type_script_setup_true_lang-BhoP5pFx.js";const T=v({__name:"EntityList",props:{entityList:{},breadcrumb:{}},setup(p){const r=p,s=i().params.entityKey,t=h(new f(r.entityList,s)),a=L(t.value.config.filters,t.value.filterValues),d=E({refresh:e=>{t.value=t.value.withRefreshedItems(e.items)}});V(()=>r.entityList,()=>{t.value=new f(r.entityList,s),a.update(r.entityList.config.filters,r.entityList.filterValues)});function y(e){c(t.value.query)!==c(e)&&u.visit(i("code16.sharp.list",{entityKey:s})+c(e),{preserveState:!0,preserveScroll:!1})}function b(e,m){u.post(i("code16.sharp.list.filters.store",{entityKey:s}),{filterValues:a.nextValues(e,m),query:t.value.query},{preserveState:!0,preserveScroll:!1})}function _(){u.post(i("code16.sharp.list.filters.store",{entityKey:s}),{filterValues:a.defaultValues(a.rootFilters),query:{...t.value.query,search:null}},{preserveState:!0,preserveScroll:!1})}return(e,m)=>(w(),S(g,null,{breadcrumb:l(()=>[n(N,{breadcrumb:e.breadcrumb},null,8,["breadcrumb"])]),default:l(()=>[n(F,{breadcrumb:e.breadcrumb},null,8,["breadcrumb"]),n(k,{"entity-key":o(s),"entity-list":t.value,filters:o(a),commands:o(d),title:e.breadcrumb.items[0].label,onReset:_,onFilterChange:b,"onUpdate:query":y},{"card-header":l(()=>[n(o(q),null,{default:l(()=>[C($(e.breadcrumb.items[0].label),1)]),_:1})]),_:1},8,["entity-key","entity-list","filters","commands","title"])]),_:1}))}});export{T as default};
