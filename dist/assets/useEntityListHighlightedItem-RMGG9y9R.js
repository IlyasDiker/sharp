import{bf as Ee,d as B,ak as I,as as qe,bg as bt,bh as ee,o as i,c as m,w as o,q,u as e,aN as se,P as oe,x as Ue,bi as gt,ap as ie,A as g,j as z,a as d,v as N,b as $,F as E,bj as _t,aQ as ze,bk as re,y as K,bl as st,bm as Fe,bn as wt,bo as We,at as Z,i as S,bp as Lt,k as O,bq as kt,t as _,_ as R,D as St,G as Ct,H as ne,B as $t,br as Et,V as D,I as zt,z as x,bs as It,bt as At,m as Rt,bu as Pt,bv as Tt,n as lt,bw as Bt,bx as Dt,by as qt,bz as Ut,aS as ot,bA as Ft,au as Ht,bB as Ot,bC as fe,bD as Vt,bE as Me,bF as rt,bG as Kt,bH as Wt,bI as Mt,bJ as Xt,bK as jt,aC as Yt,a$ as Nt,bL as ye,aZ as be,bc as ge,aJ as _e,aK as we,aL as Le,b8 as ke,b7 as Se,r as Y,aT as pe,aD as Gt,aE as Qt,aF as Jt,aG as Zt,aH as xt,aI as Xe,Y as je,S as ea,bM as ta,bN as aa,bO as na,K as Ye,bP as sa,T as la,a_ as oa,aM as ra,aW as Pe,aX as ia,b0 as Ne,Z as ua,X as ca,bQ as da,bR as fa,b2 as pa,b3 as ha,b4 as va,b5 as ma,b6 as ya,bd as ba,be as ga,bS as _a,bT as Ge}from"./sharp-cUx2czr5.js";import{u as wa,a as Qe,b as Je,_ as La,F as ka,c as Sa,d as Ze}from"./DropdownChevronDown.vue_vue_type_script_setup_true_lang-BgUa5zGX.js";import{_ as xe}from"./CardDescription.vue_vue_type_script_setup_true_lang-X36z-ngT.js";/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=Ee("ArrowDownIcon",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=Ee("ArrowUpIcon",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=Ee("ChevronsLeftIcon",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=Ee("ChevronsRightIcon",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),[te,Ia]=Ue("ScrollAreaRoot"),Aa=B({__name:"ScrollAreaRoot",props:{type:{default:"hover"},dir:{},scrollHideDelay:{default:600},asChild:{type:Boolean},as:{}},setup(u,{expose:t}){const a=u,s=I(0),c=I(0),f=I(),l=I(),r=I(),p=I(),y=I(!1),L=I(!1),{type:P,dir:C,scrollHideDelay:k}=qe(a),V=bt(C);function G(){var w;(w=f.value)==null||w.scrollTo({top:0})}function j(){var w;(w=f.value)==null||w.scrollTo({top:0,left:0})}t({viewport:f,scrollTop:G,scrollTopLeft:j});const{forwardRef:h,currentElement:A}=ee();return Ia({type:P,dir:V,scrollHideDelay:k,scrollArea:A,viewport:f,onViewportChange:w=>{f.value=w||void 0},content:l,onContentChange:w=>{l.value=w},scrollbarX:r,scrollbarXEnabled:y,scrollbarY:p,scrollbarYEnabled:L,onScrollbarXChange:w=>{r.value=w||void 0},onScrollbarYChange:w=>{p.value=w||void 0},onScrollbarXEnabledChange:w=>{y.value=w},onScrollbarYEnabledChange:w=>{L.value=w},onCornerWidthChange:w=>{s.value=w},onCornerHeightChange:w=>{c.value=w}}),(w,ae)=>(i(),m(e(oe),{ref:e(h),"as-child":a.asChild,as:w.as,dir:e(V),style:se({position:"relative","--reka-scroll-area-corner-width":`${s.value}px`,"--reka-scroll-area-corner-height":`${c.value}px`})},{default:o(()=>[q(w.$slots,"default")]),_:3},8,["as-child","as","dir","style"]))}}),Ra=B({inheritAttrs:!1,__name:"ScrollAreaViewport",props:{nonce:{},asChild:{type:Boolean},as:{}},setup(u,{expose:t}){const a=u,{nonce:s}=qe(a),c=gt(s),f=te(),l=I();ie(()=>{f.onViewportChange(l.value),f.onContentChange(p.value)}),t({viewportElement:l});const{forwardRef:r,currentElement:p}=ee();return(y,L)=>(i(),g(E,null,[z("div",N({ref_key:"viewportElement",ref:l,"data-reka-scroll-area-viewport":"",style:{overflowX:e(f).scrollbarXEnabled.value?"scroll":"hidden",overflowY:e(f).scrollbarYEnabled.value?"scroll":"hidden"}},y.$attrs,{tabindex:0}),[d(e(oe),{ref:e(r),style:se({minWidth:e(f).scrollbarXEnabled.value?"fit-content":void 0}),"as-child":a.asChild,as:y.as},{default:o(()=>[q(y.$slots,"default")]),_:3},8,["style","as-child","as"])],16),d(e(oe),{as:"style",nonce:e(c)},{default:o(()=>L[0]||(L[0]=[$(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-reka-scroll-area-viewport] { scrollbar-width:none; -ms-overflow-style:none; -webkit-overflow-scrolling:touch; } [data-reka-scroll-area-viewport]::-webkit-scrollbar { display:none; } ")])),_:1},8,["nonce"])],64))}});function it(u,t){return a=>{if(u[0]===u[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(u[1]-u[0]);return t[0]+s*(a-u[0])}}function Ie(u){const t=ut(u.viewport,u.content),a=u.scrollbar.paddingStart+u.scrollbar.paddingEnd,s=(u.scrollbar.size-a)*t;return Math.max(s,18)}function ut(u,t){const a=u/t;return Number.isNaN(a)?0:a}function Pa(u,t=()=>{}){let a={left:u.scrollLeft,top:u.scrollTop},s=0;return function c(){const f={left:u.scrollLeft,top:u.scrollTop},l=a.left!==f.left,r=a.top!==f.top;(l||r)&&t(),a=f,s=window.requestAnimationFrame(c)}(),()=>window.cancelAnimationFrame(s)}function et(u,t,a="ltr"){const s=Ie(t),c=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,f=t.scrollbar.size-c,l=t.content-t.viewport,r=f-s,p=a==="ltr"?[0,l]:[l*-1,0],y=_t(u,p[0],p[1]);return it([0,l],[0,r])(y)}function Ce(u){return u?Number.parseInt(u,10):0}function Ta(u,t,a,s="ltr"){const c=Ie(a),f=c/2,l=t||f,r=c-l,p=a.scrollbar.paddingStart+l,y=a.scrollbar.size-a.scrollbar.paddingEnd-r,L=a.content-a.viewport,P=s==="ltr"?[0,L]:[L*-1,0];return it([p,y],P)(u)}function tt(u,t){return u>0&&u<t}const ct=B({__name:"ScrollAreaScrollbarImpl",props:{isHorizontal:{type:Boolean}},emits:["onDragScroll","onWheelScroll","onThumbPointerDown"],setup(u,{emit:t}){const a=u,s=t,c=te(),f=Ae(),l=Re(),{forwardRef:r,currentElement:p}=ee(),y=I(""),L=I();function P(h){var A,w;if(L.value){const ae=h.clientX-((A=L.value)==null?void 0:A.left),W=h.clientY-((w=L.value)==null?void 0:w.top);s("onDragScroll",{x:ae,y:W})}}function C(h){h.button===0&&(h.target.setPointerCapture(h.pointerId),L.value=p.value.getBoundingClientRect(),y.value=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",c.viewport&&(c.viewport.value.style.scrollBehavior="auto"),P(h))}function k(h){P(h)}function V(h){const A=h.target;A.hasPointerCapture(h.pointerId)&&A.releasePointerCapture(h.pointerId),document.body.style.webkitUserSelect=y.value,c.viewport&&(c.viewport.value.style.scrollBehavior=""),L.value=void 0}function G(h){var W;const A=h.target,w=(W=p.value)==null?void 0:W.contains(A),ae=f.sizes.value.content-f.sizes.value.viewport;w&&f.handleWheelScroll(h,ae)}ie(()=>{document.addEventListener("wheel",G,{passive:!1})}),ze(()=>{document.removeEventListener("wheel",G)});function j(){var h,A,w,ae,W;p.value&&(a.isHorizontal?f.handleSizeChange({content:((h=c.viewport.value)==null?void 0:h.scrollWidth)??0,viewport:((A=c.viewport.value)==null?void 0:A.offsetWidth)??0,scrollbar:{size:p.value.clientWidth??0,paddingStart:Ce(getComputedStyle(p.value).paddingLeft),paddingEnd:Ce(getComputedStyle(p.value).paddingRight)}}):f.handleSizeChange({content:((w=c.viewport.value)==null?void 0:w.scrollHeight)??0,viewport:((ae=c.viewport.value)==null?void 0:ae.offsetHeight)??0,scrollbar:{size:((W=p.value)==null?void 0:W.clientHeight)??0,paddingStart:Ce(getComputedStyle(p.value).paddingLeft),paddingEnd:Ce(getComputedStyle(p.value).paddingRight)}}))}return re(p,j),re(c.content,j),(h,A)=>(i(),m(e(oe),{ref:e(r),style:{position:"absolute"},"data-scrollbarimpl":"",as:e(l).as.value,"as-child":e(l).asChild.value,onPointerdown:C,onPointermove:k,onPointerup:V},{default:o(()=>[q(h.$slots,"default")]),_:3},8,["as","as-child"]))}}),Ba=B({__name:"ScrollAreaScrollbarX",setup(u){const t=te(),a=Ae(),{forwardRef:s,currentElement:c}=ee();ie(()=>{c.value&&t.onScrollbarXChange(c.value)});const f=K(()=>a.sizes.value);return(l,r)=>(i(),m(ct,{ref:e(s),"is-horizontal":!0,"data-orientation":"horizontal",style:se({bottom:0,left:e(t).dir.value==="rtl"?"var(--reka-scroll-area-corner-width)":0,right:e(t).dir.value==="ltr"?"var(--reka-scroll-area-corner-width)":0,"--reka-scroll-area-thumb-width":f.value?`${e(Ie)(f.value)}px`:void 0}),onOnDragScroll:r[0]||(r[0]=p=>e(a).onDragScroll(p.x))},{default:o(()=>[q(l.$slots,"default")]),_:3},8,["style"]))}}),Da=B({__name:"ScrollAreaScrollbarY",setup(u){const t=te(),a=Ae(),{forwardRef:s,currentElement:c}=ee();ie(()=>{c.value&&t.onScrollbarYChange(c.value)});const f=K(()=>a.sizes.value);return(l,r)=>(i(),m(ct,{ref:e(s),"is-horizontal":!1,"data-orientation":"vertical",style:se({top:0,right:e(t).dir.value==="ltr"?0:void 0,left:e(t).dir.value==="rtl"?0:void 0,bottom:"var(--reka-scroll-area-corner-height)","--reka-scroll-area-thumb-height":f.value?`${e(Ie)(f.value)}px`:void 0}),onOnDragScroll:r[0]||(r[0]=p=>e(a).onDragScroll(p.y))},{default:o(()=>[q(l.$slots,"default")]),_:3},8,["style"]))}}),[Ae,qa]=Ue("ScrollAreaScrollbarVisible"),He=B({__name:"ScrollAreaScrollbarVisible",setup(u){const t=te(),a=Re(),{forwardRef:s}=ee(),c=I({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=K(()=>{const h=ut(c.value.viewport,c.value.content);return h>0&&h<1}),l=I(),r=I(0);function p(h,A){if(k.value){const w=t.viewport.value.scrollLeft+h.deltaY;t.viewport.value.scrollLeft=w,tt(w,A)&&h.preventDefault()}else{const w=t.viewport.value.scrollTop+h.deltaY;t.viewport.value.scrollTop=w,tt(w,A)&&h.preventDefault()}}function y(h,A){k.value?r.value=A.x:r.value=A.y}function L(h){r.value=0}function P(h){c.value=h}function C(h,A){return Ta(h,r.value,c.value,A)}const k=K(()=>a.isHorizontal.value);function V(h){k.value?t.viewport.value.scrollLeft=C(h,t.dir.value):t.viewport.value.scrollTop=C(h)}function G(){if(k.value){if(t.viewport.value&&l.value){const h=t.viewport.value.scrollLeft,A=et(h,c.value,t.dir.value);l.value.style.transform=`translate3d(${A}px, 0, 0)`}}else if(t.viewport.value&&l.value){const h=t.viewport.value.scrollTop,A=et(h,c.value);l.value.style.transform=`translate3d(0, ${A}px, 0)`}}function j(h){l.value=h}return qa({sizes:c,hasThumb:f,handleWheelScroll:p,handleThumbDown:y,handleThumbUp:L,handleSizeChange:P,onThumbPositionChange:G,onThumbChange:j,onDragScroll:V}),(h,A)=>k.value?(i(),m(Ba,N({key:0},h.$attrs,{ref:e(s)}),{default:o(()=>[q(h.$slots,"default")]),_:3},16)):(i(),m(Da,N({key:1},h.$attrs,{ref:e(s)}),{default:o(()=>[q(h.$slots,"default")]),_:3},16))}}),dt=B({__name:"ScrollAreaScrollbarAuto",props:{forceMount:{type:Boolean}},setup(u){const t=te(),a=Re(),{forwardRef:s}=ee(),c=I(!1),f=st(()=>{if(t.viewport.value){const l=t.viewport.value.offsetWidth<t.viewport.value.scrollWidth,r=t.viewport.value.offsetHeight<t.viewport.value.scrollHeight;c.value=a.isHorizontal.value?l:r}},10);return ie(()=>f()),re(t.viewport,f),re(t.content,f),(l,r)=>(i(),m(e(Fe),{present:l.forceMount||c.value},{default:o(()=>[d(He,N(l.$attrs,{ref:e(s),"data-state":c.value?"visible":"hidden"}),{default:o(()=>[q(l.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),Ua=B({inheritAttrs:!1,__name:"ScrollAreaScrollbarHover",props:{forceMount:{type:Boolean}},setup(u){const t=te(),{forwardRef:a}=ee();let s;const c=I(!1);function f(){window.clearTimeout(s),c.value=!0}function l(){s=window.setTimeout(()=>{c.value=!1},t.scrollHideDelay.value)}return ie(()=>{const r=t.scrollArea.value;r&&(r.addEventListener("pointerenter",f),r.addEventListener("pointerleave",l))}),ze(()=>{const r=t.scrollArea.value;r&&(window.clearTimeout(s),r.removeEventListener("pointerenter",f),r.removeEventListener("pointerleave",l))}),(r,p)=>(i(),m(e(Fe),{present:r.forceMount||c.value},{default:o(()=>[d(dt,N(r.$attrs,{ref:e(a),"data-state":c.value?"visible":"hidden"}),{default:o(()=>[q(r.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),Fa=B({__name:"ScrollAreaScrollbarScroll",props:{forceMount:{type:Boolean}},setup(u){const t=te(),a=Re(),{forwardRef:s}=ee(),{state:c,dispatch:f}=wt("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});We(r=>{if(c.value==="idle"){const p=window.setTimeout(()=>f("HIDE"),t.scrollHideDelay.value);r(()=>{window.clearTimeout(p)})}});const l=st(()=>f("SCROLL_END"),100);return We(r=>{const p=t.viewport.value,y=a.isHorizontal.value?"scrollLeft":"scrollTop";if(p){let L=p[y];const P=()=>{const C=p[y];L!==C&&(f("SCROLL"),l()),L=C};p.addEventListener("scroll",P),r(()=>{p.removeEventListener("scroll",P)})}}),(r,p)=>(i(),m(e(Fe),{present:r.forceMount||e(c)!=="hidden"},{default:o(()=>[d(He,N(r.$attrs,{ref:e(s)}),{default:o(()=>[q(r.$slots,"default")]),_:3},16)]),_:3},8,["present"]))}}),[Re,Ha]=Ue("ScrollAreaScrollbar"),Oa=B({inheritAttrs:!1,__name:"ScrollAreaScrollbar",props:{orientation:{default:"vertical"},forceMount:{type:Boolean},asChild:{type:Boolean},as:{default:"div"}},setup(u){const t=u,{forwardRef:a}=ee(),s=te(),c=K(()=>t.orientation==="horizontal");Z(c,()=>{c.value?s.onScrollbarXEnabledChange(!0):s.onScrollbarYEnabledChange(!0)},{immediate:!0}),ze(()=>{s.onScrollbarXEnabledChange(!1),s.onScrollbarYEnabledChange(!1)});const{orientation:f,forceMount:l,asChild:r,as:p}=qe(t);return Ha({orientation:f,forceMount:l,isHorizontal:c,as:p,asChild:r}),(y,L)=>e(s).type.value==="hover"?(i(),m(Ua,N({key:0},y.$attrs,{ref:e(a),"force-mount":e(l)}),{default:o(()=>[q(y.$slots,"default")]),_:3},16,["force-mount"])):e(s).type.value==="scroll"?(i(),m(Fa,N({key:1},y.$attrs,{ref:e(a),"force-mount":e(l)}),{default:o(()=>[q(y.$slots,"default")]),_:3},16,["force-mount"])):e(s).type.value==="auto"?(i(),m(dt,N({key:2},y.$attrs,{ref:e(a),"force-mount":e(l)}),{default:o(()=>[q(y.$slots,"default")]),_:3},16,["force-mount"])):e(s).type.value==="always"?(i(),m(He,N({key:3},y.$attrs,{ref:e(a),"data-state":"visible"}),{default:o(()=>[q(y.$slots,"default")]),_:3},16)):S("",!0)}}),Va=B({__name:"ScrollAreaThumb",props:{asChild:{type:Boolean},as:{}},setup(u){const t=u,a=te(),s=Ae();function c(C){const V=C.target.getBoundingClientRect(),G=C.clientX-V.left,j=C.clientY-V.top;s.handleThumbDown(C,{x:G,y:j})}function f(C){s.handleThumbUp(C)}const{forwardRef:l,currentElement:r}=ee(),p=I(),y=K(()=>a.viewport.value);function L(){if(!p.value){const C=Pa(y.value,s.onThumbPositionChange);p.value=C,s.onThumbPositionChange()}}const P=K(()=>s.sizes.value);return Lt(P,()=>{s.onThumbChange(r.value),y.value&&(s.onThumbPositionChange(),y.value.addEventListener("scroll",L))}),ze(()=>{var C;y.value.removeEventListener("scroll",L),(C=a.viewport.value)==null||C.removeEventListener("scroll",L)}),(C,k)=>(i(),m(e(oe),{ref:e(l),"data-state":e(s).hasThumb?"visible":"hidden",style:{width:"var(--reka-scroll-area-thumb-width)",height:"var(--reka-scroll-area-thumb-height)"},"as-child":t.asChild,as:C.as,onPointerdown:c,onPointerup:f},{default:o(()=>[q(C.$slots,"default")]),_:3},8,["data-state","as-child","as"]))}}),Ka=B({__name:"ScrollAreaCornerImpl",setup(u){const t=te(),a=I(0),s=I(0),c=K(()=>!!a.value&&!!s.value);function f(){var p;const r=((p=t.scrollbarX.value)==null?void 0:p.offsetHeight)||0;t.onCornerHeightChange(r),s.value=r}function l(){var p;const r=((p=t.scrollbarY.value)==null?void 0:p.offsetWidth)||0;t.onCornerWidthChange(r),a.value=r}return re(t.scrollbarX.value,f),re(t.scrollbarY.value,l),Z(()=>t.scrollbarX.value,f),Z(()=>t.scrollbarY.value,l),(r,p)=>{var y;return c.value?(i(),m(e(oe),N({key:0,style:{width:`${a.value}px`,height:`${s.value}px`,position:"absolute",right:e(t).dir.value==="ltr"?0:void 0,left:e(t).dir.value==="rtl"?0:void 0,bottom:0}},(y=r.$parent)==null?void 0:y.$props),{default:o(()=>[q(r.$slots,"default")]),_:3},16,["style"])):S("",!0)}}}),Wa=B({__name:"ScrollAreaCorner",props:{asChild:{type:Boolean},as:{}},setup(u){const t=u,{forwardRef:a}=ee(),s=te(),c=K(()=>!!s.scrollbarX.value&&!!s.scrollbarY.value),f=K(()=>s.type.value!=="scroll"&&c.value);return(l,r)=>f.value?(i(),m(Ka,N({key:0},t,{ref:e(a)}),{default:o(()=>[q(l.$slots,"default")]),_:3},16)):S("",!0)}}),Ma={class:"flex justify-center w-full gap-x-6 lg:gap-x-8","aria-label":"Pagination"},Xa={class:"flex gap-2"},ja={class:"sr-only"},Ya={class:"flex min-w-[100px] gap-2 items-center justify-center text-sm font-medium"},Na=["href"],Ga={class:"flex gap-2"},Qa={class:"sr-only"},Ja=B({__name:"EntityListPagination",props:{entityList:{},linksOpenable:{type:Boolean}},emits:["change"],setup(u,{emit:t}){const a=u,s=t;function c(l,r=!1){if(a.linksOpenable&&(l.metaKey||l.ctrlKey||l.shiftKey||l.altKey)){l.stopPropagation();return}const p=l.target.closest("a").href;p&&!r&&(s("change",new URL(p).searchParams.get("page")),l.preventDefault())}function f(l){const r=new URL(a.entityList.meta.first_page_url);return r.searchParams.set("page",String(l)),r.toString()}return(l,r)=>(i(),g("nav",Ma,[z("div",Xa,[d(e(O),{as:l.entityList.meta.prev_page_url?"a":"button",class:"hidden sm:flex",size:"icon",variant:"outline",href:l.entityList.meta.first_page_url,disabled:!l.entityList.meta.prev_page_url,onClick:c},{default:o(()=>[d(e(Ea),{class:"h-4 w-4"})]),_:1},8,["as","href","disabled"]),d(e(O),{as:l.entityList.meta.prev_page_url?"a":"button",size:"icon",variant:"outline",href:l.entityList.meta.prev_page_url,disabled:!l.entityList.meta.prev_page_url,onClick:c},{default:o(()=>[d(e(kt),{class:"h-4 w-4"}),z("span",ja,_(e(R)("sharp::entity_list.pagination.previous")),1)]),_:1},8,["as","href","disabled"])]),z("div",Ya,[l.entityList.meta.last_page?(i(),g(E,{key:0},[z("span",null,_(e(R)("sharp::entity_list.pagination.current").split(":current_page")[0]),1),d(e($t),{"model-value":String(l.entityList.meta.current_page),"onUpdate:modelValue":r[1]||(r[1]=p=>l.$emit("change",p))},{default:o(()=>[d(e(St),{class:"w-10 justify-center [&_svg]:hidden"},{default:o(()=>[$(_(l.entityList.meta.current_page),1)]),_:1}),d(e(Ct),{"align-offset":-22},{default:o(()=>[(i(!0),g(E,null,ne(l.entityList.meta.last_page,p=>(i(),m(e(zt),{value:String(p)},{default:o(()=>[l.linksOpenable?(i(),g("a",{key:0,class:"absolute inset-0",href:f(p),onPointerup:r[0]||(r[0]=y=>c(y,!0))},null,40,Na)):S("",!0),$(" "+_(p),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1},8,["model-value"]),z("span",null,_(e(R)("sharp::entity_list.pagination.current",{last_page:l.entityList.meta.last_page}).split(":current_page")[1]),1)],64)):(i(),g(E,{key:1},[$(_(e(R)("sharp::entity_list.pagination.current_simple").replace(":current_page",l.entityList.meta.current_page+"")),1)],64))]),z("div",Ga,[d(e(O),{as:l.entityList.meta.next_page_url?"a":"button",size:"icon",variant:"outline",href:l.entityList.meta.next_page_url,disabled:!l.entityList.meta.next_page_url,onClick:c},{default:o(()=>[z("span",Qa,_(e(R)("sharp::entity_list.pagination.next")),1),d(e(Et),{class:"h-4 w-4"})]),_:1},8,["as","href","disabled"]),d(e(O),{as:l.entityList.meta.next_page_url?"a":"button",class:D(["hidden sm:flex",l.entityList.meta.last_page_url?"":"invisible"]),size:"icon",variant:"outline",href:l.entityList.meta.last_page_url,disabled:!l.entityList.meta.next_page_url,onClick:c},{default:o(()=>[d(e(za),{class:"h-4 w-4"})]),_:1},8,["as","class","href","disabled"])])]))}}),Te=B({__name:"StateIcon",props:{stateValue:{}},setup(u){return(t,a)=>{var s;return i(),g("div",{class:"relative rounded-full",style:se({"--color":((s=t.stateValue)==null?void 0:s.color)??"black"})},a[0]||(a[0]=[z("div",{class:"h-1.5 w-1.5 rounded-full bg-[var(--color)]"},null,-1)]),4)}}}),Za=B({__name:"Table",props:{class:{},noScroll:{type:Boolean}},setup(u){const t=u;return(a,s)=>(i(),g("div",{class:D(["relative",{"w-full overflow-auto":!a.noScroll}])},[z("table",{class:D(e(x)("w-full caption-bottom text-sm",t.class))},[q(a.$slots,"default")],2)],2))}}),xa=B({__name:"TableBody",props:{class:{}},setup(u){const t=u;return(a,s)=>(i(),g("tbody",{class:D(e(x)("[&_tr:last-child]:border-0",t.class))},[q(a.$slots,"default")],2))}}),de=B({__name:"TableCell",props:{class:{}},setup(u){const t=u;return(a,s)=>(i(),g("td",{class:D(e(x)("px-3 py-4 align-middle [&:has([role=checkbox])]:pr-0 first:pl-4 last:pr-4",t.class))},[q(a.$slots,"default")],2))}}),$e=B({__name:"TableHead",props:{class:{}},setup(u){const t=u;return(a,s)=>(i(),g("th",{class:D(e(x)("h-12 px-3 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t.class))},[q(a.$slots,"default")],2))}}),en=B({__name:"TableHeader",props:{class:{}},setup(u){const t=u;return(a,s)=>(i(),g("thead",{class:D(e(x)("[&_tr]:border-b",t.class))},[q(a.$slots,"default")],2))}}),at=B({__name:"TableRow",props:{class:{}},setup(u){const t=u;return(a,s)=>(i(),g("tr",{class:D(e(x)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t.class))},[q(a.$slots,"default")],2))}}),nt=B({__name:"EntityListSearch",props:{entityList:{},expanded:{type:Boolean},inline:{type:Boolean},disabled:{type:Boolean}},emits:["submit","update:expanded"],setup(u,{emit:t}){var C;const a=u,s=t,c=I(),f=I(),{focused:l}=It(c),{pressed:r}=At({target:c}),p=I(((C=a.entityList.query)==null?void 0:C.search)??"");let y="";Z(l,()=>{var k,V;l.value?(y&&(p.value=y,y=""),r.value?Z(r,()=>{r.value||s("update:expanded",!0)},{once:!0}):s("update:expanded",!0)):r.value||(y=(k=a.entityList.query)!=null&&k.search?"":p.value,p.value=(V=a.entityList.query)==null?void 0:V.search,s("update:expanded",!1))}),Z(()=>a.entityList,()=>{var k;p.value=((k=a.entityList.query)==null?void 0:k.search)??"",s("update:expanded",!1)});function L(){s("update:expanded",!1),s("submit",p.value)}function P(){a.expanded||s("update:expanded",!0)}return(k,V)=>{var G,j;return i(),g("form",{onSubmit:lt(L,["prevent"]),ref_key:"el",ref:c},[z("div",{class:D(["relative z-[1]",[k.inline?"h-8 w-[150px] @5xl/root-card:w-[200px]":""]])},[z("div",{class:D(["top-0 left-0 group flex gap-3",e(x)(k.inline?"absolute h-8":"flex-col",k.inline&&k.expanded?"-mr-[100px]":"")])},[z("div",{class:D(["relative",[k.inline?"":"w-full"]])},[d(e(Rt),{placeholder:e(R)("sharp::action_bar.list.search.placeholder"),modelValue:p.value,"onUpdate:modelValue":V[0]||(V[0]=h=>p.value=h),class:D(e(x)("w-full pl-8 h-9",{"h-8 w-[150px] @5xl/root-card:w-[200px]":k.inline,"sm:!w-[300px]":k.inline&&k.expanded,"pr-8":(G=a.entityList.query)==null?void 0:G.search})),disabled:k.disabled,type:"search",ref_key:"input",ref:f,onInput:P},null,8,["placeholder","modelValue","class","disabled"]),d(e(Pt),{class:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"}),(j=a.entityList.query)!=null&&j.search?(i(),m(e(O),{key:0,type:"button",class:"absolute right-0 top-0 h-full",size:"sm",variant:"ghost",onClick:V[1]||(V[1]=h=>k.$emit("submit",null))},{default:o(()=>[d(e(Tt),{class:"h-4 w-4 text-muted-foreground"})]),_:1})):S("",!0)],2),d(e(O),{type:"submit",class:D(e(x)("h-8 hidden",k.expanded?"inline-flex":"")),size:"sm"},{default:o(()=>[$(_(e(R)("sharp::action_bar.list.search.button")),1)]),_:1},8,["class"])],2)],2)],544)}}}),ft=B({__name:"ScrollBar",props:{orientation:{default:"vertical"},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(u){const t=u,a=K(()=>{const{class:s,...c}=t;return c});return(s,c)=>(i(),m(e(Oa),N(a.value,{class:e(x)("flex touch-none select-none transition-colors",s.orientation==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-px",s.orientation==="horizontal"&&"h-4 flex-col border-t border-t-transparent p-1",t.class)}),{default:o(()=>[d(e(Va),{class:"relative flex-1 rounded-full bg-muted-foreground/50 hover:bg-muted-foreground"},{default:o(()=>c[0]||(c[0]=[z("div",{class:"absolute -inset-1.5 -top-4"},null,-1)])),_:1})]),_:1},16,["class"]))}}),tn=B({__name:"ScrollArea",props:{type:{},dir:{},scrollHideDelay:{},asChild:{type:Boolean},as:{},class:{},touchType:{}},setup(u){const t=u,a=K(()=>{const{class:r,...p}=t;return p}),s=Bt("(hover: none)"),c=I(),{arrivedState:f,measure:l}=Dt(()=>{var r;return(r=c.value)==null?void 0:r.viewportElement});return Z(Ut(()=>{var r;return(r=c.value)==null?void 0:r.viewportElement}).width,qt(()=>{l()},50,!0,!0)),(r,p)=>(i(),m(e(Aa),N(a.value,{type:e(s)?t.touchType:t.type,class:e(x)("group/scroll-area relative overflow-hidden",t.class),"data-scroll-arrived-right":e(f).right?!0:null,"data-scrollbar-x-visible":!e(f).left||!e(f).right?!0:null}),{default:o(()=>[d(e(Ra),{class:"h-full w-full rounded-[inherit]",ref_key:"viewport",ref:c},{default:o(()=>[q(r.$slots,"default")]),_:3},512),q(r.$slots,"scrollbar",{},()=>[d(ft),d(e(Wa))])]),_:3},16,["type","class","data-scroll-arrived-right","data-scrollbar-x-visible"]))}}),an=Mt?window:void 0;function nn(u){var t;const a=fe(u);return(t=a==null?void 0:a.$el)!=null?t:a}function sn(...u){let t,a,s,c;if(typeof u[0]=="string"||Array.isArray(u[0])?([a,s,c]=u,t=an):[t,a,s,c]=u,!t)return Kt;Array.isArray(a)||(a=[a]),Array.isArray(s)||(s=[s]);const f=[],l=()=>{f.forEach(L=>L()),f.length=0},r=(L,P,C,k)=>(L.addEventListener(P,C,k),()=>L.removeEventListener(P,C,k)),p=Z(()=>[nn(t),fe(c)],([L,P])=>{if(l(),!L)return;const C=Wt(P)?{...P}:P;f.push(...a.flatMap(k=>s.map(V=>r(L,k,V,C))))},{immediate:!0,flush:"post"}),y=()=>{p(),l()};return rt(y),y}const ln=B({name:"UseElementBounding",props:["box","as"],setup(u,{slots:t}){const a=I(),s=ot(Ft(a));return()=>{if(t.default)return Ht(u.as||"div",{ref:a},t.default(s))}}});function Be(u){return typeof Window<"u"&&u instanceof Window?u.document.documentElement:typeof Document<"u"&&u instanceof Document?u.documentElement:u}function pt(u){const t=window.getComputedStyle(u);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&u.clientWidth<u.scrollWidth||t.overflowY==="auto"&&u.clientHeight<u.scrollHeight)return!0;{const a=u.parentNode;return!a||a.tagName==="BODY"?!1:pt(a)}}function on(u){const t=u||window.event,a=t.target;return pt(a)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}const De=new WeakMap;function rn(u,t=!1){const a=I(t);let s=null,c="";Z(Vt(u),r=>{const p=Be(fe(r));if(p){const y=p;if(De.get(y)||De.set(y,y.style.overflow),y.style.overflow!=="hidden"&&(c=y.style.overflow),y.style.overflow==="hidden")return a.value=!0;if(a.value)return y.style.overflow="hidden"}},{immediate:!0});const f=()=>{const r=Be(fe(u));!r||a.value||(Me&&(s=sn(r,"touchmove",p=>{on(p)},{passive:!1})),r.style.overflow="hidden",a.value=!0)},l=()=>{const r=Be(fe(u));!r||!a.value||(Me&&(s==null||s()),r.style.overflow=c,De.delete(r),a.value=!1)};return rt(l),K({get(){return a.value},set(r){r?f():l()}})}function un(){let u=!1;const t=I(!1);return(a,s)=>{if(t.value=s.value,u)return;u=!0;const c=rn(a,s.value);Z(t,f=>c.value=f)}}un();const cn=B({name:"UseWindowSize",props:["initialWidth","initialHeight"],setup(u,{slots:t}){const a=ot(Ot(u));return()=>{if(t.default)return t.default(a)}}}),dn={key:0,class:"fixed inset-0 z-[11] bg-black/5"},fn={key:0,class:"container px-4 lg:px-6"},pn={class:"flex flex-wrap md:flex-nowrap gap-y-4 gap-x-2"},hn={class:"flex items-baseline min-w-0"},vn={key:0,class:"mb-4 flex flex-wrap items-center gap-2"},mn={key:1,class:"contents"},yn={class:"flex items-center @2xl/root-card:hidden"},bn={class:"flex flex-col flex-wrap gap-4"},gn=["for"],_n={class:"truncate"},wn={class:"flex justify-center w-10"},Ln={class:"truncate"},kn={key:1,class:"text-muted-foreground"},En=B({__name:"EntityList",props:{entityKey:{},entityList:{},filters:{},commands:{},title:{},inline:{type:Boolean,default:!0},showCreateButton:{type:Boolean,default:!0},showReorderButton:{type:Boolean,default:!0},showSearchField:{type:Boolean,default:!0},showEntityState:{type:Boolean,default:!0},collapsed:{type:Boolean},highlightedInstanceId:{}},emits:["update:query","filter-change","reset","reordering"],setup(u,{emit:t}){const a=u,s=I(),c=t,f=I(null),l=K(()=>!!f.value),r=K(()=>a.entityList.data.filter(n=>{var v;return(v=f.value)==null?void 0:v[a.entityList.instanceId(n)]}));function p(n){f.value={...f.value,...Object.fromEntries(a.entityList.data.map(v=>[a.entityList.instanceId(v),n]))}}function y(){f.value=Object.fromEntries(a.entityList.data.map(n=>[a.entityList.instanceId(n),!1]))}function L(n,v){c("filter-change",n,v)}const P=I(!1);function C(n){c("update:query",{...a.entityList.query,search:n})}function k(){c("reset")}function V(n){c("update:query",{...a.entityList.query,page:n})}function G(n){const v=a.entityList.currentSort===n?a.entityList.currentSortDir==="desc"?a.entityList.config.defaultSort===a.entityList.currentSort?"asc":null:"desc":"asc";c("update:query",{...a.entityList.query,page:1,sort:v?n:null,dir:v||null})}function j(n,v){const{commands:F,entityKey:Q}=a;Pe.post(Y("code16.sharp.api.list.state",{entityKey:Q,instanceId:v}),{value:n}).then(M=>{F.handleCommandResponse(M.data)}).catch(M=>{var ue,ce;const me=(ue=M.response)==null?void 0:ue.data;((ce=M.response)==null?void 0:ce.status)===422&&ba(me.message,{title:R("modals.state.422.title"),isError:!0})})}async function h(n,v){if(n.metaKey||n.ctrlKey||n.shiftKey)return;const{entityKey:F}=a;n.preventDefault(),a.entityList.config.quickCreationForm?await a.commands.send({hasForm:!0},{postCommand:Y("code16.sharp.api.list.command.quick-creation-form.store",{entityKey:v?`${F}:${v.key}`:F}),getForm:Y("code16.sharp.api.list.command.quick-creation-form.create",{entityKey:v?`${F}:${v.key}`:F}),query:a.entityList.query,entityKey:F}):ra.visit(Y("code16.sharp.form.create",{parentUri:pe(),entityKey:v?`${F}:${v.key}`:F}))}async function A(n,v){const{commands:F,entityKey:Q}=a;n.confirmation&&s.value.querySelector("[data-reka-scroll-area-viewport]").scrollTo({left:0,behavior:"smooth"}),await F.send(n,{postCommand:Y("code16.sharp.api.list.command.instance",{entityKey:Q,instanceId:v,commandKey:n.key}),getForm:Y("code16.sharp.api.list.command.instance.form",{entityKey:Q,instanceId:v,commandKey:n.key}),query:a.entityList.query,entityKey:Q,instanceId:v},{highlightElement:()=>{var M;return(M=s.value)==null?void 0:M.querySelector(`[data-instance-row="${v}"]`)}})}async function w(n){const{commands:v,entityKey:F}=a;await v.send(n,{postCommand:Y("code16.sharp.api.list.command.entity",{entityKey:F,commandKey:n.key}),getForm:Y("code16.sharp.api.list.command.entity.form",{entityKey:F,commandKey:n.key}),query:{...a.entityList.query,ids:Object.entries(f.value??{}).filter(([Q,M])=>M).map(([Q,M])=>Q)},entityKey:F}),f.value=null}async function ae(n){const{entityKey:v,entityList:F,commands:Q}=a;s.value.querySelector("[data-reka-scroll-area-viewport]").scrollTo({left:0,behavior:"smooth"}),await ga(F.config.deleteConfirmationText,{highlightElement:()=>{var M;return(M=s.value)==null?void 0:M.querySelector(`[data-instance-row="${n}"]`)}})&&(await Pe.delete(Y("code16.sharp.api.list.delete",{entityKey:v,instanceId:n})),Q.handleCommandResponse({action:"reload"}))}const W=I(null),U=K(()=>!!W.value),he=I(),Oe=Xt(()=>U.value?he.value.$el:null,K({get:()=>W.value??[],set:n=>{W.value=n}}),{animation:150});Z(U,()=>{U.value?Oe.start():Oe.stop(),c("reordering",U.value)});function Ve(){W.value=[...a.entityList.data]}async function vt(){const{entityKey:n,commands:v}=a;await Pe.post(Y("code16.sharp.api.list.reorder",{entityKey:n}),{instances:W.value.map(F=>a.entityList.instanceId(F))}),await v.handleCommandResponse({action:"reload"}),W.value=null}const mt=wa(),ve=K(()=>a.entityList.fields.filter(n=>mt.md?!0:!n.hideOnXS));return Z([he,()=>a.highlightedInstanceId],()=>{var n;if(he.value&&a.highlightedInstanceId){const v=(n=s.value)==null?void 0:n.querySelector(`[data-instance-row="${a.highlightedInstanceId}"] a`);v&&v.focus()}}),(n,v)=>(i(),m(Sa,{commands:n.commands},{default:o(()=>{var F;return[z("div",{ref_key:"el",ref:s},[d(jt,{"enter-active-class":"transition","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:o(()=>[U.value?(i(),g("div",dn)):S("",!0)]),_:1}),(F=n.entityList)!=null&&F.pageAlert?(i(),g("div",fn,[d(Yt,{class:"mb-3","page-alert":n.entityList.pageAlert},null,8,["page-alert"])])):S("",!0),d(oa,{class:D(U.value?"relative z-[12]":"")},{default:o(()=>{var Q,M,me,ue,ce,Ke;return[d(Nt,{class:D(U.value||l.value?"sticky":"data-[overflowing-viewport]:sticky"),collapsed:n.collapsed||!n.entityList},{default:o(()=>{var T,b,le,X;return[z("div",pn,[z("div",hn,[q(n.$slots,"card-header"),n.entityList?(i(),m(e(xe),{key:0,class:D(["hidden @2xl/root-card:block text-xs text-muted-foreground ml-4 mr-2 lg:ml-6 whitespace-nowrap",[n.inline?"lg:mr-9":"lg:mr-5"]])},{default:o(()=>{var H;return[(H=n.entityList.query)!=null&&H.search?(i(),g(E,{key:0},[$(_(e(ye)("sharp::action_bar.list.search.title",n.entityList.count,{count:n.entityList.count,search:n.entityList.query.search})),1)],64)):(i(),g(E,{key:1},[$(_(e(ye)("sharp::action_bar.list.items_count",n.entityList.count,{count:n.entityList.count})),1)],64))]}),_:1},8,["class"])):S("",!0)]),n.entityList?(i(),g(E,{key:0},[n.showReorderButton&&n.entityList.canReorder||n.entityList.canSelect||(T=n.entityList.dropdownEntityCommands(l.value))!=null&&T.flat().length||n.entityList.primaryCommand||n.showCreateButton&&n.entityList.authorizations.create?be((i(),g("div",{key:0,class:D(["ml-auto self-start flex -my-1 justify-end pointer-events-auto gap-2",(n.inline,"")])},[n.showReorderButton&&n.entityList.canReorder&&!l.value?(i(),g(E,{key:0},[U.value?(i(),g(E,{key:0},[d(e(O),{class:"h-8",size:"sm",variant:"outline",onClick:v[0]||(v[0]=H=>W.value=null)},{default:o(()=>[$(_(e(R)("sharp::action_bar.list.reorder_button.cancel")),1)]),_:1}),d(e(O),{class:"h-8",size:"sm",onClick:vt},{default:o(()=>[$(_(e(R)("sharp::action_bar.list.reorder_button.finish")),1)]),_:1})],64)):(i(),m(e(O),{key:1,class:D(["h-8",(b=n.entityList.dropdownEntityCommands(l.value))!=null&&b.flat().length?"max-sm:hidden":""]),size:"sm",variant:"outline",onClick:Ve},{default:o(()=>[$(_(e(R)("sharp::action_bar.list.reorder_button")),1)]),_:1},8,["class"]))],64)):S("",!0),n.entityList.canSelect&&!U.value?(i(),g(E,{key:1},[l.value?(i(),m(e(O),{key:0,class:"h-8",size:"sm",variant:"outline",onClick:v[1]||(v[1]=H=>f.value=null)},{default:o(()=>[$(_(e(R)("sharp::action_bar.list.reorder_button.cancel")),1)]),_:1})):(i(),m(e(O),{key:1,class:D(["h-8",(le=n.entityList.dropdownEntityCommands(l.value))!=null&&le.flat().length?"max-sm:hidden":""]),size:"sm",variant:"outline",onClick:y},{default:o(()=>[$(_(e(R)("sharp::action_bar.list.select_button")),1)]),_:1},8,["class"]))],64)):S("",!0),(X=n.entityList.dropdownEntityCommands(l.value))!=null&&X.flat().length&&!U.value?(i(),m(e(_e),{key:2},{default:o(()=>[d(e(we),{"as-child":""},{default:o(()=>[d(e(O),{class:"h-8",variant:l.value?"default":"outline",size:"sm",disabled:U.value},{default:o(()=>[$(_(e(R)("sharp::entity_list.commands.entity.label"))+" ",1),l.value?(i(),g(E,{key:0},[$(" ("+_(Object.values(f.value).filter(Boolean).length)+" selected) ",1)],64)):S("",!0),d(Qe)]),_:1},8,["variant","disabled"])]),_:1}),d(e(Le),null,{default:o(()=>[n.showReorderButton&&n.entityList.canReorder&&!l.value?(i(),g(E,{key:0},[d(e(ke),{class:"sm:hidden",onClick:Ve},{default:o(()=>[$(_(e(R)("sharp::action_bar.list.reorder_button")),1)]),_:1}),d(e(Se),{class:"sm:hidden"})],64)):S("",!0),n.entityList.canSelect&&!l.value?(i(),g(E,{key:1},[d(e(ke),{class:"sm:hidden",onClick:y},{default:o(()=>[$(_(e(R)("sharp::action_bar.list.select_button")),1)]),_:1}),d(e(Se),{class:"sm:hidden"})],64)):S("",!0),d(Je,{commands:n.entityList.dropdownEntityCommands(l.value),selecting:l.value,onSelect:w},null,8,["commands","selecting"])]),_:1})]),_:1})):S("",!0),n.entityList.primaryCommand&&!U.value&&!l.value?(i(),m(e(O),{key:3,class:"h-8",size:"sm",onClick:v[2]||(v[2]=H=>w(n.entityList.primaryCommand))},{default:o(()=>[$(_(n.entityList.primaryCommand.label),1)]),_:1})):S("",!0),n.showCreateButton&&n.entityList.authorizations.create&&!U.value&&!l.value?(i(),g(E,{key:4},[n.entityList.forms&&Object.values(n.entityList.forms).length?(i(),m(e(_e),{key:0},{default:o(()=>[d(e(we),{"as-child":""},{default:o(()=>[d(e(O),{class:"h-8",size:"sm"},{default:o(()=>[$(_(a.entityList.config.createButtonLabel||e(R)("sharp::action_bar.list.forms_dropdown"))+" ",1),d(Qe,{class:"opacity-75"})]),_:1})]),_:1}),d(e(Le),null,{default:o(()=>[(i(!0),g(E,null,ne(Object.values(n.entityList.forms).filter(H=>!!H.label),H=>(i(),m(e(ke),{as:"a",href:e(Y)("code16.sharp.form.create",{parentUri:e(pe)(),entityKey:`${n.entityKey}:${H.key}`}),onClick:J=>h(J,H)},{default:o(()=>[$(_(H.label),1)]),_:2},1032,["href","onClick"]))),256))]),_:1})]),_:1})):(i(),m(e(O),{key:1,as:"a",class:"h-8 gap-1",size:"sm",disabled:U.value||l.value,href:e(Y)("code16.sharp.form.create",{parentUri:e(pe)(),entityKey:n.entityKey}),onClick:h},{default:o(()=>[$(_(a.entityList.config.createButtonLabel||e(R)("sharp::action_bar.list.create_button")),1)]),_:1},8,["disabled","href"]))],64)):S("",!0)],2)),[[ge,!n.collapsed]]):S("",!0)],64)):S("",!0)])]}),_:3},8,["class","collapsed"]),n.entityList&&(n.showSearchField&&n.entityList.config.searchable||(Q=n.entityList.visibleFilters)!=null&&Q.length)?be((i(),g("div",vn,[n.showSearchField&&n.entityList.config.searchable?(i(),g("div",{key:0,class:D(["self-center pointer-events-auto",{"hidden @2xl/root-card:block":(M=n.entityList.visibleFilters)==null?void 0:M.length}])},[d(nt,{inline:"",expanded:P.value,"onUpdate:expanded":v[3]||(v[3]=T=>P.value=T),"entity-list":n.entityList,disabled:U.value||l.value,onSubmit:C},null,8,["expanded","entity-list","disabled"])],2)):S("",!0),(me=n.entityList.visibleFilters)!=null&&me.length?(i(),g("div",mn,[z("div",yn,[d(e(Gt),null,{default:o(()=>[d(e(La),{"as-child":""},{default:o(()=>[d(e(O),{class:"h-8 gap-1",variant:"outline",disabled:U.value||l.value,size:"sm"},{default:o(()=>[d(e(ka),{class:"h-3.5 w-3.5"}),z("span",null,_(e(R)("sharp::filters.popover_button")),1)]),_:1},8,["disabled"])]),_:1}),d(e(Qt),{onOpenAutoFocus:v[5]||(v[5]=lt(()=>{},["prevent"]))},{default:o(()=>[d(e(Jt),null,{default:o(()=>[d(e(Zt),null,{default:o(()=>[$(_(e(R)("sharp::filters.popover_button"))+" : "+_(n.title),1)]),_:1})]),_:1}),z("div",bn,[n.showSearchField&&n.entityList.config.searchable?(i(),m(nt,{key:0,expanded:P.value,"onUpdate:expanded":v[4]||(v[4]=T=>P.value=T),"entity-list":n.entityList,onSubmit:C},null,8,["expanded","entity-list"])):S("",!0),(i(!0),g(E,null,ne(n.entityList.visibleFilters,T=>(i(),m(Ze,{key:T.key,filter:T,value:n.filters.currentValues[T.key],disabled:U.value,valuated:n.filters.isValuated([T]),onInput:b=>L(T,b)},null,8,["filter","value","disabled","valuated","onInput"]))),128))]),d(e(xt),{class:"flex-row gap-2 mt-2"},{default:o(()=>[d(e(Xe),{"as-child":""},{default:o(()=>{var T;return[d(e(O),{class:"flex-1",variant:"secondary",disabled:!n.filters.isValuated(n.entityList.visibleFilters)&&!((T=n.entityList.query)!=null&&T.search),onClick:k},{default:o(()=>[$(_(e(R)("sharp::filters.reset_all")),1)]),_:1},8,["disabled"])]}),_:1}),d(e(Xe),{"as-child":""},{default:o(()=>[d(e(O),{class:"flex-1"},{default:o(()=>[$(_(e(R)("sharp::filters.dialog.submit")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n.filters.isValuated(n.filters.rootFilters)?(i(),m(e(je),{key:0,class:"ml-2"},{default:o(()=>[$(_(n.filters.valuatedCount(n.filters.rootFilters)),1)]),_:1})):S("",!0),n.entityList?(i(),m(e(xe),{key:1,class:D(["text-xs text-muted-foreground ml-4 mr-2 lg:ml-6 whitespace-nowrap",[n.inline?"lg:mr-9":"lg:mr-5"]])},{default:o(()=>{var T;return[(T=n.entityList.query)!=null&&T.search?(i(),g(E,{key:0},[$(_(e(ye)("sharp::action_bar.list.search.title",n.entityList.count,{count:n.entityList.count,search:n.entityList.query.search})),1)],64)):(i(),g(E,{key:1},[$(_(e(ye)("sharp::action_bar.list.items_count",n.entityList.count,{count:n.entityList.count})),1)],64))]}),_:1},8,["class"])):S("",!0)]),z("div",{class:D(["hidden @2xl/root-card:contents",{"*:opacity-0 *:pointer-events-none":P.value}])},[(i(!0),g(E,null,ne(n.entityList.visibleFilters,T=>(i(),m(Ze,{key:T.key,filter:T,value:n.filters.currentValues[T.key],disabled:U.value||l.value,valuated:n.filters.isValuated([T]),inline:"",onInput:b=>L(T,b)},null,8,["filter","value","disabled","valuated","onInput"]))),128)),n.filters.isValuated(n.entityList.visibleFilters)||(ue=n.entityList.query)!=null&&ue.search?(i(),m(e(O),{key:0,class:"h-8 underline underline-offset-4 -ml-2",variant:"ghost",size:"sm",onClick:k},{default:o(()=>[$(_(e(R)("sharp::filters.reset_all")),1)]),_:1})):S("",!0)],2)])):S("",!0)],512)),[[ge,!n.collapsed]]):S("",!0),n.entityList?(i(),g(E,{key:1},[be(d(e(ea),{class:D(n.entityList.count>0?"pb-2 !px-0":"")},{default:o(()=>{var T;return[((T=n.entityList.data)==null?void 0:T.length)>0?(i(),m(e(tn),{key:0,class:"w-full data-[scrollbar-x-visible]:pb-4",type:"auto","touch-type":"scroll"},{scrollbar:o(()=>[d(e(cn),null,{default:o(({height:b})=>[d(e(ln),{class:"absolute inset-0 pointer-events-none"},{default:o(({bottom:le})=>[d(e(ft),{class:"z-20 [@media(hover:hover)]:bg-background pointer-events-auto will-change-transform",orientation:"horizontal",style:se({transform:`translate3d(0, ${Math.max(0,le-b)*-1}px, 0)`})},null,8,["style"])]),_:2},1024)]),_:1})]),default:o(()=>[d(e(Za),{"no-scroll":"",class:"w-max min-w-full max-w-[768px] md:max-w-[1024px] @3xl:w-full @3xl:max-w-none"},{default:o(()=>[d(e(en),{class:D(ve.value.some(b=>b.label)?"":"collapse [&_tr]:border-0")},{default:o(()=>[d(e(at),{class:"hover:bg-transparent lg:first:*:pl-6 lg:last:*:pr-6"},{default:o(()=>[l.value?(i(),m(e($e),{key:0},{default:o(()=>[v[6]||(v[6]=z("span",{class:"sr-only"},"Select...",-1)),d(e(ta),null,{default:o(()=>[d(e(aa),{"delay-duration":0},{default:o(()=>[d(e(na),{"as-child":""},{default:o(()=>[d(e(Ye),{"model-value":r.value.length===n.entityList.data.length?!0:r.value.length>0?"indeterminate":!1,"onUpdate:modelValue":p,"aria-label":e(R)("sharp::entity_list.select_all_in_page_checkbox.tooltip.select")},null,8,["model-value","aria-label"])]),_:1}),d(e(sa),{side:"top","side-offset":10},{default:o(()=>[r.value.length===n.entityList.data.length?(i(),g(E,{key:0},[$(_(e(R)("sharp::entity_list.select_all_in_page_checkbox.tooltip.unselect")),1)],64)):(i(),g(E,{key:1},[$(_(e(R)("sharp::entity_list.select_all_in_page_checkbox.tooltip.select")),1)],64))]),_:1})]),_:1})]),_:1})]),_:1})):S("",!0),(i(!0),g(E,null,ne(ve.value,(b,le)=>(i(),m(e($e),{key:b.key,class:"max-w-[70cqw] md:w-[var(--width,auto)]",style:se({"--width":b.width==="fill"?100/ve.value.length+"%":b.width?b.width:b.type==="state"?0:null})},{default:o(()=>[b.sortable?(i(),m(e(O),{key:0,variant:"ghost",size:"sm",class:"-ml-3 h-8 data-[state=open]:bg-accent",onClick:X=>G(b.key)},{default:o(()=>[z("span",null,_(b.label),1),n.entityList.currentSort===b.key?(i(),g(E,{key:0},[n.entityList.currentSortDir==="desc"?(i(),m(e(Ca),{key:0,class:"ml-2 h-3.5 w-3.5"})):n.entityList.currentSortDir==="asc"?(i(),m(e($a),{key:1,class:"ml-2 h-3.5 w-3.5"})):S("",!0)],64)):(i(),m(e(ia),{key:1,class:"ml-2 h-3.5 w-3.5"}))]),_:2},1032,["onClick"])):(i(),g(E,{key:1},[$(_(b.label),1)],64))]),_:2},1032,["style"]))),128)),!U.value&&!l.value&&n.entityList.data.some(b=>n.entityList.instanceHasActions(b,n.showEntityState))?(i(),m(e($e),{key:1,class:"w-2"},{default:o(()=>v[7]||(v[7]=[z("span",{class:"sr-only"},"Edit",-1)])),_:1})):S("",!0),U.value?(i(),m(e($e),{key:2},{default:o(()=>v[8]||(v[8]=[z("span",{class:"sr-only"},"Select...",-1)])),_:1})):S("",!0)]),_:1})]),_:1},8,["class"]),d(e(xa),{class:"group",ref_key:"sortableTableBody",ref:he},{default:o(()=>[(i(!0),g(E,null,ne(W.value??n.entityList.data,(b,le)=>(i(),m(e(at),{key:n.entityList.instanceId(b),class:D(e(x)("group/row relative hover:bg-transparent has-[[data-row-action]:hover]:bg-muted/50 has-[[aria-expanded=true]]:bg-muted/50 lg:first:*:pl-6 lg:last:*:pr-6",U.value?"cursor-move hover:bg-muted/50 group-[:has(.sortable-chosen)]:bg-background [&.sortable-chosen]:transition-none":"")),"data-instance-row":n.entityList.instanceId(b),"data-highlighted":a.highlightedInstanceId&&a.highlightedInstanceId==n.entityList.instanceId(b)?!0:null},{default:o(()=>[l.value&&f.value?(i(),m(e(de),{key:0},{default:o(()=>[d(e(Ye),{class:"block",id:`check-${n.entityKey}-${n.entityList.instanceId(b)}`,"model-value":f.value[n.entityList.instanceId(b)],"onUpdate:modelValue":X=>f.value[n.entityList.instanceId(b)]=X},null,8,["id","model-value","onUpdate:modelValue"]),z("label",{class:"absolute inset-0 z-20","data-row-action":"",for:`check-${n.entityKey}-${n.entityList.instanceId(b)}`},v[9]||(v[9]=[z("span",{class:"sr-only"},"Select",-1)]),8,gn)]),_:2},1024)):S("",!0),(i(!0),g(E,null,ne(ve.value,(X,H)=>(i(),g(E,{key:X.key},[X.type==="state"&&n.entityList.config.state&&n.showEntityState?(i(),m(e(de),{key:0,class:"max-w-[70cqw]"},{default:o(()=>[d(e(_e),null,{default:o(()=>[d(e(we),{"as-child":""},{default:o(()=>[d(e(O),{class:"relative disabled:opacity-100 -mx-3",variant:"ghost",size:"sm",disabled:!n.entityList.instanceCanUpdateState(b)},{default:o(()=>[d(e(je),{variant:"outline"},{default:o(()=>{var J;return[d(Te,{class:"-ml-0.5 mr-1.5","state-value":n.entityList.instanceStateValue(b)},null,8,["state-value"]),$(" "+_((J=n.entityList.instanceStateValue(b))==null?void 0:J.label),1)]}),_:2},1024)]),_:2},1032,["disabled"])]),_:2},1024),d(e(Le),{align:"start","align-offset":-16},{default:o(()=>[(i(!0),g(E,null,ne(n.entityList.config.state.values,J=>(i(),m(e(Ne),{key:J.value,"model-value":J.value==n.entityList.instanceState(b),"onUpdate:modelValue":yt=>yt&&j(J.value,n.entityList.instanceId(b))},{default:o(()=>[d(Te,{class:"mr-1.5","state-value":J},null,8,["state-value"]),z("span",_n,_(J.label),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)):(i(),m(e(de),{key:1,class:"max-w-[70cqw]"},{default:o(()=>[X.html&&typeof b[X.key]=="string"?(i(),m(ua,{key:0,class:D(["break-words [&_a]:relative [&_a]:z-10",{"[&_a]:pointer-events-none":l.value||U.value}]),html:b[X.key]},null,8,["class","html"])):(i(),g(E,{key:1},[$(_(b[X.key]),1)],64)),H===0&&n.entityList.instanceUrl(b)&&!l.value&&!U.value?(i(),m(e(ca),{key:2,class:"absolute inset-0 ring-ring ring-inset focus-visible:outline-none focus-visible:ring-2 focus:group-data-[highlighted]/row:ring-2","data-row-action":"",href:n.entityList.instanceUrl(b)},null,8,["href"])):S("",!0)]),_:2},1024))],64))),128)),U.value?(i(),m(e(de),{key:1,class:"w-0 @5xl:pl-4"},{default:o(()=>[z("div",wn,[d(e(da),{class:"w-4 h-4 opacity-50"})])]),_:1})):S("",!0),!U.value&&!l.value&&n.entityList.instanceHasActions(b,n.showEntityState)?(i(),m(e(de),{key:2,class:"sticky bg-background pl-1 -right-3 z-10 group-data-[scroll-arrived-right=true]/scroll-area:bg-transparent @5xl:pl-4 @5xl:bg-transparent"},{default:o(()=>[v[10]||(v[10]=z("div",{class:"absolute inset-0 -left-2 overflow-hidden","aria-hidden":"true"},null,-1)),v[11]||(v[11]=z("div",{class:"absolute inset-0 -left-4 overflow-hidden pointer-events-none","aria-hidden":"true"},[z("div",{class:"absolute inset-0 left-4 shadow-l-xl dark:border-l shadow-border transition-opacity group-data-[scroll-arrived-right=true]/scroll-area:opacity-0 @5xl:opacity-0","aria-hidden":"true"})],-1)),d(e(_e),null,{default:o(()=>[d(e(we),{"as-child":""},{default:o(()=>[d(e(O),{class:"[@media(hover:hover)]:pointer-events-auto relative",variant:"ghost",size:"icon"},{default:o(()=>[d(e(fa),{class:"w-4 h-4"})]),_:1})]),_:1}),d(e(Le),{side:"bottom",align:"center"},{default:o(()=>{var X;return[n.entityList.config.state&&n.showEntityState&&n.entityList.instanceCanUpdateState(b)?(i(),g(E,{key:0},[d(e(pa),null,{default:o(()=>[d(e(ha),null,{default:o(()=>[d(e(va),null,{default:o(()=>[$(_(e(R)("sharp::modals.entity_state.edit.title")),1)]),_:1}),d(e(ma),null,{default:o(()=>[d(e(ya),null,{default:o(()=>[(i(!0),g(E,null,ne(n.entityList.config.state.values,H=>(i(),m(e(Ne),{key:H.value,"model-value":H.value==n.entityList.instanceState(b),"onUpdate:modelValue":J=>J&&j(H.value,n.entityList.instanceId(b))},{default:o(()=>[d(Te,{class:"mr-1.5","state-value":H},null,8,["state-value"]),z("span",Ln,_(H.label),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),d(e(Se),{class:"last:hidden"})],64)):S("",!0),d(Je,{commands:n.entityList.instanceCommands(b),onSelect:H=>A(H,n.entityList.instanceId(b))},null,8,["commands","onSelect"]),!n.entityList.config.deleteHidden&&n.entityList.instanceCanDelete(b)?(i(),g(E,{key:1},[(X=n.entityList.instanceCommands(b))!=null&&X.flat().length?(i(),m(e(Se),{key:0,class:"first:hidden"})):S("",!0),d(e(ke),{class:"text-destructive",onClick:H=>ae(n.entityList.instanceId(b))},{default:o(()=>[$(_(e(R)("sharp::action_bar.form.delete_button")),1)]),_:2},1032,["onClick"])],64)):S("",!0)]}),_:2},1024)]),_:2},1024)]),_:2},1024)):S("",!0)]),_:2},1032,["class","data-instance-row","data-highlighted"]))),128))]),_:1},512)]),_:1})]),_:1})):(i(),g("div",kn,_(e(R)("sharp::entity_list.empty_text")),1))]}),_:1},8,["class"]),[[ge,!n.collapsed]]),(ce=n.entityList.meta)!=null&&ce.prev_page_url||(Ke=n.entityList.meta)!=null&&Ke.next_page_url?be((i(),m(e(la),{key:0,class:"px-4 pt-4 lg:px-6"},{default:o(()=>[d(Ja,{"entity-list":n.entityList,"links-openable":!n.inline,onChange:V},null,8,["entity-list","links-openable"])]),_:1},512)),[[ge,!n.collapsed]]):S("",!0)],64)):S("",!0)]}),_:3},8,["class"])],512)]}),_:3},8,["commands"]))}});class ht{constructor(t,a,s,c){Object.assign(this,t),this.entityKey=a,this.hiddenFilters=s,this.hiddenCommands=c}toData(){return Object.fromEntries(Object.entries({authorizations:this.authorizations,config:this.config,data:this.data,fields:this.fields,forms:this.forms,meta:this.meta,pageAlert:this.pageAlert,query:this.query,filterValues:this.filterValues,title:this.title}).map(([t,a])=>[t,_a(a)]))}get count(){var t;return((t=this.meta)==null?void 0:t.total)??this.data.length}get currentSort(){var t;return((t=this.query)==null?void 0:t.sort)??this.config.defaultSort}get currentSortDir(){var t;return((t=this.query)==null?void 0:t.dir)??this.config.defaultSortDir}get visibleFilters(){var t,a;return this.hiddenFilters?(t=this.config.filters)==null?void 0:t._root.filter(s=>!(s.key in this.hiddenFilters)):(a=this.config.filters)==null?void 0:a._root}get visibleCommands(){var t,a,s,c;return{instance:(a=(t=this.config.commands)==null?void 0:t.instance)==null?void 0:a.map(f=>f.filter(l=>{var r,p;return!((p=(r=this.hiddenCommands)==null?void 0:r.instance)!=null&&p.includes(l.key))})),entity:(c=(s=this.config.commands)==null?void 0:s.entity)==null?void 0:c.map(f=>f.filter(l=>{var r,p;return!((p=(r=this.hiddenCommands)==null?void 0:r.entity)!=null&&p.includes(l.key))}))}}get allowedEntityCommands(){var t;return((t=this.visibleCommands.entity)==null?void 0:t.map(a=>a.filter(s=>s.authorization)))??[]}get primaryCommand(){return this.allowedEntityCommands.flat().find(t=>t.primary)}get canSelect(){return this.allowedEntityCommands.flat().some(t=>t.instanceSelection)}get canReorder(){return this.config.reorderable&&this.authorizations.reorder&&this.data.length>1}withRefreshedItems(t){return this.data=this.data.map(a=>t.find(s=>this.instanceId(s)===this.instanceId(a))??a),new ht(this,this.entityKey)}dropdownEntityCommands(t){return this.allowedEntityCommands.map(a=>a.filter(s=>t?!!s.instanceSelection:!s.primary))}instanceId(t){return t[this.config.instanceIdAttribute]}instanceUrl(t){const a=this.entityKey,s=this.instanceId(t);if(!this.authorizations.view.includes(s))return null;const c=this.forms&&Object.values(this.forms).find(f=>f.instances.includes(s));return this.config.hasShowPage?Y("code16.sharp.show.show",{parentUri:pe(),entityKey:c?`${a}:${c.key}`:a,instanceId:s}):Y("code16.sharp.form.edit",{parentUri:pe(),entityKey:c?`${a}:${c.key}`:a,instanceId:s})}instanceState(t){return this.config.state?t[this.config.state.attribute]:null}instanceStateValue(t){var a;return(a=this.config.state)==null?void 0:a.values.find(s=>s.value===this.instanceState(t))}instanceCanUpdateState(t){return Array.isArray(this.config.state.authorization)?this.config.state.authorization.includes(this.instanceId(t)):!!this.config.state.authorization}instanceCanDelete(t){var a;return Array.isArray(this.authorizations.delete)?(a=this.authorizations.delete)==null?void 0:a.includes(this.instanceId(t)):!!this.authorizations.delete}instanceCommands(t){var a,s;return(s=(a=this.visibleCommands)==null?void 0:a.instance)==null?void 0:s.map(c=>c.filter(f=>Array.isArray(f.authorization)?f.authorization.includes(this.instanceId(t)):f.authorization))}instanceHasActions(t,a){var s;return((s=this.instanceCommands(t))==null?void 0:s.flat().length)>0||this.config.state&&a&&this.instanceCanUpdateState(t)||!this.config.deleteHidden&&this.instanceCanDelete(t)}}function zn(){var a,s;const u=(a=Ge().props.query)==null?void 0:a.highlighted_entity_key,t=(s=Ge().props.query)==null?void 0:s.highlighted_instance_id;return{highlightedEntityKey:u,highlightedInstanceId:t}}export{ht as E,En as _,Te as a,zn as u};
