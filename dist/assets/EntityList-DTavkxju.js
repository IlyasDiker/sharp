import{aX as fe,d as B,aY as at,aZ as x,n as st,a_ as re,o as r,c as v,w as o,p as A,q as W,u as e,P as le,ai as R,a$ as Pe,b0 as nt,al as oe,v as Re,b1 as lt,z as _,i as S,a as c,b as P,F as z,b2 as ot,b3 as we,b4 as ie,x as F,b5 as Ye,b6 as Te,b7 as rt,ax as Be,ao as se,h as C,b8 as it,b9 as ut,ba as ct,j as D,bb as dt,t as k,_ as I,B as pt,E as ft,G as ae,A as ht,bc as vt,U as q,H as mt,y as N,bd as yt,be as bt,l as gt,bf as _t,bg as wt,m as je,bh as kt,bi as St,bj as Ct,bk as Lt,bl as $t,bm as Et,bn as zt,aE as Pt,ar as he,at as Rt,as as ve,au as me,W as $e,r as G,az as pe,aq as Tt,O as At,bo as Ie,aP as ye,aV as be,bp as Bt,bq as It,br as Dt,bs as Ut,bt as qt,bu as De,X as Ue,Q as Ht,bv as Vt,bw as Ot,R as Ft,aR as Kt,aB as Ee,bx as Wt,aM as qe,aC as Xt,J as Mt,aO as He,by as Yt,bz as jt,aG as Nt,aH as xt,aI as Gt,aJ as Jt,aK as Qt,aL as Ve,aW as Zt,aN as ea}from"./sharp-BX2sk5Vp.js";import{a as Oe,C as ta,b as aa,c as Fe,_ as sa}from"./CommandDropdownItems.vue_vue_type_script_setup_true_lang-lZ5zSGOB.js";import{_ as na}from"./CardDescription.vue_vue_type_script_setup_true_lang-CsQTt4KC.js";/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=fe("ArrowDownIcon",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=fe("ArrowUpIcon",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=fe("ChevronsLeftIcon",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=fe("ChevronsRightIcon",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=fe("FilterIcon",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),ca=B({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(f){const t=f,a=at(),{forwardRef:n,currentElement:i}=x();return a.contentId||(a.contentId=st(void 0,"reka-dialog-content")),re(()=>{a.triggerElement.value=i.value}),(d,l)=>(r(),v(e(le),W(t,{ref:e(n),type:d.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":e(a).open.value||!1,"aria-controls":e(a).open.value?e(a).contentId:void 0,"data-state":e(a).open.value?"open":"closed",onClick:e(a).onOpenToggle}),{default:o(()=>[A(d.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","onClick"]))}}),[J,da]=Re("ScrollAreaRoot"),pa=B({__name:"ScrollAreaRoot",props:{type:{default:"hover"},dir:{},scrollHideDelay:{default:600},asChild:{type:Boolean},as:{}},setup(f,{expose:t}){const a=f,n=R(0),i=R(0),d=R(),l=R(),u=R(),p=R(),g=R(!1),$=R(!1),{type:O,dir:E,scrollHideDelay:L}=Pe(a),H=nt(E);function X(){var w;(w=d.value)==null||w.scrollTo({top:0})}function Y(){var w;(w=d.value)==null||w.scrollTo({top:0,left:0})}t({viewport:d,scrollTop:X,scrollTopLeft:Y});const{forwardRef:h,currentElement:m}=x();return da({type:O,dir:H,scrollHideDelay:L,scrollArea:m,viewport:d,onViewportChange:w=>{d.value=w||void 0},content:l,onContentChange:w=>{l.value=w},scrollbarX:u,scrollbarXEnabled:g,scrollbarY:p,scrollbarYEnabled:$,onScrollbarXChange:w=>{u.value=w||void 0},onScrollbarYChange:w=>{p.value=w||void 0},onScrollbarXEnabledChange:w=>{g.value=w},onScrollbarYEnabledChange:w=>{$.value=w},onCornerWidthChange:w=>{n.value=w},onCornerHeightChange:w=>{i.value=w}}),(w,Q)=>(r(),v(e(le),{ref:e(h),"as-child":a.asChild,as:w.as,dir:e(H),style:oe({position:"relative","--reka-scroll-area-corner-width":`${n.value}px`,"--reka-scroll-area-corner-height":`${i.value}px`})},{default:o(()=>[A(w.$slots,"default")]),_:3},8,["as-child","as","dir","style"]))}}),fa=B({inheritAttrs:!1,__name:"ScrollAreaViewport",props:{nonce:{},asChild:{type:Boolean},as:{}},setup(f,{expose:t}){const a=f,{nonce:n}=Pe(a),i=lt(n),d=J(),l=R();re(()=>{d.onViewportChange(l.value),d.onContentChange(p.value)}),t({viewportElement:l});const{forwardRef:u,currentElement:p}=x();return(g,$)=>(r(),_(z,null,[S("div",W({ref_key:"viewportElement",ref:l,"data-reka-scroll-area-viewport":"",style:{overflowX:e(d).scrollbarXEnabled.value?"scroll":"hidden",overflowY:e(d).scrollbarYEnabled.value?"scroll":"hidden"}},g.$attrs,{tabindex:0}),[c(e(le),{ref:e(u),style:oe({minWidth:e(d).scrollbarXEnabled.value?"fit-content":void 0}),"as-child":a.asChild,as:g.as},{default:o(()=>[A(g.$slots,"default")]),_:3},8,["style","as-child","as"])],16),c(e(le),{as:"style",nonce:e(i)},{default:o(()=>$[0]||($[0]=[P(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-reka-scroll-area-viewport] { scrollbar-width:none; -ms-overflow-style:none; -webkit-overflow-scrolling:touch; } [data-reka-scroll-area-viewport]::-webkit-scrollbar { display:none; } ")])),_:1},8,["nonce"])],64))}});function Ne(f,t){return a=>{if(f[0]===f[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(f[1]-f[0]);return t[0]+n*(a-f[0])}}function ke(f){const t=xe(f.viewport,f.content),a=f.scrollbar.paddingStart+f.scrollbar.paddingEnd,n=(f.scrollbar.size-a)*t;return Math.max(n,18)}function xe(f,t){const a=f/t;return Number.isNaN(a)?0:a}function ha(f,t=()=>{}){let a={left:f.scrollLeft,top:f.scrollTop},n=0;return function i(){const d={left:f.scrollLeft,top:f.scrollTop},l=a.left!==d.left,u=a.top!==d.top;(l||u)&&t(),a=d,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)}function Ke(f,t,a="ltr"){const n=ke(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,d=t.scrollbar.size-i,l=t.content-t.viewport,u=d-n,p=a==="ltr"?[0,l]:[l*-1,0],g=ot(f,p[0],p[1]);return Ne([0,l],[0,u])(g)}function ge(f){return f?Number.parseInt(f,10):0}function va(f,t,a,n="ltr"){const i=ke(a),d=i/2,l=t||d,u=i-l,p=a.scrollbar.paddingStart+l,g=a.scrollbar.size-a.scrollbar.paddingEnd-u,$=a.content-a.viewport,O=n==="ltr"?[0,$]:[$*-1,0];return Ne([p,g],O)(f)}function We(f,t){return f>0&&f<t}const Ge=B({__name:"ScrollAreaScrollbarImpl",props:{isHorizontal:{type:Boolean}},emits:["onDragScroll","onWheelScroll","onThumbPointerDown"],setup(f,{emit:t}){const a=f,n=t,i=J(),d=Se(),l=Ce(),{forwardRef:u,currentElement:p}=x(),g=R(""),$=R();function O(h){var m,w;if($.value){const Q=h.clientX-((m=$.value)==null?void 0:m.left),te=h.clientY-((w=$.value)==null?void 0:w.top);n("onDragScroll",{x:Q,y:te})}}function E(h){h.button===0&&(h.target.setPointerCapture(h.pointerId),$.value=p.value.getBoundingClientRect(),g.value=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",i.viewport&&(i.viewport.value.style.scrollBehavior="auto"),O(h))}function L(h){O(h)}function H(h){const m=h.target;m.hasPointerCapture(h.pointerId)&&m.releasePointerCapture(h.pointerId),document.body.style.webkitUserSelect=g.value,i.viewport&&(i.viewport.value.style.scrollBehavior=""),$.value=void 0}function X(h){var te;const m=h.target,w=(te=p.value)==null?void 0:te.contains(m),Q=d.sizes.value.content-d.sizes.value.viewport;w&&d.handleWheelScroll(h,Q)}re(()=>{document.addEventListener("wheel",X,{passive:!1})}),we(()=>{document.removeEventListener("wheel",X)});function Y(){var h,m,w,Q,te;p.value&&(a.isHorizontal?d.handleSizeChange({content:((h=i.viewport.value)==null?void 0:h.scrollWidth)??0,viewport:((m=i.viewport.value)==null?void 0:m.offsetWidth)??0,scrollbar:{size:p.value.clientWidth??0,paddingStart:ge(getComputedStyle(p.value).paddingLeft),paddingEnd:ge(getComputedStyle(p.value).paddingRight)}}):d.handleSizeChange({content:((w=i.viewport.value)==null?void 0:w.scrollHeight)??0,viewport:((Q=i.viewport.value)==null?void 0:Q.offsetHeight)??0,scrollbar:{size:((te=p.value)==null?void 0:te.clientHeight)??0,paddingStart:ge(getComputedStyle(p.value).paddingLeft),paddingEnd:ge(getComputedStyle(p.value).paddingRight)}}))}return ie(p,Y),ie(i.content,Y),(h,m)=>(r(),v(e(le),{ref:e(u),style:{position:"absolute"},"data-scrollbarimpl":"",as:e(l).as.value,"as-child":e(l).asChild.value,onPointerdown:E,onPointermove:L,onPointerup:H},{default:o(()=>[A(h.$slots,"default")]),_:3},8,["as","as-child"]))}}),ma=B({__name:"ScrollAreaScrollbarX",setup(f){const t=J(),a=Se(),{forwardRef:n,currentElement:i}=x();re(()=>{i.value&&t.onScrollbarXChange(i.value)});const d=F(()=>a.sizes.value);return(l,u)=>(r(),v(Ge,{ref:e(n),"is-horizontal":!0,"data-orientation":"horizontal",style:oe({bottom:0,left:e(t).dir.value==="rtl"?"var(--reka-scroll-area-corner-width)":0,right:e(t).dir.value==="ltr"?"var(--reka-scroll-area-corner-width)":0,"--reka-scroll-area-thumb-width":d.value?`${e(ke)(d.value)}px`:void 0}),onOnDragScroll:u[0]||(u[0]=p=>e(a).onDragScroll(p.x))},{default:o(()=>[A(l.$slots,"default")]),_:3},8,["style"]))}}),ya=B({__name:"ScrollAreaScrollbarY",setup(f){const t=J(),a=Se(),{forwardRef:n,currentElement:i}=x();re(()=>{i.value&&t.onScrollbarYChange(i.value)});const d=F(()=>a.sizes.value);return(l,u)=>(r(),v(Ge,{ref:e(n),"is-horizontal":!1,"data-orientation":"vertical",style:oe({top:0,right:e(t).dir.value==="ltr"?0:void 0,left:e(t).dir.value==="rtl"?0:void 0,bottom:"var(--reka-scroll-area-corner-height)","--reka-scroll-area-thumb-height":d.value?`${e(ke)(d.value)}px`:void 0}),onOnDragScroll:u[0]||(u[0]=p=>e(a).onDragScroll(p.y))},{default:o(()=>[A(l.$slots,"default")]),_:3},8,["style"]))}}),[Se,ba]=Re("ScrollAreaScrollbarVisible"),Ae=B({__name:"ScrollAreaScrollbarVisible",setup(f){const t=J(),a=Ce(),{forwardRef:n}=x(),i=R({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=F(()=>{const h=xe(i.value.viewport,i.value.content);return h>0&&h<1}),l=R(),u=R(0);function p(h,m){if(L.value){const w=t.viewport.value.scrollLeft+h.deltaY;t.viewport.value.scrollLeft=w,We(w,m)&&h.preventDefault()}else{const w=t.viewport.value.scrollTop+h.deltaY;t.viewport.value.scrollTop=w,We(w,m)&&h.preventDefault()}}function g(h,m){L.value?u.value=m.x:u.value=m.y}function $(h){u.value=0}function O(h){i.value=h}function E(h,m){return va(h,u.value,i.value,m)}const L=F(()=>a.isHorizontal.value);function H(h){L.value?t.viewport.value.scrollLeft=E(h,t.dir.value):t.viewport.value.scrollTop=E(h)}function X(){if(L.value){if(t.viewport.value&&l.value){const h=t.viewport.value.scrollLeft,m=Ke(h,i.value,t.dir.value);l.value.style.transform=`translate3d(${m}px, 0, 0)`}}else if(t.viewport.value&&l.value){const h=t.viewport.value.scrollTop,m=Ke(h,i.value);l.value.style.transform=`translate3d(0, ${m}px, 0)`}}function Y(h){l.value=h}return ba({sizes:i,hasThumb:d,handleWheelScroll:p,handleThumbDown:g,handleThumbUp:$,handleSizeChange:O,onThumbPositionChange:X,onThumbChange:Y,onDragScroll:H}),(h,m)=>L.value?(r(),v(ma,W({key:0},h.$attrs,{ref:e(n)}),{default:o(()=>[A(h.$slots,"default")]),_:3},16)):(r(),v(ya,W({key:1},h.$attrs,{ref:e(n)}),{default:o(()=>[A(h.$slots,"default")]),_:3},16))}}),Je=B({__name:"ScrollAreaScrollbarAuto",props:{forceMount:{type:Boolean}},setup(f){const t=J(),a=Ce(),{forwardRef:n}=x(),i=R(!1),d=Ye(()=>{if(t.viewport.value){const l=t.viewport.value.offsetWidth<t.viewport.value.scrollWidth,u=t.viewport.value.offsetHeight<t.viewport.value.scrollHeight;i.value=a.isHorizontal.value?l:u}},10);return re(()=>d()),ie(t.viewport,d),ie(t.content,d),(l,u)=>(r(),v(e(Te),{present:l.forceMount||i.value},{default:o(()=>[c(Ae,W(l.$attrs,{ref:e(n),"data-state":i.value?"visible":"hidden"}),{default:o(()=>[A(l.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),ga=B({inheritAttrs:!1,__name:"ScrollAreaScrollbarHover",props:{forceMount:{type:Boolean}},setup(f){const t=J(),{forwardRef:a}=x();let n;const i=R(!1);function d(){window.clearTimeout(n),i.value=!0}function l(){n=window.setTimeout(()=>{i.value=!1},t.scrollHideDelay.value)}return re(()=>{const u=t.scrollArea.value;u&&(u.addEventListener("pointerenter",d),u.addEventListener("pointerleave",l))}),we(()=>{const u=t.scrollArea.value;u&&(window.clearTimeout(n),u.removeEventListener("pointerenter",d),u.removeEventListener("pointerleave",l))}),(u,p)=>(r(),v(e(Te),{present:u.forceMount||i.value},{default:o(()=>[c(Je,W(u.$attrs,{ref:e(a),"data-state":i.value?"visible":"hidden"}),{default:o(()=>[A(u.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),_a=B({__name:"ScrollAreaScrollbarScroll",props:{forceMount:{type:Boolean}},setup(f){const t=J(),a=Ce(),{forwardRef:n}=x(),{state:i,dispatch:d}=rt("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});Be(u=>{if(i.value==="idle"){const p=window.setTimeout(()=>d("HIDE"),t.scrollHideDelay.value);u(()=>{window.clearTimeout(p)})}});const l=Ye(()=>d("SCROLL_END"),100);return Be(u=>{const p=t.viewport.value,g=a.isHorizontal.value?"scrollLeft":"scrollTop";if(p){let $=p[g];const O=()=>{const E=p[g];$!==E&&(d("SCROLL"),l()),$=E};p.addEventListener("scroll",O),u(()=>{p.removeEventListener("scroll",O)})}}),(u,p)=>(r(),v(e(Te),{present:u.forceMount||e(i)!=="hidden"},{default:o(()=>[c(Ae,W(u.$attrs,{ref:e(n)}),{default:o(()=>[A(u.$slots,"default")]),_:3},16)]),_:3},8,["present"]))}}),[Ce,wa]=Re("ScrollAreaScrollbar"),ka=B({inheritAttrs:!1,__name:"ScrollAreaScrollbar",props:{orientation:{default:"vertical"},forceMount:{type:Boolean},asChild:{type:Boolean},as:{default:"div"}},setup(f){const t=f,{forwardRef:a}=x(),n=J(),i=F(()=>t.orientation==="horizontal");se(i,()=>{i.value?n.onScrollbarXEnabledChange(!0):n.onScrollbarYEnabledChange(!0)},{immediate:!0}),we(()=>{n.onScrollbarXEnabledChange(!1),n.onScrollbarYEnabledChange(!1)});const{orientation:d,forceMount:l,asChild:u,as:p}=Pe(t);return wa({orientation:d,forceMount:l,isHorizontal:i,as:p,asChild:u}),(g,$)=>e(n).type.value==="hover"?(r(),v(ga,W({key:0},g.$attrs,{ref:e(a),"force-mount":e(l)}),{default:o(()=>[A(g.$slots,"default")]),_:3},16,["force-mount"])):e(n).type.value==="scroll"?(r(),v(_a,W({key:1},g.$attrs,{ref:e(a),"force-mount":e(l)}),{default:o(()=>[A(g.$slots,"default")]),_:3},16,["force-mount"])):e(n).type.value==="auto"?(r(),v(Je,W({key:2},g.$attrs,{ref:e(a),"force-mount":e(l)}),{default:o(()=>[A(g.$slots,"default")]),_:3},16,["force-mount"])):e(n).type.value==="always"?(r(),v(Ae,W({key:3},g.$attrs,{ref:e(a),"data-state":"visible"}),{default:o(()=>[A(g.$slots,"default")]),_:3},16)):C("",!0)}}),Sa=B({__name:"ScrollAreaThumb",props:{asChild:{type:Boolean},as:{}},setup(f){const t=f,a=J(),n=Se();function i(E){const H=E.target.getBoundingClientRect(),X=E.clientX-H.left,Y=E.clientY-H.top;n.handleThumbDown(E,{x:X,y:Y})}function d(E){n.handleThumbUp(E)}const{forwardRef:l,currentElement:u}=x(),p=R(),g=F(()=>a.viewport.value);function $(){if(!p.value){const E=ha(g.value,n.onThumbPositionChange);p.value=E,n.onThumbPositionChange()}}const O=F(()=>n.sizes.value);return it(O,()=>{n.onThumbChange(u.value),g.value&&(n.onThumbPositionChange(),g.value.addEventListener("scroll",$))}),we(()=>{var E;g.value.removeEventListener("scroll",$),(E=a.viewport.value)==null||E.removeEventListener("scroll",$)}),(E,L)=>(r(),v(e(le),{ref:e(l),"data-state":e(n).hasThumb?"visible":"hidden",style:{width:"var(--reka-scroll-area-thumb-width)",height:"var(--reka-scroll-area-thumb-height)"},"as-child":t.asChild,as:E.as,onPointerdown:i,onPointerup:d},{default:o(()=>[A(E.$slots,"default")]),_:3},8,["data-state","as-child","as"]))}}),Ca=B({__name:"ScrollAreaCornerImpl",setup(f){const t=J(),a=R(0),n=R(0),i=F(()=>!!a.value&&!!n.value);function d(){var p;const u=((p=t.scrollbarX.value)==null?void 0:p.offsetHeight)||0;t.onCornerHeightChange(u),n.value=u}function l(){var p;const u=((p=t.scrollbarY.value)==null?void 0:p.offsetWidth)||0;t.onCornerWidthChange(u),a.value=u}return ie(t.scrollbarX.value,d),ie(t.scrollbarY.value,l),se(()=>t.scrollbarX.value,d),se(()=>t.scrollbarY.value,l),(u,p)=>{var g;return i.value?(r(),v(e(le),W({key:0,style:{width:`${a.value}px`,height:`${n.value}px`,position:"absolute",right:e(t).dir.value==="ltr"?0:void 0,left:e(t).dir.value==="rtl"?0:void 0,bottom:0}},(g=u.$parent)==null?void 0:g.$props),{default:o(()=>[A(u.$slots,"default")]),_:3},16,["style"])):C("",!0)}}}),La=B({__name:"ScrollAreaCorner",props:{asChild:{type:Boolean},as:{}},setup(f){const t=f,{forwardRef:a}=x(),n=J(),i=F(()=>!!n.scrollbarX.value&&!!n.scrollbarY.value),d=F(()=>n.type.value!=="scroll"&&i.value);return(l,u)=>d.value?(r(),v(Ca,W({key:0},t,{ref:e(a)}),{default:o(()=>[A(l.$slots,"default")]),_:3},16)):C("",!0)}}),$a=B({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(f){const t=f;return(a,n)=>(r(),v(e(ca),ut(ct(t)),{default:o(()=>[A(a.$slots,"default")]),_:3},16))}}),Ea={class:"flex justify-center w-full gap-x-6 lg:gap-x-8","aria-label":"Pagination"},za={class:"flex gap-2"},Pa={class:"sr-only"},Ra={class:"flex min-w-[100px] gap-2 items-center justify-center text-sm font-medium"},Ta=["href"],Aa={class:"flex gap-2"},Ba={class:"sr-only"},Ia=B({__name:"EntityListPagination",props:{entityList:{},linksOpenable:{type:Boolean}},emits:["change"],setup(f,{emit:t}){const a=f,n=t;function i(l,u=!1){if(a.linksOpenable&&(l.metaKey||l.ctrlKey||l.shiftKey||l.altKey)){l.stopPropagation();return}const p=l.target.closest("a").href;p&&!u&&(n("change",new URL(p).searchParams.get("page")),l.preventDefault())}function d(l){const u=new URL(a.entityList.meta.first_page_url);return u.searchParams.set("page",String(l)),u.toString()}return(l,u)=>(r(),_("nav",Ea,[S("div",za,[c(e(D),{as:l.entityList.meta.prev_page_url?"a":"button",class:"hidden sm:flex",size:"icon",variant:"outline",href:l.entityList.meta.first_page_url,disabled:!l.entityList.meta.prev_page_url,onClick:i},{default:o(()=>[c(e(ra),{class:"h-4 w-4"})]),_:1},8,["as","href","disabled"]),c(e(D),{as:l.entityList.meta.prev_page_url?"a":"button",size:"icon",variant:"outline",href:l.entityList.meta.prev_page_url,disabled:!l.entityList.meta.prev_page_url,onClick:i},{default:o(()=>[c(e(dt),{class:"h-4 w-4"}),S("span",Pa,k(e(I)("sharp::entity_list.pagination.previous")),1)]),_:1},8,["as","href","disabled"])]),S("div",Ra,[l.entityList.meta.last_page?(r(),_(z,{key:0},[S("span",null,k(e(I)("sharp::entity_list.pagination.current").split(":current_page")[0]),1),c(e(ht),{"model-value":String(l.entityList.meta.current_page),"onUpdate:modelValue":u[1]||(u[1]=p=>l.$emit("change",p))},{default:o(()=>[c(e(pt),{class:"w-10 justify-center [&_svg]:hidden"},{default:o(()=>[P(k(l.entityList.meta.current_page),1)]),_:1}),c(e(ft),{"align-offset":-22},{default:o(()=>[(r(!0),_(z,null,ae(l.entityList.meta.last_page,p=>(r(),v(e(mt),{value:String(p)},{default:o(()=>[l.linksOpenable?(r(),_("a",{key:0,class:"absolute inset-0",href:d(p),onPointerup:u[0]||(u[0]=g=>i(g,!0))},null,40,Ta)):C("",!0),P(" "+k(p),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1},8,["model-value"]),S("span",null,k(e(I)("sharp::entity_list.pagination.current",{last_page:l.entityList.meta.last_page}).split(":current_page")[1]),1)],64)):(r(),_(z,{key:1},[P(k(e(I)("sharp::entity_list.pagination.current_simple").replace(":current_page",l.entityList.meta.current_page+"")),1)],64))]),S("div",Aa,[c(e(D),{as:l.entityList.meta.next_page_url?"a":"button",size:"icon",variant:"outline",href:l.entityList.meta.next_page_url,disabled:!l.entityList.meta.next_page_url,onClick:i},{default:o(()=>[S("span",Ba,k(e(I)("sharp::entity_list.pagination.next")),1),c(e(vt),{class:"h-4 w-4"})]),_:1},8,["as","href","disabled"]),c(e(D),{as:l.entityList.meta.next_page_url?"a":"button",class:q(["hidden sm:flex",l.entityList.meta.last_page_url?"":"invisible"]),size:"icon",variant:"outline",href:l.entityList.meta.last_page_url,disabled:!l.entityList.meta.next_page_url,onClick:i},{default:o(()=>[c(e(ia),{class:"h-4 w-4"})]),_:1},8,["as","class","href","disabled"])])]))}}),ze=B({__name:"StateIcon",props:{stateValue:{}},setup(f){return(t,a)=>{var n;return r(),_("div",{class:"relative rounded-full",style:oe({"--color":((n=t.stateValue)==null?void 0:n.color)??"black"})},a[0]||(a[0]=[S("div",{class:"h-1.5 w-1.5 rounded-full bg-[var(--color)]"},null,-1)]),4)}}}),Da=B({__name:"Table",props:{class:{},noScroll:{type:Boolean}},setup(f){const t=f;return(a,n)=>(r(),_("div",{class:q(["relative",{"w-full overflow-auto":!a.noScroll}])},[S("table",{class:q(e(N)("w-full caption-bottom text-sm",t.class))},[A(a.$slots,"default")],2)],2))}}),Ua=B({__name:"TableBody",props:{class:{}},setup(f){const t=f;return(a,n)=>(r(),_("tbody",{class:q(e(N)("[&_tr:last-child]:border-0",t.class))},[A(a.$slots,"default")],2))}}),de=B({__name:"TableCell",props:{class:{}},setup(f){const t=f;return(a,n)=>(r(),_("td",{class:q(e(N)("px-3 py-4 align-middle [&:has([role=checkbox])]:pr-0 first:pl-4 last:pr-4",t.class))},[A(a.$slots,"default")],2))}}),_e=B({__name:"TableHead",props:{class:{}},setup(f){const t=f;return(a,n)=>(r(),_("th",{class:q(e(N)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t.class))},[A(a.$slots,"default")],2))}}),qa=B({__name:"TableHeader",props:{class:{}},setup(f){const t=f;return(a,n)=>(r(),_("thead",{class:q(e(N)("[&_tr]:border-b",t.class))},[A(a.$slots,"default")],2))}}),Xe=B({__name:"TableRow",props:{class:{}},setup(f){const t=f;return(a,n)=>(r(),_("tr",{class:q(e(N)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t.class))},[A(a.$slots,"default")],2))}}),Me=B({__name:"EntityListSearch",props:{entityList:{},expanded:{type:Boolean},inline:{type:Boolean}},emits:["submit","update:expanded"],setup(f,{emit:t}){var E;const a=f,n=t,i=R(),d=R(),{focused:l}=yt(i),{pressed:u}=bt({target:i}),p=R(((E=a.entityList.query)==null?void 0:E.search)??"");let g="";se(l,()=>{var L,H;l.value?(g&&(p.value=g,g=""),u.value?se(u,()=>{u.value||n("update:expanded",!0)},{once:!0}):n("update:expanded",!0)):u.value||(g=(L=a.entityList.query)!=null&&L.search?"":p.value,p.value=(H=a.entityList.query)==null?void 0:H.search,n("update:expanded",!1))}),se(()=>a.entityList,()=>{var L;p.value=((L=a.entityList.query)==null?void 0:L.search)??"",n("update:expanded",!1)});function $(){n("update:expanded",!1),n("submit",p.value)}function O(){a.expanded||n("update:expanded",!0)}return(L,H)=>{var X,Y;return r(),_("form",{onSubmit:je($,["prevent"]),ref_key:"el",ref:i},[S("div",{class:q(["relative z-[1]",[L.inline?"h-8 w-[150px] 2xl:w-[200px]":""]])},[S("div",{class:q(["top-0 left-0 group flex gap-3",e(N)(L.inline?"absolute h-8":"flex-col",L.inline&&L.expanded?"-mr-[100px]":"")])},[S("div",{class:q(["relative",[L.inline?"":"w-full"]])},[c(e(gt),{placeholder:e(I)("sharp::action_bar.list.search.placeholder"),modelValue:p.value,"onUpdate:modelValue":H[0]||(H[0]=h=>p.value=h),class:q(e(N)("w-full pl-8 h-9",{"h-8 w-[150px] 2xl:w-[200px]":L.inline,"sm:!w-[300px]":L.inline&&L.expanded,"pr-8":(X=a.entityList.query)==null?void 0:X.search})),type:"search",ref_key:"input",ref:d,onInput:O},null,8,["placeholder","modelValue","class"]),c(e(_t),{class:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"}),(Y=a.entityList.query)!=null&&Y.search?(r(),v(e(D),{key:0,type:"button",class:"absolute right-0 top-0 h-full",size:"sm",variant:"ghost",onClick:H[1]||(H[1]=h=>L.$emit("submit",null))},{default:o(()=>[c(e(wt),{class:"h-4 w-4 text-muted-foreground"})]),_:1})):C("",!0)],2),c(e(D),{type:"submit",class:q(e(N)("h-8 hidden",L.expanded?"inline-flex":"")),size:"sm"},{default:o(()=>[P(k(e(I)("sharp::action_bar.list.search.button")),1)]),_:1},8,["class"])],2)],2)],544)}}}),Qe=B({__name:"ScrollBar",props:{orientation:{default:"vertical"},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(f){const t=f,a=F(()=>{const{class:n,...i}=t;return i});return(n,i)=>(r(),v(e(ka),W(a.value,{class:e(N)("flex touch-none select-none transition-colors",n.orientation==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-px",n.orientation==="horizontal"&&"h-4 flex-col border-t border-t-transparent p-1",t.class)}),{default:o(()=>[c(e(Sa),{class:"relative flex-1 rounded-full bg-muted-foreground/50 hover:bg-muted-foreground"},{default:o(()=>i[0]||(i[0]=[S("div",{class:"absolute -inset-1.5 -top-4"},null,-1)])),_:1})]),_:1},16,["class"]))}}),Ha=B({__name:"ScrollArea",props:{type:{},dir:{},scrollHideDelay:{},asChild:{type:Boolean},as:{},class:{},touchType:{}},setup(f){const t=f,a=F(()=>{const{class:u,...p}=t;return p}),n=kt("(hover: none)"),i=R(),{arrivedState:d,measure:l}=St(()=>{var u;return(u=i.value)==null?void 0:u.viewportElement});return se(Lt(()=>{var u;return(u=i.value)==null?void 0:u.viewportElement}).width,Ct(()=>{l()},50,!0,!0)),(u,p)=>(r(),v(e(pa),W(a.value,{type:e(n)?t.touchType:t.type,class:e(N)("relative overflow-hidden",t.class)}),{default:o(()=>[c(e(fa),{class:"group/viewport h-full w-full rounded-[inherit]","data-scroll-arrived-right":e(d).right,ref_key:"viewport",ref:i},{default:o(()=>[A(u.$slots,"default")]),_:3},8,["data-scroll-arrived-right"]),c(Qe),c(e(La))]),_:3},16,["type","class"]))}}),Va={key:0,class:"fixed inset-0 z-10 bg-black/5"},Oa={class:"ml-auto self-start pointer-events-auto flex flex-wrap gap-2 lg:flex-nowrap"},Fa={key:1,class:"col-auto"},Ka={key:1,class:"h-8 mb-4"},Wa={class:"flex sm:flex-wrap gap-y-6 gap-x-2"},Xa={class:"flex items-baseline"},Ma={key:0,class:"self-center -my-1 pointer-events-auto hidden sm:block"},Ya={key:1,class:"relative -my-1 flex pointer-events-auto"},ja={class:"flex items-center lg:hidden"},Na={class:"flex flex-col flex-wrap gap-4"},xa=["for"],Ga={class:"truncate"},Ja={class:"flex justify-center w-10"},Qa={class:"truncate"},ss=B({__name:"EntityList",props:{entityKey:{},entityList:{},filters:{},commands:{},title:{},inline:{type:Boolean},showCreateButton:{type:Boolean,default:!0},showReorderButton:{type:Boolean,default:!0},showSearchField:{type:Boolean,default:!0},showEntityState:{type:Boolean,default:!0},collapsed:{type:Boolean}},emits:["update:query","filter-change","reset","reordering","needs-topbar"],setup(f,{emit:t}){const a=f,n=R(),i=t,d=R(null),l=F(()=>!!d.value);function u(s,y){i("filter-change",s,y)}const p=R(!1);function g(s){i("update:query",{...a.entityList.query,search:s})}function $(){i("reset")}function O(s){i("update:query",{...a.entityList.query,page:s})}function E(s){const y=a.entityList.currentSort===s?a.entityList.currentSortDir==="desc"?a.entityList.config.defaultSort===a.entityList.currentSort?"asc":null:"desc":"asc";i("update:query",{...a.entityList.query,page:1,sort:y?s:null,dir:y||null})}function L(s,y){const{commands:M,entityKey:j}=a;Ee.post(G("code16.sharp.api.list.state",{entityKey:j,instanceId:y}),{value:s}).then(U=>{M.handleCommandResponse(U.data)}).catch(U=>{var V,b;const ne=(V=U.response)==null?void 0:V.data;((b=U.response)==null?void 0:b.status)===422&&Zt(ne.message,{title:I("modals.state.422.title"),isError:!0})})}async function H(s,y){const{commands:M,entityKey:j}=a;s.confirmation&&n.value.querySelector("[data-reka-scroll-area-viewport]").scrollTo({left:0,behavior:"smooth"}),await M.send(s,{postCommand:G("code16.sharp.api.list.command.instance",{entityKey:j,instanceId:y,commandKey:s.key}),getForm:G("code16.sharp.api.list.command.instance.form",{entityKey:j,instanceId:y,commandKey:s.key}),query:a.entityList.query,entityKey:j,instanceId:y},{highlightElement:()=>{var U;return(U=n.value)==null?void 0:U.querySelector(`[data-instance-row="${y}"]`)}})}async function X(s){const{commands:y,entityKey:M}=a;await y.send(s,{postCommand:G("code16.sharp.api.list.command.entity",{entityKey:M,commandKey:s.key}),getForm:G("code16.sharp.api.list.command.entity.form",{entityKey:M,commandKey:s.key}),query:{...a.entityList.query,ids:Object.entries(d.value??{}).filter(([j,U])=>U).map(([j,U])=>j)},entityKey:M}),d.value=null}async function Y(s){const{entityKey:y,entityList:M,commands:j}=a;n.value.querySelector("[data-reka-scroll-area-viewport]").scrollTo({left:0,behavior:"smooth"}),await ea(M.config.deleteConfirmationText,{highlightElement:()=>{var U;return(U=n.value)==null?void 0:U.querySelector(`[data-instance-row="${s}"]`)}})&&(await Ee.delete(G("code16.sharp.api.list.delete",{entityKey:y,instanceId:s})),j.handleCommandResponse({action:"reload"}))}const h=R(null),m=F(()=>!!h.value),w=R(),Q=$t(()=>m.value?w.value.$el:null,F({get:()=>h.value??[],set:s=>{h.value=s}}),{animation:150});se(m,()=>{m.value?Q.start():Q.stop(),i("reordering",m.value)});async function te(){const{entityKey:s,commands:y}=a;await Ee.post(G("code16.sharp.api.list.reorder",{entityKey:s}),{instances:h.value.map(M=>a.entityList.instanceId(M))}),await y.handleCommandResponse({action:"reload"}),h.value=null}const ue=R(!1),ce=F(()=>m.value||l.value);se([ue,ce],()=>{ue.value?i("needs-topbar",ce.value):i("needs-topbar",!1),a.inline&&document.dispatchEvent(new CustomEvent("breadcrumb:updateAppendItem",{detail:ue.value&&ce.value?{label:a.title}:null}))});const et=Et(Wt).smaller("md"),Le=F(()=>a.entityList.fields.filter(s=>et.value?!s.hideOnXS:!0));return(s,y)=>(r(),v(aa,{commands:s.commands},{default:o(()=>{var M,j;return[S("div",{ref_key:"el",ref:n},[c(zt,{"enter-active-class":"transition","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:o(()=>[m.value?(r(),_("div",Va)):C("",!0)]),_:1}),s.entityList?(r(),_(z,{key:0},[s.showReorderButton&&s.entityList.canReorder||s.entityList.canSelect||(M=s.entityList.dropdownEntityCommands(l.value))!=null&&M.flat().length||s.entityList.primaryCommand||s.showCreateButton&&s.entityList.authorizations.create?(r(),v(Pt,{key:0,class:q(e(N)("group container sticky top-14 border-b -mb-px -mt-4 pt-4 bg-white pb-4 px-4 lg:px-6 flex gap-3 pointer-events-none","lg:sticky lg:border-0 lg:pt-0 lg:mt-0 lg:top-3.5 lg:bg-transparent lg:last:*:-translate-x-[--sticky-safe-right-offset]",{"-top-8 z-0 px-0":s.inline&&!ce.value,"z-[15]":m.value,"data-[stuck=true]:z-30":!s.inline||ce.value})),stuck:ue.value,"onUpdate:stuck":y[5]||(y[5]=U=>ue.value=U)},{default:o(()=>{var U,ne;return[S("div",Oa,[s.showReorderButton&&s.entityList.canReorder&&!l.value?(r(),_(z,{key:0},[m.value?(r(),_(z,{key:0},[c(e(D),{class:"h-8",size:"sm",variant:"outline",onClick:y[0]||(y[0]=V=>h.value=null)},{default:o(()=>[P(k(e(I)("sharp::action_bar.list.reorder_button.cancel")),1)]),_:1}),c(e(D),{class:"h-8",size:"sm",onClick:te},{default:o(()=>[P(k(e(I)("sharp::action_bar.list.reorder_button.finish")),1)]),_:1})],64)):(r(),_("div",Fa,[c(e(D),{class:"h-8",size:"sm",variant:"outline",onClick:y[1]||(y[1]=V=>h.value=[...s.entityList.data])},{default:o(()=>[P(k(e(I)("sharp::action_bar.list.reorder_button")),1)]),_:1})]))],64)):C("",!0),s.entityList.canSelect&&!m.value?(r(),_(z,{key:1},[l.value?(r(),v(e(D),{key:0,class:"h-8",size:"sm",variant:"outline",onClick:y[2]||(y[2]=V=>d.value=null)},{default:o(()=>[P(k(e(I)("sharp::action_bar.list.reorder_button.cancel")),1)]),_:1})):(r(),v(e(D),{key:1,class:"h-8",size:"sm",variant:"outline",onClick:y[3]||(y[3]=V=>d.value=Object.fromEntries(s.entityList.data.map(b=>[b.id,!1])))},{default:o(()=>[P(k(e(I)("sharp::action_bar.list.select_button")),1)]),_:1}))],64)):C("",!0),(U=s.entityList.dropdownEntityCommands(l.value))!=null&&U.flat().length&&!m.value?(r(),v(e(he),{key:2},{default:o(()=>[c(e(ve),{"as-child":""},{default:o(()=>[c(e(D),{class:"h-8",variant:l.value?"default":"outline",size:"sm",disabled:m.value},{default:o(()=>[P(k(e(I)("sharp::entity_list.commands.entity.label"))+" ",1),l.value?(r(),_(z,{key:0},[P(" ("+k(Object.values(d.value).filter(Boolean).length)+" selected) ",1)],64)):C("",!0),c(Rt)]),_:1},8,["variant","disabled"])]),_:1}),c(e(me),{"collision-padding":20},{default:o(()=>[c(Oe,{commands:s.entityList.dropdownEntityCommands(l.value),selecting:l.value,onSelect:X},null,8,["commands","selecting"])]),_:1})]),_:1})):C("",!0),s.entityList.primaryCommand&&!m.value&&!l.value?(r(),v(e(D),{key:3,class:"h-8",size:"sm",onClick:y[4]||(y[4]=V=>X(s.entityList.primaryCommand))},{default:o(()=>[P(k(s.entityList.primaryCommand.label),1)]),_:1})):C("",!0),s.showCreateButton&&s.entityList.authorizations.create&&!m.value&&!l.value?(r(),_(z,{key:4},[(ne=s.entityList.forms)!=null&&ne.length?(r(),v(e(he),{key:0},{default:o(()=>[c(e(ve),{"as-child":""},{default:o(()=>[c(e(D),{class:"h-8 gap-1",size:"sm"},{default:o(()=>[c(e(ta),{class:"h-3.5 w-3.5"}),P(" "+k(e(I)("sharp::action_bar.list.forms_dropdown")),1)]),_:1})]),_:1}),c(e(me),null,{default:o(()=>[(r(!0),_(z,null,ae(Object.values(s.entityList.forms).filter(V=>!!V.label),V=>(r(),v(e(qe),{"as-child":""},{default:o(()=>[c(e($e),{href:e(G)("code16.sharp.form.create",{parentUri:e(pe)(),entityKey:`${s.entityKey}:${V.key}`})},{default:o(()=>[P(k(V.label),1)]),_:2},1032,["href"])]),_:2},1024))),256))]),_:1})]),_:1})):(r(),v(e(D),{key:1,as:e($e),class:"h-8 gap-1",size:"sm",disabled:m.value||l.value,href:e(G)("code16.sharp.form.create",{parentUri:e(pe)(),entityKey:s.entityKey})},{default:o(()=>[P(k(a.entityList.config.createButtonLabel||e(I)("sharp::action_bar.list.create_button")),1)]),_:1},8,["as","disabled","href"]))],64)):C("",!0)])]}),_:1},8,["class","stuck"])):C("",!0)],64)):(r(),_("div",Ka)),S("div",{class:q(["container",[s.inline?"px-0":"px-4 lg:px-6"]])},[(j=s.entityList)!=null&&j.pageAlert?(r(),v(Tt,{key:0,class:"mb-3","page-alert":s.entityList.pageAlert},null,8,["page-alert"])):C("",!0)],2),c(Kt,{class:q(m.value?"relative z-[11]":"")},{default:o(()=>{var U,ne;return[c(e(At),null,{default:o(()=>{var V,b;return[S("div",Wa,[S("div",Xa,[A(s.$slots,"card-header"),s.entityList?(r(),v(e(na),{key:0,class:q(["text-xs ml-4 mr-2 lg:ml-6 whitespace-nowrap",[s.inline?"lg:mr-9":"lg:mr-5"]])},{default:o(()=>{var T;return[(T=s.entityList.query)!=null&&T.search?(r(),_(z,{key:0},[P(k(e(Ie)("sharp::action_bar.list.search.title",s.entityList.count,{count:s.entityList.count,search:s.entityList.query.search})),1)],64)):(r(),_(z,{key:1},[P(k(e(Ie)("sharp::action_bar.list.items_count",s.entityList.count,{count:s.entityList.count})),1)],64))]}),_:1},8,["class"])):C("",!0)]),s.entityList?(r(),_(z,{key:0},[s.showSearchField&&s.entityList.config.searchable?ye((r(),_("div",Ma,[c(Me,{inline:"",expanded:p.value,"onUpdate:expanded":y[6]||(y[6]=T=>p.value=T),"entity-list":s.entityList,onSubmit:g},null,8,["expanded","entity-list"])],512)),[[be,!m.value&&!l.value&&!s.collapsed]]):C("",!0),(V=s.entityList.visibleFilters)!=null&&V.length?ye((r(),_("div",Ya,[S("div",ja,[c(e(Bt),null,{default:o(()=>[c(e($a),{"as-child":""},{default:o(()=>[c(e(D),{class:"h-8 gap-1",variant:"outline",size:"sm"},{default:o(()=>[c(e(ua),{class:"h-3.5 w-3.5"}),S("span",null,k(e(I)("sharp::filters.popover_button")),1)]),_:1})]),_:1}),c(e(It),{onOpenAutoFocus:y[8]||(y[8]=je(()=>{},["prevent"]))},{default:o(()=>[c(e(Dt),null,{default:o(()=>[c(e(Ut),null,{default:o(()=>[P(k(e(I)("sharp::filters.popover_button"))+" : "+k(s.title),1)]),_:1})]),_:1}),S("div",Na,[s.showSearchField&&s.entityList.config.searchable?(r(),v(Me,{key:0,expanded:p.value,"onUpdate:expanded":y[7]||(y[7]=T=>p.value=T),"entity-list":s.entityList,onSubmit:g},null,8,["expanded","entity-list"])):C("",!0),(r(!0),_(z,null,ae(s.entityList.visibleFilters,T=>(r(),v(Fe,{key:T.key,filter:T,value:s.filters.currentValues[T.key],disabled:m.value,valuated:s.filters.isValuated([T]),onInput:K=>u(T,K)},null,8,["filter","value","disabled","valuated","onInput"]))),128))]),c(e(qt),{class:"flex-row gap-2 mt-2"},{default:o(()=>[c(e(De),{"as-child":""},{default:o(()=>{var T;return[c(e(D),{class:"flex-1",variant:"secondary",disabled:!s.filters.isValuated(s.entityList.visibleFilters)&&!((T=s.entityList.query)!=null&&T.search),onClick:$},{default:o(()=>[P(k(e(I)("sharp::filters.reset_all")),1)]),_:1},8,["disabled"])]}),_:1}),c(e(De),{"as-child":""},{default:o(()=>[c(e(D),{class:"flex-1"},{default:o(()=>[P(k(e(I)("sharp::action_bar.form.submit_button.update")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s.filters.isValuated(s.filters.rootFilters)?(r(),v(e(Ue),{key:0,class:"ml-2"},{default:o(()=>{var T;return[P(k(Object.values(((T=s.filters.filterValues)==null?void 0:T.valuated)??{}).filter(Boolean).length),1)]}),_:1})):C("",!0)]),S("div",{class:q(["hidden lg:flex flex-wrap gap-2",{"opacity-0 pointer-events-none":p.value}])},[(r(!0),_(z,null,ae(s.entityList.visibleFilters,T=>(r(),v(Fe,{key:T.key,filter:T,value:s.filters.currentValues[T.key],disabled:m.value,valuated:s.filters.isValuated([T]),inline:"",onInput:K=>u(T,K)},null,8,["filter","value","disabled","valuated","onInput"]))),128)),s.filters.isValuated(s.entityList.visibleFilters)||(b=s.entityList.query)!=null&&b.search?(r(),v(e(D),{key:0,class:"h-8 underline underline-offset-4 -ml-2",variant:"ghost",size:"sm",onClick:$},{default:o(()=>[P(k(e(I)("sharp::filters.reset_all")),1)]),_:1})):C("",!0)],2)],512)),[[be,!m.value&&!l.value&&!s.collapsed]]):C("",!0)],64)):C("",!0)])]}),_:3}),s.entityList?(r(),_(z,{key:0},[ye(c(e(Ht),{class:q(s.entityList.count>0?"pb-2 !px-0":"")},{default:o(()=>{var V;return[((V=s.entityList.data)==null?void 0:V.length)>0?(r(),v(e(Ha),{key:0,class:"w-full",type:"auto","touch-type":"scroll"},{default:o(()=>[c(e(Da),{"no-scroll":"",class:"w-max min-w-full max-w-[768px] md:max-w-[1024px] @5xl:w-full @5xl:max-w-none"},{default:o(()=>[c(e(qa),null,{default:o(()=>[c(e(Xe),{class:"hover:bg-transparent lg:first:*:pl-6 lg:last:*:pr-6"},{default:o(()=>[l.value?(r(),v(e(_e),{key:0},{default:o(()=>y[9]||(y[9]=[S("span",{class:"sr-only"},"Select...",-1)])),_:1})):C("",!0),(r(!0),_(z,null,ae(Le.value,(b,T)=>(r(),v(e(_e),{key:b.key,class:"max-w-[70cqw] md:w-[var(--width,auto)]",style:oe({"--width":b.width==="fill"?100/Le.value.length+"%":b.width})},{default:o(()=>[b.sortable?(r(),v(e(D),{key:0,variant:"ghost",size:"sm",class:"-ml-3 h-8 data-[state=open]:bg-accent",onClick:K=>E(b.key)},{default:o(()=>[S("span",null,k(b.label),1),s.entityList.currentSort===b.key?(r(),_(z,{key:0},[s.entityList.currentSortDir==="desc"?(r(),v(e(la),{key:0,class:"ml-2 h-3.5 w-3.5"})):s.entityList.currentSortDir==="asc"?(r(),v(e(oa),{key:1,class:"ml-2 h-3.5 w-3.5"})):C("",!0)],64)):(r(),v(e(Xt),{key:1,class:"ml-2 h-3.5 w-3.5"}))]),_:2},1032,["onClick"])):(r(),_(z,{key:1},[P(k(b.label),1)],64))]),_:2},1032,["style"]))),128)),!m.value&&!l.value&&s.entityList.data.some(b=>s.entityList.instanceHasActions(b,s.showEntityState))?(r(),v(e(_e),{key:1,class:"w-2"},{default:o(()=>y[10]||(y[10]=[S("span",{class:"sr-only"},"Edit",-1)])),_:1})):C("",!0),m.value?(r(),v(e(_e),{key:2},{default:o(()=>y[11]||(y[11]=[S("span",{class:"sr-only"},"Select...",-1)])),_:1})):C("",!0)]),_:1})]),_:1}),c(e(Ua),{class:"group",ref_key:"sortableTableBody",ref:w},{default:o(()=>[(r(!0),_(z,null,ae(h.value??s.entityList.data,(b,T)=>(r(),v(e(Xe),{key:s.entityList.instanceId(b),class:q(e(N)("relative bg-background hover:bg-background has-[[data-row-action]:hover]:bg-muted/50 has-[[aria-expanded=true]]:bg-muted/50 lg:first:*:pl-6 lg:last:*:pr-6",m.value?"cursor-move hover:bg-muted/50 group-[:has(.sortable-chosen)]:bg-background [&.sortable-chosen]:transition-none":"")),"data-instance-row":s.entityList.instanceId(b)},{default:o(()=>[l.value&&d.value?(r(),v(e(de),{key:0},{default:o(()=>[c(e(Mt),{class:"block",id:`check-${s.entityKey}-${s.entityList.instanceId(b)}`,"model-value":d.value[s.entityList.instanceId(b)],"onUpdate:modelValue":K=>d.value[s.entityList.instanceId(b)]=K},null,8,["id","model-value","onUpdate:modelValue"]),S("label",{class:"absolute inset-0 z-20","data-row-action":"",for:`check-${s.entityKey}-${s.entityList.instanceId(b)}`},y[12]||(y[12]=[S("span",{class:"sr-only"},"Select",-1)]),8,xa)]),_:2},1024)):C("",!0),(r(!0),_(z,null,ae(Le.value,(K,Z)=>(r(),_(z,{key:K.key},[K.key==="@state"&&s.entityList.config.state&&s.showEntityState?(r(),v(e(de),{key:0,class:"max-w-[70cqw]"},{default:o(()=>[c(e(he),null,{default:o(()=>[c(e(ve),{"as-child":""},{default:o(()=>[c(e(D),{class:"relative disabled:opacity-100 -mx-3",variant:"ghost",size:"sm",disabled:!s.entityList.instanceCanUpdateState(b)},{default:o(()=>[c(e(Ue),{variant:"outline"},{default:o(()=>{var ee;return[c(ze,{class:"-ml-0.5 mr-1.5","state-value":s.entityList.instanceStateValue(b)},null,8,["state-value"]),P(" "+k((ee=s.entityList.instanceStateValue(b))==null?void 0:ee.label),1)]}),_:2},1024)]),_:2},1032,["disabled"])]),_:2},1024),c(e(me),{align:"start","align-offset":-16},{default:o(()=>[(r(!0),_(z,null,ae(s.entityList.config.state.values,ee=>(r(),v(e(He),{key:ee.value,"model-value":ee.value==s.entityList.instanceState(b),"onUpdate:modelValue":tt=>tt&&L(ee.value,s.entityList.instanceId(b))},{default:o(()=>[c(ze,{class:"mr-1.5","state-value":ee},null,8,["state-value"]),S("span",Ga,k(ee.label),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)):(r(),v(e(de),{key:1,class:"max-w-[70cqw]"},{default:o(()=>[Z===0&&s.entityList.instanceUrl(b)&&!l.value&&!m.value?(r(),v(e($e),{key:0,class:"absolute inset-0","data-row-action":"",href:s.entityList.instanceUrl(b)},null,8,["href"])):C("",!0),K.html&&typeof b[K.key]=="string"?(r(),v(sa,{key:1,class:q(["break-words [&_a]:relative [&_a]:z-10",{"[&_a]:pointer-events-none":l.value||m.value}]),html:b[K.key]},null,8,["class","html"])):(r(),_(z,{key:2},[P(k(b[K.key]),1)],64))]),_:2},1024))],64))),128)),m.value?(r(),v(e(de),{key:1,class:"w-0 hidden lg:table-cell @5xl:pl-4"},{default:o(()=>[S("div",Ja,[c(e(Yt),{class:"w-4 h-4 opacity-50"})])]),_:1})):C("",!0),!m.value&&!l.value&&s.entityList.instanceHasActions(b,s.showEntityState)?(r(),v(e(de),{key:2,class:"sticky bg-background pl-1 -right-3 z-10 group-data-[scroll-arrived-right=true]/viewport:bg-transparent @5xl:pl-4 @5xl:bg-transparent"},{default:o(()=>[y[13]||(y[13]=S("div",{class:"absolute inset-0 -left-2 overflow-hidden","aria-hidden":"true"},null,-1)),y[14]||(y[14]=S("div",{class:"absolute inset-0 -left-4 overflow-hidden pointer-events-none","aria-hidden":"true"},[S("div",{class:"absolute inset-0 left-4 shadow-l-xl dark:border-l shadow-border transition-opacity group-data-[scroll-arrived-right=true]/viewport:opacity-0 @5xl:opacity-0","aria-hidden":"true"})],-1)),c(e(he),null,{default:o(()=>[c(e(ve),{"as-child":""},{default:o(()=>[c(e(D),{class:"[@media(hover:hover)]:pointer-events-auto relative",variant:"ghost",size:"icon"},{default:o(()=>[c(e(jt),{class:"w-4 h-4"})]),_:1})]),_:1}),c(e(me),{side:"bottom",align:"center"},{default:o(()=>{var K;return[s.entityList.config.state&&s.showEntityState&&s.entityList.instanceCanUpdateState(b)?(r(),_(z,{key:0},[c(e(Nt),null,{default:o(()=>[c(e(xt),null,{default:o(()=>[c(e(Gt),null,{default:o(()=>[P(k(e(I)("sharp::modals.entity_state.edit.title")),1)]),_:1}),c(e(Jt),null,{default:o(()=>[c(e(Qt),null,{default:o(()=>[(r(!0),_(z,null,ae(s.entityList.config.state.values,Z=>(r(),v(e(He),{key:Z.value,"model-value":Z.value==s.entityList.instanceState(b),"onUpdate:modelValue":ee=>ee&&L(Z.value,s.entityList.instanceId(b))},{default:o(()=>[c(ze,{class:"mr-1.5","state-value":Z},null,8,["state-value"]),S("span",Qa,k(Z.label),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),c(e(Ve),{class:"last:hidden"})],64)):C("",!0),c(Oe,{commands:s.entityList.instanceCommands(b),onSelect:Z=>H(Z,s.entityList.instanceId(b))},null,8,["commands","onSelect"]),!s.entityList.config.deleteHidden&&s.entityList.instanceCanDelete(b)?(r(),_(z,{key:1},[(K=s.entityList.instanceCommands(b))!=null&&K.flat().length?(r(),v(e(Ve),{key:0,class:"first:hidden"})):C("",!0),c(e(qe),{class:"text-destructive",onClick:Z=>Y(s.entityList.instanceId(b))},{default:o(()=>[P(k(e(I)("sharp::action_bar.form.delete_button")),1)]),_:2},1032,["onClick"])],64)):C("",!0)]}),_:2},1024)]),_:2},1024)]),_:2},1024)):C("",!0)]),_:2},1032,["class","data-instance-row"]))),128))]),_:1},512)]),_:1}),c(e(Vt),null,{default:o(({height:b})=>[c(e(Ot),{class:"absolute inset-0 pointer-events-none"},{default:o(({bottom:T})=>[c(e(Qe),{class:"z-20 [@media(hover:hover)]:bg-background pointer-events-auto will-change-transform",orientation:"horizontal",style:oe({transform:`translate3d(0, ${Math.max(0,T-b)*-1}px, 0)`})},null,8,["style"])]),_:2},1024)]),_:1})]),_:1})):(r(),_(z,{key:1},[P(k(e(I)("sharp::entity_list.empty_text")),1)],64))]}),_:1},8,["class"]),[[be,!s.collapsed]]),(U=s.entityList.meta)!=null&&U.prev_page_url||(ne=s.entityList.meta)!=null&&ne.next_page_url?ye((r(),v(e(Ft),{key:0,class:"px-4 pt-4 lg:px-6"},{default:o(()=>[c(Ia,{"entity-list":s.entityList,"links-openable":!s.inline,onChange:O},null,8,["entity-list","links-openable"])]),_:1},512)),[[be,!s.collapsed]]):C("",!0)],64)):C("",!0)]}),_:3},8,["class"])],512)]}),_:3},8,["commands"]))}});class Ze{constructor(t,a,n,i){Object.assign(this,t),this.entityKey=a,this.hiddenFilters=n,this.hiddenCommands=i}get count(){var t;return((t=this.meta)==null?void 0:t.total)??this.data.length}get currentSort(){var t;return((t=this.query)==null?void 0:t.sort)??this.config.defaultSort}get currentSortDir(){var t;return((t=this.query)==null?void 0:t.dir)??this.config.defaultSortDir}get visibleFilters(){var t;return(t=this.config.filters)==null?void 0:t._root.filter(a=>{var n;return!((n=this.hiddenFilters)!=null&&n[a.key])})}get visibleCommands(){var t,a,n,i;return{instance:(a=(t=this.config.commands)==null?void 0:t.instance)==null?void 0:a.map(d=>d.filter(l=>{var u,p;return!((p=(u=this.hiddenCommands)==null?void 0:u.instance)!=null&&p.includes(l.key))})),entity:(i=(n=this.config.commands)==null?void 0:n.entity)==null?void 0:i.map(d=>d.filter(l=>{var u,p;return!((p=(u=this.hiddenCommands)==null?void 0:u.entity)!=null&&p.includes(l.key))}))}}get allowedEntityCommands(){var t;return((t=this.visibleCommands.entity)==null?void 0:t.map(a=>a.filter(n=>n.authorization)))??[]}get primaryCommand(){return this.allowedEntityCommands.flat().find(t=>t.primary)}get canSelect(){return this.allowedEntityCommands.flat().some(t=>t.instance_selection)}get canReorder(){return this.config.reorderable&&this.authorizations.reorder&&this.data.length>0}withRefreshedItems(t){return this.data=this.data.map(a=>t.find(n=>this.instanceId(n)===this.instanceId(a))??a),new Ze(this,this.entityKey)}dropdownEntityCommands(t){return this.allowedEntityCommands.map(a=>a.filter(n=>t?!!n.instance_selection:!n.primary))}instanceId(t){return t[this.config.instanceIdAttribute]}instanceUrl(t){const a=this.entityKey,n=this.instanceId(t);if(!this.authorizations.view.includes(n))return null;if(this.config.hasShowPage)return G("code16.sharp.show.show",{parentUri:pe(),entityKey:a,instanceId:n});if(this.forms){const i=Object.values(this.forms).find(d=>d.instances.includes(n));return G("code16.sharp.form.edit",{parentUri:pe(),entityKey:`${a}:${i.key}`,instanceId:n})}return G("code16.sharp.form.edit",{parentUri:pe(),entityKey:a,instanceId:n})}instanceState(t){return this.config.state?t[this.config.state.attribute]:null}instanceStateValue(t){var a;return(a=this.config.state)==null?void 0:a.values.find(n=>n.value===this.instanceState(t))}instanceCanUpdateState(t){return Array.isArray(this.config.state.authorization)?this.config.state.authorization.includes(this.instanceId(t)):!!this.config.state.authorization}instanceCanDelete(t){var a;return Array.isArray(this.authorizations.delete)?(a=this.authorizations.delete)==null?void 0:a.includes(this.instanceId(t)):!!this.authorizations.delete}instanceCommands(t){var a,n;return(n=(a=this.visibleCommands)==null?void 0:a.instance)==null?void 0:n.map(i=>i.filter(d=>Array.isArray(d.authorization)?d.authorization.includes(this.instanceId(t)):d.authorization))}instanceHasActions(t,a){var n;return((n=this.instanceCommands(t))==null?void 0:n.flat().length)>0||this.config.state&&a&&this.instanceCanUpdateState(t)||!this.config.deleteHidden&&this.instanceCanDelete(t)}}export{Ze as E,ss as _,ze as a};
