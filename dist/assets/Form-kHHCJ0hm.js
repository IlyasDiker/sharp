import{d as K,r as s,aw as B,ai as v,ax as E,ay as N,c as h,w as o,ap as V,o as r,u as e,I as $,h as w,a as l,b as n,t as i,i as z,j as F,W as D,z as m,_ as d,F as u,av as S}from"./sharp-BzqWd9f1.js";import{_ as U}from"./Title.vue_vue_type_script_setup_true_lang-DnOZsG9R.js";import{_ as j}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-B6R-jyYj.js";const x={class:"flex gap-4"},W=K({__name:"Form",props:{form:{},breadcrumb:{},errors:{}},setup(C){const f=C,{entityKey:I,instanceId:y}=s().params,a=new B(f.form,I,y),b=v(!1);v(!1),E(()=>{a.errors=f.errors});function k(){const{parentUri:t,entityKey:p,instanceId:_}=s().params,c=()=>{b.value=!0},g=()=>{b.value=!1};s().current("code16.sharp.form.create")?S.post(s("code16.sharp.form.store",{parentUri:t,entityKey:p}),a.serializedData,{onStart:c,onFinish:g}):s().current("code16.sharp.form.edit")&&S.post(s("code16.sharp.form.update",{parentUri:t,entityKey:p,instanceId:_}),a.serializedData,{onStart:c,onFinish:g})}return(t,p)=>{const _=N("SharpForm");return r(),h(V,null,{breadcrumb:o(()=>[e($)("sharp.display_breadcrumb")?(r(),h(j,{key:0,breadcrumb:t.breadcrumb},null,8,["breadcrumb"])):w("",!0)]),default:o(()=>[l(U,{breadcrumb:t.breadcrumb},null,8,["breadcrumb"]),l(_,{form:e(a),"show-error-alert":Object.values(f.errors).length>0,onSubmit:k},{title:o(()=>[n(i(t.breadcrumb.items.at(-1).documentTitleLabel),1)]),footer:o(()=>[z("div",x,[l(e(F),{variant:"outline","as-child":""},{default:o(()=>{var c;return[l(e(D),{href:(c=t.breadcrumb.items.at(-2))==null?void 0:c.url},{default:o(()=>[e(a).canEdit?(r(),m(u,{key:0},[n(i(e(d)("sharp::action_bar.form.cancel_button")),1)],64)):(r(),m(u,{key:1},[n(i(e(d)("sharp::action_bar.form.back_button")),1)],64))]),_:1},8,["href"])]}),_:1}),e(a).canEdit?(r(),h(e(F),{key:0,style:{"min-width":"6.5em"},disabled:e(a).isUploading||b.value,onClick:k},{default:o(()=>[e(a).isUploading?(r(),m(u,{key:0},[n(i(e(d)("sharp::action_bar.form.submit_button.pending.upload")),1)],64)):e(y)||e(a).config.isSingle?(r(),m(u,{key:1},[n(i(e(d)("sharp::action_bar.form.submit_button.update")),1)],64)):(r(),m(u,{key:2},[n(i(e(d)("sharp::action_bar.form.submit_button.create")),1)],64))]),_:1},8,["disabled"])):w("",!0)])]),_:1},8,["form","show-error-alert"])]),_:1})}}});export{W as default};
